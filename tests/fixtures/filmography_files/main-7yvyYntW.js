const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chunks/Bo3YRdmu.js","./chunks/MRfd4lNX.js","./chunks/D6-XlEtG.js","./chunks/CBHMxBpJ.js","./chunks/DZEHBdoo.js","./chunks/BKjBsywS.js","./chunks/CqkxH0ZD.js","./chunks/Duz0x7wZ.js","./chunks/E09ShL52.js","./chunks/bKpgursT.js","./chunks/BGVqBqED.js","./chunks/D4Yk99Ne.js","./chunks/03U_i1H8.js","./chunks/hzgQj22F.js","./chunks/CP0EPuP8.js","./chunks/C3e4t58V.js","./chunks/DiOw5U6i.js","./chunks/D4jkuF44.js","./chunks/CswyOWBu.js","./chunks/qdU7E-mG.js","./chunks/GVR8ng7U.js","./chunks/Ban4G7ML.js","./chunks/Cr3O1wMX.js","./chunks/CYQg_BNx.js","./chunks/nV9Wew8p.js","./chunks/Dw1UnyvJ.js","./chunks/CF74jhiq.js","./chunks/D2nGpDRe.js","./chunks/vCWiOUpe.js","./chunks/C-GAFnFO.js","./chunks/B2KKeOnX.js","../../css/base-modal-BOfAec-R.css","./chunks/BtrmlD8h.js","./chunks/C29KSq6L.js","./chunks/CjlPRQ_z.js","./chunks/WoFJlMZB.js","./chunks/CdoukE8b.js","./chunks/CdWFUnCK.js","./chunks/Bwjt9Zt3.js","./chunks/BCTBTwm7.js","./chunks/CUcMfv5U.js","../../css/dialog-body-I0BlEq3y.css","./chunks/DeouIRlJ.js","./chunks/bvI368ct.js"])))=>i.map(i=>d[i]);
var ls=Object.defineProperty;var cs=(e,i,n)=>i in e?ls(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var ae=(e,i,n)=>cs(e,typeof i!="symbol"?i+"":i,n);import"./chunks/B5Qt9EMX.js";import"./chunks/BCTBTwm7.js";import"./chunks/DpSFKnps.js";import{$ as xi,r as qt}from"./chunks/B7pRgGH2.js";import{S as us,E as ds,i as Ri}from"./chunks/Cqnn1ZNb.js";import{_ as Kt}from"./chunks/03U_i1H8.js";import{j as N,r as Xe,R as Rt}from"./chunks/MRfd4lNX.js";import{d as fs,R as hs,r as yn}from"./chunks/qdU7E-mG.js";import{m as ps,F as ms,n as gs,W as bn,o as wn,p as vs,b as ji,L as ys,I as bs,q as ws,r as xs,s as _s,v as Cs,C as Ss,w as xn,x as ks,l as Ts,a as _i,y as Is,z as Es,A as Ni}from"./chunks/Bo3YRdmu.js";import{a as _e,b as Ge,j as As,f as Hi}from"./chunks/E09ShL52.js";import{c as _n}from"./chunks/CqkxH0ZD.js";import{f as Fi,p as Ds}from"./chunks/D4Yk99Ne.js";import{S as Ps}from"./chunks/nV9Wew8p.js";import"./chunks/B9fb8Bne.js";import{e as Cn,c as Os,g as zi,v as Gt,a as Wi,w as Bi,d as Sn,o as kn,s as Ms,f as Tn,h as Ls,l as Rs,i as js,r as qi}from"./chunks/CswyOWBu.js";import{e as $i,g as Ns,p as Hs,a as Fs,b as ct}from"./chunks/GVR8ng7U.js";import"./chunks/C0D7dfi8.js";import{a as zs,r as Ws}from"./chunks/DSbtELx8.js";import{r as Ui}from"./chunks/CfqgOErV.js";import{r as Qt}from"./chunks/BhibFcxs.js";import{r as Bs}from"./chunks/RTvrqW77.js";import"./chunks/gsj6l96C.js";import{g as qs}from"./chunks/D6-XlEtG.js";import"./chunks/DaSwv84b.js";import{d as Yi,m as $s}from"./chunks/DjoGib27.js";import{P as Se}from"./chunks/vCWiOUpe.js";import"./chunks/DSY2fS8P.js";import{S as Us}from"./chunks/Id4iG9uS.js";import"./chunks/BXwxMPcs.js";import{p as In}from"./chunks/DPeCBLXW.js";import"./chunks/BjuD2H-f.js";import{C as Ys,s as Vs}from"./chunks/Ban4G7ML.js";import"./chunks/Cr3O1wMX.js";import{g as mt,s as Ci}from"./chunks/bKpgursT.js";import{P as me,M as We,B as fi,a as Xs,V as Ks,L as Gs,R as Qs,W as Js,I as Zs,S as er,T as tr}from"./chunks/BKjBsywS.js";import{a as et}from"./chunks/-rqf-nHv.js";import{PrivateNoteMessage as ir}from"./chunks/SsRL3GGZ.js";import{t as nr}from"./chunks/Dy-E0KiV.js";import"./chunks/D3y6LkFj.js";import{o as sr}from"./chunks/DHOGRMit.js";import{E as rr}from"./chunks/BLpqPwTf.js";import{g as gt,C as or,b as ar,E as lr}from"./chunks/CmVCXTtj.js";import{S as cr}from"./chunks/D0CRiLCf.js";import{g as ur}from"./chunks/CF6vd0R2.js";import{T as dr}from"./chunks/Bwjt9Zt3.js";import{t as fr}from"./chunks/CdWFUnCK.js";import{P as hr}from"./chunks/B8N5NSw2.js";import{p as pr,F as mr}from"./chunks/_O9HB_fC.js";import{m as gr}from"./chunks/BOYOeiUI.js";import{c as vr}from"./chunks/ChpbvBPH.js";import{o as yr}from"./chunks/DO__q7rP.js";import{R as En}from"./chunks/BkXYvmP0.js";import{A as br}from"./chunks/DfE0rO6x.js";import{s as wr}from"./chunks/qjl1DJEE.js";import{A as Je}from"./chunks/C3wRZFjC.js";import{o as xr}from"./chunks/CTIeOcJG.js";import{b as _r}from"./chunks/BPRPUOEe.js";import"./chunks/CkEEJX_R.js";import{t as Cr}from"./chunks/DxtJGFC4.js";import{d as Sr}from"./chunks/Duz0x7wZ.js";import"./chunks/C3Ay1Ke8.js";import"./chunks/CkhgB9_0.js";import"./chunks/qt9y7WI1.js";import"./chunks/AZAFc45w.js";import"./chunks/BeurgYGG.js";import"./chunks/Dw1UnyvJ.js";import"./chunks/CbXmRM-a.js";import"./chunks/DbkyL-rk.js";import"./chunks/CBHMxBpJ.js";import"./chunks/CMMPhZm8.js";import"./chunks/Bbh8MmKk.js";import"./chunks/AxRaG6ks.js";import"./chunks/BngmZowG.js";import"./chunks/SOgt3rgE.js";import"./chunks/Y-VezM8H.js";import"./chunks/DI4W6rxK.js";import"./chunks/CYQg_BNx.js";import"./chunks/CCPv9W2X.js";import"./chunks/DbKgFysp.js";import"./chunks/cYXQUpen.js";import"./chunks/DZ_uTcyD.js";import"./chunks/iIQEGdzw.js";import"./chunks/BCi0_APx.js";import"./chunks/CPLialKx.js";import"./chunks/hzgQj22F.js";import"./chunks/DZPCvrkM.js";import"./chunks/CF74jhiq.js";import"./chunks/DZEHBdoo.js";import"./chunks/BGVqBqED.js";import"./chunks/CP0EPuP8.js";import"./chunks/C3e4t58V.js";import"./chunks/DiOw5U6i.js";import"./chunks/D4jkuF44.js";import"./chunks/D2nGpDRe.js";import"./chunks/C-GAFnFO.js";import"./chunks/B2KKeOnX.js";import"./chunks/DfiKuLCj.js";import"./chunks/BGHdALLu.js";import"./chunks/CUcMfv5U.js";import"./chunks/DOHxIiFh.js";import"./chunks/CjlPRQ_z.js";import"./chunks/CdoukE8b.js";import"./chunks/DHupp3cl.js";import"./chunks/Dxzbedgu.js";function aa(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var kr=function(e,i,n){s();function r(c,h){var f=null;return function(){var m=this,y=arguments;window.clearTimeout(f),f=window.setTimeout(function(){c.apply(m,y)},h)}}window.addEventListener("resize",r(s,50)),e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style["-webkit-transform"]="translate(-50%, -50%)",e.style["-ms-transform"]="translate(-50%, -50%)",e.style.transform="translate(-50%, -50%)",e.parentNode.style.overflow="hidden";var t=e.getAttribute("poster");e.removeAttribute("poster"),e.parentNode.style.backgroundImage="url("+t+")",e.parentNode.style.backgroundSize="cover",e.parentNode.style.backgroundPosition="center center";function s(){var c=e.parentNode.offsetHeight,h=e.parentNode.offsetWidth,f=i,m=n,y=c/m,v=h/f;v>y?(e.style.height="auto",e.style.width=h+"px"):(e.style.height=c+"px",e.style.width="auto")}var o=typeof e.canPlayType<"u",a=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(a=!0),(!o||a)&&e&&e.parentNode&&e.parentNode.removeChild(e)};window.jQuery&&jQuery.fn.extend({coverVid:function(){return kr(this[0],arguments[0],arguments[1]),this}});/**
 * @author  Mudit Ameta
 * @license https://github.com/zeusdeux/isInViewport/blob/master/license.md MIT
 */(function(e){e.fn.isInViewport=function i(n){var r=this.get(0),t=r.getBoundingClientRect(),s=t.top,o=t.bottom,a=e(window).scrollTop()===e(document).height()-e(window).height(),c=""+r.offsetLeft+r.offsetTop+t.height+t.width,h=e.extend({tolerance:0,debug:!1},n),f=!1;return i.elementsAfterCurrent=i.elementsAfterCurrent||{},i.elementsAfterCurrent[c]=i.elementsAfterCurrent[c]||this.nextAll(),h.debug&&(console.log("---------------------------------------"),console.log("index: "+c),console.log("div: "+this.text().trim()),console.log("top: "+s),console.log("bottom: "+o),console.log("tolerance: "+h.tolerance),console.log("end of page: "+a),console.log("scrollTop: "+e(window).scrollTop()),console.log("doc height:"+e(document).height()),console.log("windowHeight using $(window).height(): "+e(window).height())),h.tolerance?s>=0?s<=h.tolerance?f=!0:f=!1:o>h.tolerance?f=!0:f=!1:s>=0&&s<=e(window).height()?f=!0:f=!1,a&&(i.elementsAfterCurrent[c].length===1||!i.elementsAfterCurrent[c].length)&&(s<0?f=!1:f=!0),f}})(jQuery);(function(e){var i=e.ajax,n={},r=[],t=[];e.ajax=function(s,o){typeof s=="string"?typeof o=="object"&&o!==null?o.url=s:o={url:s}:o=s,o=jQuery.extend(o,jQuery.extend({},jQuery.ajaxSettings,o));var a=o.port;switch(o.mode){case"abort":return n[a]&&n[a].abort(),n[a]=i.apply(this,arguments);case"queue":var c=o.complete;o.complete=function(){c&&c.apply(this,arguments),jQuery([i]).dequeue("ajax"+a)},jQuery([i]).queue("ajax"+a,function(){i(o)});return;case"sync":var h=r.length;r[h]={error:o.error,success:o.success,complete:o.complete,done:!1},t[h]={error:[],success:[],complete:[]},o.error=function(){t[h].error=arguments},o.success=function(){t[h].success=arguments},o.complete=function(){if(t[h].complete=arguments,r[h].done=!0,h==0||!r[h-1])for(var f=h;f<r.length&&r[f].done;f++)r[f].error&&r[f].error.apply(jQuery,t[f].error),r[f].success&&r[f].success.apply(jQuery,t[f].success),r[f].complete&&r[f].complete.apply(jQuery,t[f].complete),r[f]=null,t[f]=null}}return i.apply(this,arguments)}})(jQuery);(function(e){e.fn.extend({autocomplete:function(i,n){var r=typeof i=="string";return n=e.extend({},e.Autocompleter.defaults,{url:r?i:null,data:r?null:i,delay:r?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(t){return t},n.formatMatch=n.formatMatch||n.formatItem,this.each(function(){new e.Autocompleter(this,n)})},result:function(i){return this.bind("result",i)},search:function(i){return this.trigger("search",[i])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(i){return this.trigger("setOptions",[i])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(i,n){var r={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},t=e(i).attr("autocomplete","off").addClass(n.inputClass),s=null,o="",a=e.Autocompleter.Cache(n),c=0,h=null,f={},m=e.Autocompleter.Select(n,i,v,f),y=!1;navigator.userAgent.match(/opera/i)&&e(i.form).bind("submit.autocomplete",function(){if(y)return y=!1,!1}),t.bind((navigator.userAgent.match(/opera/i)?"keypress":"keydown")+".autocomplete",function(x){switch(c=1,h=x.keyCode,x.keyCode){case r.UP:x.preventDefault(),m.visible()?m.prev():b(null,!0);break;case r.DOWN:x.preventDefault(),m.visible()?m.next():b(null,!0);break;case r.PAGEUP:x.preventDefault(),m.visible()?m.pageUp():b(null,!0);break;case r.PAGEDOWN:x.preventDefault(),m.visible()?m.pageDown():b(null,!0);break;case r.TAB:case r.RETURN:if(v())return x.preventDefault(),y=!0,!1;break;case r.ESC:m.hide();break;default:clearTimeout(s),s=setTimeout(b,n.delay),typeof n.keyPress=="function"&&n.keyPress(x.keyCode);break}}).focus(function(){c++}).blur(function(){c=0}).click(function(){c++>1&&!m.visible()&&b(null,!0)}).bind("search",function(){var x=arguments.length>1?arguments[1]:null;function S(_,w){var k=null;if(w&&w.length){for(var C=0;C<w.length;C++)if(w[C].id==_.id){k=w[C];break}}typeof x=="function"?x(k):t.trigger("result",k)}e.each(d(t.val()),function(_,w){u(w,S)})}).bind("flushCache",function(){o="",a.flush()}).bind("reveal",function(){clearTimeout(s),g(),m.show()}).bind("close",function(){clearTimeout(s),g(),m.hide()}).bind("setOptions",function(){e.extend(n,arguments[1]),"data"in arguments[1]&&a.populate()}).bind("unautocomplete",function(){m.unbind(),t.unbind(),e(i.form).unbind(".autocomplete")});function v(){var x=m.getSelectedItem();if(!x)return!1;var S=t.val();return o=S,t.trigger("result",x),m.hide(),!0}function b(x,S){if(h==r.DEL){m.hide();return}var _=t.val();!S&&_==o||(o=_,p(),_.length>=n.minChars?(t.addClass(n.loadingClass),n.matchCase||(_=_.toLowerCase()),u(_,l)):(typeof n.valueTooShort=="function"&&n.valueTooShort(_),g(),m.hide()))}function d(x){return x?[e.trim(x)]:[""]}function p(){m.hide(),clearTimeout(s),g(),n.mustMatch&&t.search(function(x){x||(t.val(""),t.trigger("result",null))})}function l(x,S){c?(g(),S||(S=[]),m.display(S,x),m.show()):p()}function u(x,S,_){n.matchCase||(x=x.toLowerCase());var w=a.load(x);if(w)typeof n.beforeSend=="function"&&n.beforeSend(t,x),typeof n.afterSend=="function"&&n.afterSend(t,w),S(x,w);else{var k={timestamp:+new Date};e.each(n.extraParams,function(C,T){k[C]=typeof T=="function"?T():T}),e.ajax({mode:"abort",port:"autocomplete"+i.name,dataType:n.dataType,url:n.url,data:e.extend({q:x,limit:n.max},k),beforeSend:function(C,T){typeof n.beforeSend=="function"&&n.beforeSend(t,x)},error:function(C,T,E){typeof n.error=="function"&&n.error(t,C,T,E)},success:function(C,T,E){C.result&&(typeof n.afterSend=="function"&&n.afterSend(t,C.data,T,E),a.add(x,C.data),S(x,C.data))}})}}function g(){t.removeClass(n.loadingClass)}},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",showAsDropDown:!0,minChars:1,delay:400,matchCase:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(i){return i[0]},formatMatch:null,width:0,highlight:function(i,n){return i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+n.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(i){var n={},r=0;function t(a,c){r>i.cacheLength&&o(),n[a]||r++,n[a]=c}function s(){if(!i.data)return!1;var a={},c=0;i.url||(i.cacheLength=1),a[""]=[];for(var h=0,f=i.data.length;h<f;h++){var m=i.data[h];m=typeof m=="string"?[m]:m;var y=i.formatMatch(m,h+1,i.data.length);if(y!==!1){var v=y.charAt(0).toLowerCase();a[v]||(a[v]=[]);var b={value:y,data:m,result:i.formatResult&&i.formatResult(m)||y};a[v].push(b),c++<i.max&&a[""].push(b)}}e.each(a,function(d,p){i.cacheLength++,t(d,p)})}setTimeout(s,25);function o(){n={},r=0}return{flush:o,add:t,populate:s,load:function(a){return!i.cacheLength||!r?null:n[a]?n[a]:null}}},e.Autocompleter.Select=function(i,n,r,t){var s={ACTIVE:"ac_over"},o=null,a=-1,c=null,h="",f=!0,m=null,y=null;function v(){if(f){if(i.showAsDropDown){m=e("<div/>").hide().addClass(i.resultsClass).css("position","absolute").appendTo(document.body),y=e("<ul/>").appendTo(m);var u="li";y.on("mouseover",u,function(g){a=e(u).removeClass(s.ACTIVE).index(e(this)),e(this).addClass(s.ACTIVE)}).on("click",u,function(g){return e(u).not(this).removeClass(s.ACTIVE),e(this).addClass(s.ACTIVE),setTimeout(function(){r(),n.focus()},50),!1}),i.width>0&&m.css("width",i.width)}typeof i.postInitCallback=="function"&&i.postInitCallback(m),f=!1}}function b(u){o.slice(a,a+1).removeClass(s.ACTIVE),d(u);var g=o.slice(a,a+1).addClass(s.ACTIVE);if(i.scroll){var x=0;o.slice(0,a).each(function(){x+=this.offsetHeight}),x+g[0].offsetHeight-y.scrollTop()>y[0].clientHeight?y.scrollTop(x+g[0].offsetHeight-y.innerHeight()):x<y.scrollTop()&&y.scrollTop(x)}}function d(u){a+=u,a<0?a=o.length-1:a>=o.length&&(a=0)}function p(u){return i.max&&i.max<u?i.max:u}function l(){if(y&&y.empty(),c.length){for(var u=p(c.length),g=0;g<u;g++)if(c[g]){var x=i.formatItem(c[g],g+1,u,h);if(x!==!1){var S=e("<li/>").html(i.highlight(x,h)).addClass(g%2===0?"ac_even":"ac_odd").appendTo(y)[0];e.data(S,"ac_data",c[g])}}o=y.find("li"),i.selectFirst&&(o.slice(0,1).addClass(s.ACTIVE),a=0)}else if(i.handleNoResults){var _="No matches";typeof i.formatNoResultsMessage=="function"&&(_=i.formatNoResultsMessage(h)),e("<li class='ac_even ac_error'>"+_+"</li>").appendTo(y)}e.fn.bgiframe&&y.bgiframe()}return{display:function(u,g){v(),c=u,h=g,l()},next:function(){b(1)},prev:function(){b(-1)},pageUp:function(){a!==0&&a-8<0?b(-a):b(-8)},pageDown:function(){a!=o.length-1&&a+8>o.length?b(o.length-1-a):b(8)},hide:function(){m&&m.hide(),a=-1},visible:function(){return m&&m.is(":visible")},current:function(){return this.visible()&&(o.filter("."+s.ACTIVE)[0]||i.selectFirst&&o[0])},show:function(){if(i.showAsDropDown){var u=e(n).offset();if(m.css({width:typeof i.width=="string"||i.width>0?i.width:e(n).width(),top:u.top+n.offsetHeight,left:u.left}).show(),i.scroll&&(y.scrollTop(0),y.css({maxHeight:i.scrollHeight,overflow:"auto"}),navigator.userAgent.match(/msie/i)&&typeof document.body.style.maxHeight>"u")){var g=0;o.each(function(){g+=this.offsetHeight});var x=g>i.scrollHeight;y.css("height",x?i.scrollHeight:g),x||o.width(y.width()-parseInt(o.css("padding-left"),10)-parseInt(o.css("padding-right"),10))}}},getSelectedItem:function(){var u=null;o&&(u=o.filter("."+s.ACTIVE),o.removeClass(s.ACTIVE));var g=null;return u&&u.length&&(g=e.data(u[0],"ac_data")),g},emptyList:function(){y&&y.empty()},unbind:function(){m&&m.remove()}}},e.fn.selection=function(i,n){if(i!==void 0)return this.each(function(){if(this.createTextRange){var h=this.createTextRange();n===void 0||i==n?(h.move("character",i),h.select()):(h.collapse(!0),h.moveStart("character",i),h.moveEnd("character",n),h.select())}else this.setSelectionRange?this.setSelectionRange(i,n):this.selectionStart&&(this.selectionStart=i,this.selectionEnd=n)});var r=this[0];if(r.createTextRange){var t=document.selection.createRange(),s=r.value,o="<->",a=t.text.length;t.text=o;var c=r.value.indexOf(o);return r.value=s,this.selection(c,c+a),{start:c,end:c+a}}else if(r.selectionStart!==void 0)return{start:r.selectionStart,end:r.selectionEnd}}})(jQuery);(function(e){e.fn.autogrow=function(i){return this.filter("textarea").each(function(){var n=e(this),r=n.height();n.css("lineHeight");var t=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:e(this).width()-parseInt(n.css("paddingLeft"))-parseInt(n.css("paddingRight")),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),lineHeight:n.css("lineHeight"),resize:"none"}).appendTo(document.body),s=function(){var o=function(c,h){for(var f=0,m="";f<h;f++)m+=c;return m},a=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(c){return o("&nbsp;",c.length-1)+" "});t.html(a),e(this).css("height",Math.max(t.height()+20,r))};e(this).change(s).keyup(s).keydown(s),s.apply(this)}),this}})(jQuery);/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */(function(e,i){"$:nomunge";var n=e.jQuery||e.Cowboy||(e.Cowboy={}),r;n.throttle=r=function(t,s,o,a){var c,h=0;typeof s!="boolean"&&(a=o,o=s,s=i);function f(){var m=this,y=+new Date-h,v=arguments;function b(){h=+new Date,o.apply(m,v)}function d(){c=i}a&&!c&&b(),c&&clearTimeout(c),a===i&&y>t?b():s!==!0&&(c=setTimeout(a?d:b,a===i?t-y:t))}return n.guid&&(f.guid=o.guid=o.guid||n.guid++),f},n.debounce=function(t,s,o){return o===i?r(t,s,!1):r(t,o,s!==!1)}})(window);(function(e){var i=Array.prototype.slice;function n(){}function r(t){if(!t)return;function s(c){c.prototype.option||(c.prototype.option=function(h){t.isPlainObject(h)&&(this.options=t.extend(!0,this.options,h))})}var o=typeof console>"u"?n:function(c){console.error(c)};function a(c,h){t.fn[c]=function(f){if(typeof f=="string"){for(var m=i.call(arguments,1),y=0,v=this.length;y<v;y++){var b=this[y],d=t.data(b,c);if(!d){o("cannot call methods on "+c+" prior to initialization; attempted to call '"+f+"'");continue}if(!t.isFunction(d[f])||f.charAt(0)==="_"){o("no such method '"+f+"' for "+c+" instance");continue}var p=d[f].apply(d,m);if(p!==void 0)return p}return this}else return this.each(function(){var l=t.data(this,c);l?(l.option(f),l._init()):(l=new h(this,f),t.data(this,c,l))})}}return t.bridget=function(c,h){s(h),a(c,h)},t.bridget}typeof define=="function"&&define.amd?define(["jquery"],r):r(e.jQuery)})(window);(function(e){e.fx.step.clip=function(i){if(i.state==0){var n=/rect\(([0-9]{1,})(px|em)[,\s]+([0-9]{1,})(px|em)[,\s]+([0-9]{1,})(px|em)[,\s]+([0-9]{1,})(px|em)\)/;$elem=$(i.elem);var r=n.test(i.elem.style.clip)?i.elem.style.clip:"rect(0px "+$elem.width()+"px "+$elem.height()+"px 0px)";i.start=n.exec(r.replace(/,/g," "));try{i.end=n.exec(i.end.replace(/,/g,""))}catch(m){return!1}}for(var t=new Array,s=new Array,o=i.start.length,a=i.end.length,c=i.start[h+1]=="em"?parseInt($(i.elem).css("fontSize"))*1.333*parseInt(i.start[h]):1,h=1;h<o;h+=2)t.push(parseInt(c*i.start[h]));for(var f=1;f<a;f+=2)s.push(parseInt(c*i.end[f]));i.elem.style.clip="rect("+parseInt(i.pos*(s[0]-t[0])+t[0])+"px "+parseInt(i.pos*(s[1]-t[1])+t[1])+"px "+parseInt(i.pos*(s[2]-t[2])+t[2])+"px "+parseInt(i.pos*(s[3]-t[3])+t[3])+"px)"}})(jQuery);/*!
 * jQuery Color Animations v@VERSION
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: @DATE
 */(function(e,i){var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1],d[2],d[3],d[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1]*2.55,d[2]*2.55,d[3]*2.55,d[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(d){return[d[1],d[2]/100,d[3]/100,d[4]]}}],s=e.Color=function(d,p,l,u){return new e.Color.fn.parse(d,p,l,u)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=s.support={},h=e("<p>")[0],f,m=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=h.style.backgroundColor.indexOf("rgba")>-1,m(o,function(d,p){p.cache="_"+d,p.props.alpha={idx:3,type:"percent",def:1}});function y(d,p,l){var u=a[p.type]||{};return d==null?l||!p.def?null:p.def:(d=u.floor?~~d:parseFloat(d),isNaN(d)?p.def:u.mod?(d+u.mod)%u.mod:0>d?0:u.max<d?u.max:d)}function v(d){var p=s(),l=p._rgba=[];return d=d.toLowerCase(),m(t,function(u,g){var x,S=g.re.exec(d),_=S&&g.parse(S),w=g.space||"rgba";if(_)return x=p[w](_),p[o[w].cache]=x[o[w].cache],l=p._rgba=x._rgba,!1}),l.length?(l.join()==="0,0,0,0"&&e.extend(l,f.transparent),p):f[d]}s.fn=e.extend(s.prototype,{parse:function(d,p,l,u){if(d===i)return this._rgba=[null,null,null,null],this;(d.jquery||d.nodeType)&&(d=e(d).css(p),p=i);var g=this,x=e.type(d),S=this._rgba=[];if(p!==i&&(d=[d,p,l,u],x="array"),x==="string")return this.parse(v(d)||f._default);if(x==="array")return m(o.rgba.props,function(_,w){S[w.idx]=y(d[w.idx],w)}),this;if(x==="object")return d instanceof s?m(o,function(_,w){d[w.cache]&&(g[w.cache]=d[w.cache].slice())}):m(o,function(_,w){var k=w.cache;m(w.props,function(C,T){if(!g[k]&&w.to){if(C==="alpha"||d[C]==null)return;g[k]=w.to(g._rgba)}g[k][T.idx]=y(d[C],T,!0)}),g[k]&&e.inArray(null,g[k].slice(0,3))<0&&(g[k][3]=1,w.from&&(g._rgba=w.from(g[k])))}),this},is:function(d){var p=s(d),l=!0,u=this;return m(o,function(g,x){var S,_=p[x.cache];return _&&(S=u[x.cache]||x.to&&x.to(u._rgba)||[],m(x.props,function(w,k){if(_[k.idx]!=null)return l=_[k.idx]===S[k.idx],l})),l}),l},_space:function(){var d=[],p=this;return m(o,function(l,u){p[u.cache]&&d.push(l)}),d.pop()},transition:function(d,p){var l=s(d),u=l._space(),g=o[u],x=this.alpha()===0?s("transparent"):this,S=x[g.cache]||g.to(x._rgba),_=S.slice();return l=l[g.cache],m(g.props,function(w,k){var C=k.idx,T=S[C],E=l[C],A=a[k.type]||{};E!==null&&(T===null?_[C]=E:(A.mod&&(E-T>A.mod/2?T+=A.mod:T-E>A.mod/2&&(T-=A.mod)),_[C]=y((E-T)*p+T,k)))}),this[u](_)},blend:function(d){if(this._rgba[3]===1)return this;var p=this._rgba.slice(),l=p.pop(),u=s(d)._rgba;return s(e.map(p,function(g,x){return(1-l)*u[x]+l*g}))},toRgbaString:function(){var d="rgba(",p=e.map(this._rgba,function(l,u){return l==null?u>2?1:0:l});return p[3]===1&&(p.pop(),d="rgb("),d+p.join()+")"},toHslaString:function(){var d="hsla(",p=e.map(this.hsla(),function(l,u){return l==null&&(l=u>2?1:0),u&&u<3&&(l=Math.round(l*100)+"%"),l});return p[3]===1&&(p.pop(),d="hsl("),d+p.join()+")"},toHexString:function(d){var p=this._rgba.slice(),l=p.pop();return d&&p.push(~~(l*255)),"#"+e.map(p,function(u,g){return u=(u||0).toString(16),u.length===1?"0"+u:u}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn;function b(d,p,l){return l=(l+1)%1,l*6<1?d+(p-d)*l*6:l*2<1?p:l*3<2?d+(p-d)*(2/3-l)*6:d}o.hsla.to=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var p=d[0]/255,l=d[1]/255,u=d[2]/255,g=d[3],x=Math.max(p,l,u),S=Math.min(p,l,u),_=x-S,w=x+S,k=w*.5,C,T;return S===x?C=0:p===x?C=60*(l-u)/_+360:l===x?C=60*(u-p)/_+120:C=60*(p-l)/_+240,k===0||k===1?T=k:k<=.5?T=_/w:T=_/(2-w),[Math.round(C)%360,T,k,g==null?1:g]},o.hsla.from=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var p=d[0]/360,l=d[1],u=d[2],g=d[3],x=u<=.5?u*(1+l):u+l-u*l,S=2*u-x;return[Math.round(b(S,x,p+1/3)*255),Math.round(b(S,x,p)*255),Math.round(b(S,x,p-1/3)*255),g]},m(o,function(d,p){var l=p.props,u=p.cache,g=p.to,x=p.from;s.fn[d]=function(S){if(g&&!this[u]&&(this[u]=g(this._rgba)),S===i)return this[u].slice();var _,w=e.type(S),k=w==="array"||w==="object"?S:arguments,C=this[u].slice();return m(l,function(T,E){var A=k[w==="object"?T:E.idx];A==null&&(A=C[E.idx]),C[E.idx]=y(A,E)}),x?(_=s(x(C)),_[u]=C,_):s(C)},m(l,function(S,_){s.fn[S]||(s.fn[S]=function(w){var k=e.type(w),C=S==="alpha"?this._hsla?"hsla":"rgba":d,T=this[C](),E=T[_.idx],A;return k==="undefined"?E:(k==="function"&&(w=w.call(this,E),k=e.type(w)),w==null&&_.empty?this:(k==="string"&&(A=r.exec(w),A&&(w=E+parseFloat(A[2])*(A[1]==="+"?1:-1))),T[_.idx]=w,this[C](T)))})})}),s.hook=function(d){var p=d.split(" ");m(p,function(l,u){e.cssHooks[u]={set:function(g,x){var S,_,w="";if(e.type(x)!=="string"||(S=v(x))){if(x=s(S||x),!c.rgba&&x._rgba[3]!==1){for(_=u==="backgroundColor"?g.parentNode:g;(w===""||w==="transparent")&&_&&_.style;)try{w=e.css(_,"backgroundColor"),_=_.parentNode}catch(k){}x=x.blend(w&&w!=="transparent"?w:"_default")}x=x.toRgbaString()}try{g.style[u]=x}catch(k){}}},e.fx.step[u]=function(g){g.colorInit||(g.start=s(g.elem,u),g.end=s(g.end),g.colorInit=!0),e.cssHooks[u].set(g.elem,g.start.transition(g.end,g.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(d){var p={};return m(["Top","Right","Bottom","Left"],function(l,u){p["border"+u+"Color"]=d}),p}},f=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(e,i,n){var r={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},t="colorbox",s="cbox",o=s+"Element",a=s+"_open",c=s+"_load",h=s+"_complete",f=s+"_cleanup",m=s+"_closed",y=s+"_purge",v=s+"_IE6",b,d,p,l,u,g,x,S,_,w,k,C,T,E,A,D,O,L,M,P,I,H,j,U,q,X,J,te,Ae,it,bt,Ai,Z,ee="div",Ut,Yt;function Q(F,z,V){var se=i.createElement(F);return z&&(se.id=s+z),V&&(se.style.cssText=V),e(se)}function wt(F){var z=_.length,V=(J+F)%z;return V<0?z+V:V}function de(F,z){return Math.round((/%/.test(F)?(z==="x"?w.width():w.height())/100:1)*parseInt(F,10))}function Di(F){return I.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(F)}function Pi(){var F,z=e.data(X,t);z==null?(I=e.extend({},r),console&&console.log&&console.log("Error: cboxElement missing settings object")):I=e.extend({},z);for(F in I)e.isFunction(I[F])&&F.slice(0,2)!=="on"&&(I[F]=I[F].call(X));I.rel=I.rel||X.rel||e(X).data("rel")||"nofollow",I.href=I.href||e(X).attr("href"),I.title=I.title||X.title,typeof I.href=="string"&&(I.href=e.trim(I.href))}function je(F,z){e(i).trigger(F),e("*",d).trigger(F),z&&z.call(X)}function rs(){var F,z=s+"Slideshow_",V="click."+s,se,ge;I.slideshow&&_[1]?(se=function(){D.html(I.slideshowStop).unbind(V).bind(h,function(){(I.loop||_[J+1])&&(F=setTimeout(Z.next,I.slideshowSpeed))}).bind(c,function(){clearTimeout(F)}).one(V+" "+f,ge),d.removeClass(z+"off").addClass(z+"on"),F=setTimeout(Z.next,I.slideshowSpeed)},ge=function(){clearTimeout(F),D.html(I.slideshowStart).unbind([h,c,f,V].join(" ")).one(V,function(){Z.next(),se()}),d.removeClass(z+"on").addClass(z+"off")},I.slideshowAuto?se():ge()):d.removeClass(z+"off "+z+"on")}function Oi(F){bt||(X=F,Pi(),_=e(X),J=0,I.rel!=="nofollow"&&(_=e("."+o).filter(function(){var z=e.data(this,t),V;return z&&(V=e(this).data("rel")||z.rel||this.rel),V===I.rel}),J=_.index(X),J===-1&&(_=_.add(X),J=_.length-1)),Ae||(Ae=it=!0,d.css({visibility:"hidden",display:"block"}),k=Q(ee,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(l),H=u.height()+S.height()+l.outerHeight(!0)-l.height(),j=g.width()+x.width()+l.outerWidth(!0)-l.width(),U=k.outerHeight(!0),q=k.outerWidth(!0),I.returnFocus&&(e(X).blur(),e(i).one(m,function(){e(X).focus()})),b.css({opacity:parseFloat(I.opacity),cursor:I.overlayClose?"pointer":"auto",visibility:"visible"}).show(),I.w=de(I.initialWidth,"x"),I.h=de(I.initialHeight,"y"),Z.position(),je(a,I.onOpen),P.add(E).hide(),M.html(I.close).show()),Z.load(!0))}function Mi(){!d&&i.body&&(Yt=!1,w=e(n),d=Q(ee).attr({id:t,class:""}).hide(),b=Q(ee,"Overlay","").hide(),T=Q(ee,"LoadingOverlay").add(Q(ee,"LoadingGraphic")),p=Q(ee,"Wrapper"),l=Q(ee,"Content").append(E=Q(ee,"Title"),A=Q(ee,"Current"),O=Q(ee,"Next"),L=Q(ee,"Previous"),D=Q(ee,"Slideshow").bind(a,rs),M=Q(ee,"Close")),p.append(Q(ee).append(Q(ee,"TopLeft"),u=Q(ee,"TopCenter"),Q(ee,"TopRight")),Q(ee,!1,"clear:left").append(g=Q(ee,"MiddleLeft"),l,x=Q(ee,"MiddleRight")),Q(ee,!1,"clear:left").append(Q(ee,"BottomLeft"),S=Q(ee,"BottomCenter"),Q(ee,"BottomRight"))).find("div div").css({float:"left"}),C=Q(ee,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),P=O.add(L).add(A).add(D),e(i.body).append(b,d.append(p,C)))}function os(){function F(z){z.which>1||z.shiftKey||z.altKey||z.metaKey||(z.preventDefault(),Oi(this))}return d?(Yt||(Yt=!0,O.click(function(){Z.next()}),L.click(function(){Z.prev()}),M.click(function(){Z.close()}),b.click(function(){I.overlayClose&&Z.close()}),e(i).bind("keydown."+s,function(z){var V=z.keyCode;Ae&&I.escKey&&V===27&&(z.preventDefault(),Z.close()),Ae&&I.arrowKey&&_[1]&&(V===37?(z.preventDefault(),L.click()):V===39&&(z.preventDefault(),O.click()))}),e.isFunction(e.fn.on)?e(i).on("click."+s,"."+o,F):e("."+o).live("click."+s,F)),!0):!1}e.colorbox||(e(Mi),Z=e.fn[t]=e[t]=function(F,z){var V=this;if(F=F||{},Mi(),os()){if(e.isFunction(V))V=e("<a/>"),F.open=!0;else if(!V[0])return V;z&&(F.onComplete=z),V.each(function(){e.data(this,t,e.extend({},e.data(this,t)||r,F))}).addClass(o),(e.isFunction(F.open)&&F.open.call(V)||F.open)&&Oi(V[0])}return V},Z.position=function(F,z){var V,se=0,ge=0,ve=d.offset(),he,$e;w.unbind("resize."+s),d.css({top:-9e4,left:-9e4}),he=w.scrollTop(),$e=w.scrollLeft(),I.fixed?(ve.top-=he,ve.left-=$e,d.css({position:"fixed"})):(se=he,ge=$e,d.css({position:"absolute"})),I.right!==!1?ge+=Math.max(w.width()-I.w-q-j-de(I.right,"x"),0):I.left!==!1?ge+=de(I.left,"x"):ge+=Math.round(Math.max(w.width()-I.w-q-j,0)/2),I.bottom!==!1?se+=Math.max(w.height()-I.h-U-H-de(I.bottom,"y"),0):I.top!==!1?se+=de(I.top,"y"):se+=Math.round(Math.max(w.height()-I.h-U-H,0)/2),d.css({top:ve.top,left:ve.left,visibility:"visible"}),F=d.width()===I.w+q&&d.height()===I.h+U?0:F||0,p[0].style.width=p[0].style.height="9999px";function nt(Ue){u[0].style.width=S[0].style.width=l[0].style.width=parseInt(Ue.style.width,10)-j+"px",l[0].style.height=g[0].style.height=x[0].style.height=parseInt(Ue.style.height,10)-H+"px"}V={width:I.w+q+j,height:I.h+U+H,top:se,left:ge},F===0&&d.css(V),d.dequeue().animate(V,{duration:F,complete:function(){nt(this),it=!1,p[0].style.width=I.w+q+j+"px",p[0].style.height=I.h+U+H+"px",I.reposition&&setTimeout(function(){w.bind("resize."+s,Z.position)},1),z&&z()},step:function(){nt(this)}})},Z.resize=function(F,z){Ae&&(F=F||{},F.width&&(I.w=de(F.width,"x")-q-j),F.innerWidth&&(I.w=de(F.innerWidth,"x")),k.css({width:I.w}),F.height&&(I.h=de(F.height,"y")-U-H),F.innerHeight&&(I.h=de(F.innerHeight,"y")),!F.innerHeight&&!F.height&&(k.css({height:"auto"}),I.h=k.height()),k.css({height:I.h}),Z.position(I.transition==="none"?0:I.speed,z))},Z.prep=function(F){if(!Ae)return;var z,V=I.transition==="none"?0:I.speed;k.empty().remove(),k=Q(ee,"LoadedContent").append(F);function se(){return I.w=I.w||k.width(),I.w=I.mw&&I.mw<I.w?I.mw:I.w,I.w}function ge(){return I.h=I.h||k.height(),I.h=I.mh&&I.mh<I.h?I.mh:I.h,I.h}k.hide().appendTo(C.show()).css({width:se(),overflow:I.scrolling?"auto":"hidden"}).css({height:ge()}).prependTo(l),C.hide(),e(te).css({float:"none"}),z=function(){var ve=_.length,he,$e="frameBorder",nt="allowTransparency",Ue;if(!Ae)return;function as(){}Ue=function(){clearTimeout(Ai),T.remove(),je(h,I.onComplete)},E.html(I.title).add(k).show(),ve>1?(typeof I.current=="string"&&A.html(I.current.replace("{current}",J+1).replace("{total}",ve)).show(),O[I.loop||J<ve-1?"show":"hide"]().html(I.next),L[I.loop||J?"show":"hide"]().html(I.previous),I.slideshow&&D.show(),I.preloading&&e.each([wt(-1),wt(1)],function(){var Ne,Li,Vt=_[this],Xt=e.data(Vt,t);Xt&&Xt.href?(Ne=Xt.href,e.isFunction(Ne)&&(Ne=Ne.call(Vt))):Ne=Vt.href,Di(Ne)&&(Li=new Image,Li.src=Ne)})):P.hide(),I.iframe?(he=Q("iframe")[0],$e in he&&(he[$e]=0),nt in he&&(he[nt]="true"),I.scrolling||(he.scrolling="no"),e(he).attr({src:I.href,name:new Date().getTime(),class:s+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",Ue).appendTo(k),e(i).one(y,function(){he.src="//about:blank"}),I.fastIframe&&e(he).trigger("load")):Ue(),I.transition==="fade"&&d.fadeTo(V,1,as)},I.transition==="fade"?d.fadeTo(V,0,function(){Z.position(0,z)}):Z.position(V,z)},Z.load=function(F){var z,V,se=Z.prep,ge;it=!0,te=!1,X=_[J],F||Pi(),Ut&&d.add(b).removeClass(Ut),I.className&&d.add(b).addClass(I.className),Ut=I.className,je(y),je(c,I.onLoad),I.h=I.height?de(I.height,"y")-U-H:I.innerHeight&&de(I.innerHeight,"y"),I.w=I.width?de(I.width,"x")-q-j:I.innerWidth&&de(I.innerWidth,"x"),I.mw=I.w,I.mh=I.h,I.maxWidth&&(I.mw=de(I.maxWidth,"x")-q-j,I.mw=I.w&&I.w<I.mw?I.w:I.mw),I.maxHeight&&(I.mh=de(I.maxHeight,"y")-U-H,I.mh=I.h&&I.h<I.mh?I.h:I.mh),z=I.href,Ai=setTimeout(function(){T.appendTo(l)},100),I.inline?(ge=Q(ee).hide().insertBefore(e(z)[0]),e(i).one(y,function(){ge.replaceWith(k.children())}),se(e(z))):I.iframe?se(" "):I.html?se(I.html):Di(z)?(e(te=new Image).addClass(s+"Photo").bind("error",function(){I.title=!1,se(Q(ee,"Error").html(I.imgError))}).one("load",function(){var ve;I.scalePhotos&&(V=function(){te.height-=te.height*ve,te.width-=te.width*ve},I.mw&&te.width>I.mw&&(ve=(te.width-I.mw)/te.width,V()),I.mh&&te.height>I.mh&&(ve=(te.height-I.mh)/te.height,V())),I.h&&(te.style.marginTop=Math.max(I.h-te.height,0)/2+"px"),_[1]&&(I.loop||_[J+1])&&(te.style.cursor="pointer",te.onclick=function(){Z.next()}),setTimeout(function(){se(te)},1)}),setTimeout(function(){te.src=z},1)):z&&C.load(z,I.data,function(ve,he){se(he==="error"?Q(ee,"Error").html(I.xhrError):e(this).contents())})},Z.next=function(){!it&&_[1]&&(I.loop||_[J+1])&&(J=wt(1),Z.load())},Z.prev=function(){!it&&_[1]&&(I.loop||J)&&(J=wt(-1),Z.load())},Z.close=function(){Ae&&!bt&&(bt=!0,Ae=!1,je(f,I.onCleanup),w.unbind("."+s+" ."+v),b.fadeTo(200,0),d.stop().fadeTo(300,0,function(){d.add(b).css({opacity:1,cursor:"auto"}).hide(),je(y),k.empty().remove(),setTimeout(function(){bt=!1,je(m,I.onClosed)},1)}))},Z.remove=function(){e([]).add(d).add(b).remove(),d=null,e("."+o).removeData(t).removeClass(o),e(i).unbind("click."+s)},Z.element=function(){return e(X)},Z.settings=r)})(jQuery,document,window);(function(e){e.fn.condense=function(o){var a=e.extend({},e.fn.condense.defaults,o);return this.each(function(){var c=e(this),h=e.metadata?e.extend({},a,c.metadata()):a,f=i(c,h);if(f){c.attr("id")&&c.attr("id","condensed_"+c.attr("id")),c.addClass("condenseable");var m=f,y=c;a.inline&&(m=m.children().last(),y=y.children().last());var v=" <span class='condense_control condense_control_more' style='cursor:pointer;'>"+h.moreText+"</span>",b=" <span class='condense_control condense_control_less' style='cursor:pointer;'>"+h.lessText+"</span>";m.append(h.ellipsis+v),c.after(f).hide(),y.append(b),e(".condense_control_more",f).click(function(){s(e(this),h)}),e(".condense_control_less",c).click(function(){t(e(this),h)})}})};function i(o,a){if(e.trim(o.text()).length<=a.condensedLength+a.minTrail)return!1;var c=e.trim(o.html()),h=e.trim(o.text()),f=o.clone(),m=0;do{var y=n(c,a.delim,a.condensedLength+m),v=e.trim(c.substring(0,y+1));f.html(v),f.addClass("condensed");var b=f.text().length;f.html().length,m=f.html().length-b}while(m&&f.text().length<a.condensedLength);return h.length-b<a.minTrail?!1:f}function n(o,a,c){var h=!1,f=c;do{if(f=o.indexOf(a,f),f<0)return o.length;for(h=!0;r(o,f);)f++,h=!1}while(!h);return f}function r(o,a){return o.indexOf(">",a)<o.indexOf("<",a)}function t(o,a){var c=o.closest(".condenseable"),h=c.next();h.show();var f=h.width(),m=h.height();h.hide();var y=c.width(),v=c.height();c.animate({height:m,width:f,opacity:1},a.lessSpeed,a.easing,function(){c.height(v).width(y).hide(),h.show()})}function s(o,a){var c=o.closest(".condensed"),h=c.prev();a.expandedWidth&&h.width(a.expandedWidth),h.show();var f=h.width(),m=h.height();if(h.width(c.width()+"px").height(c.height()+"px"),c.hide(),h.animate({height:m,width:f,opacity:1},a.moreSpeed,a.easing),c.attr("id")){var y=c.attr("id");c.attr("id","condensed_"+y),h.attr("id",y)}}e.fn.condense.defaults={condensedLength:200,minTrail:20,delim:" ",moreText:"[more]",lessText:"[less]",ellipsis:" ( ... )",inline:!0,moreSpeed:"normal",lessSpeed:"normal",easing:"linear"}})(jQuery);jQuery.cookie=function(e,i,n){if(typeof i<"u"){n=n||{},i===null&&(i="",n.expires=-1);var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var t;typeof n.expires=="number"?(t=new Date,t.setTime(t.getTime()+n.expires*24*60*60*1e3)):t=n.expires,r="; expires="+t.toUTCString()}var s=n.path?"; path="+n.path:"",o=n.domain?"; domain="+n.domain:"",a=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(i),r,s,o,a].join("")}else{var c=null;if(document.cookie&&document.cookie!="")for(var h=document.cookie.split(";"),f=0;f<h.length;f++){var m=jQuery.trim(h[f]);if(m.substring(0,e.length+1)==e+"="){c=decodeURIComponent(m.substring(e.length+1));break}}return c}};(function(e){var i=function(){var n={years:"datepickerViewYears",moths:"datepickerViewMonths",days:"datepickerViewDays"},r={wrapper:'<div class="datepicker"><div class="datepickerBorderT" ></div><div class="datepickerBorderB" ></div><div class="datepickerBorderL" ></div><div class="datepickerBorderR" ></div><div class="datepickerBorderTL" ></div><div class="datepickerBorderTR" ></div><div class="datepickerBorderBL" ></div><div class="datepickerBorderBR" ></div><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>',head:["<td>",'<table cellspacing="0" cellpadding="0">',"<thead>",'<tr class="datepickerHeader">','<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="5" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>","<th><span><%=day5%></span></th>","<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">',"<tr>",'<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>','<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>','<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>','<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>','<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>','<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>','<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>','<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>',"</tr>","</tbody>"],months:['<tbody class="<%=className%>">',"<tr>",'<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>',"</tr>","</tbody>"]},t={flat:!1,insertionTarget:null,starts:1,prev:"&larr;",next:"&rarr;",lastSel:!1,mode:"single",view:"days",calendars:1,format:"Y-m-d",position:"bottom",eventName:"click",onRender:function(){return{}},onChange:function(){return!0},onShow:function(){return!0},onBeforeShow:function(){return!0},onHide:function(){return!0},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:"wk"}},s=function(w){var k=new Date(Date.parse(w)),C=28,T;for(T=k.getMonth(),C=28;k.getMonth()==T;)C++,k.setDate(C);return C-1},o=function(w,k){return i.getLocale(k?"months":"monthsShort")[w.getMonth()]},a=function(w,k){return i.getLocale(k?"days":"daysShort")[w.getDay()]},c=function(w){var k=new Date(w);k.setDate(k.getDate()-(k.getDay()+6)%7+3);var C=k.valueOf();return k.setMonth(0),k.setDate(4),Math.round((C-k.valueOf())/6048e5)+1},h=function(w){var k=new Date(w.getFullYear(),w.getMonth(),w.getDate(),0,0,0),C=new Date(w.getFullYear(),0,0,0,0,0),T=k-C;return Math.floor(T/24*60*60*1e3)},f=function(w,k){w.setDate(w.getDate()+k)},m=function(w,k){var C=w.getDate();w.setDate(1),w.setMonth(w.getMonth()+k),w.setDate(Math.min(C,s(w)))},y=function(w,k){var C=w.getDate();w.setDate(1),w.setFullYear(w.getFullYear()+k),w.setDate(Math.min(C,s(w)))},v=function(w){var k=e(w).data("datepicker"),C=e(w),T=Math.floor(k.calendars/2),E,A,D,O,L=0,M,P,I,H,j;C.find("td>table tbody").remove();for(var U=0;U<k.calendars;U++){switch(E=new Date(k.current),m(E,-T+U),j=C.find("table").eq(U+1),j[0].className){case"datepickerViewDays":D=d(E,"B, Y");break;case"datepickerViewMonths":D=E.getFullYear();break;case"datepickerViewYears":D=E.getFullYear()-6+" - "+(E.getFullYear()+5);break}j.find("thead tr:first th:eq(1) span").text(D),D=E.getFullYear()-6,A={data:[],className:"datepickerYears"};for(var q=0;q<12;q++)A.data.push(D+q);H=st(r.months.join(""),A),E.setDate(1),A={weeks:[],test:10},O=E.getMonth();var D=(E.getDay()-k.starts)%7;for(f(E,-(D+(D<0?7:0))),M=-1,L=0;L<42;){P=parseInt(L/7,10),I=L%7,A.weeks[P]||(M=c(E),A.weeks[P]={week:M,days:[]}),A.weeks[P].days[I]={text:E.getDate(),classname:[]},O!=E.getMonth()&&A.weeks[P].days[I].classname.push("datepickerNotInMonth"),E.getDay()==0&&A.weeks[P].days[I].classname.push("datepickerSunday"),E.getDay()==6&&A.weeks[P].days[I].classname.push("datepickerSaturday");var X=k.onRender(E),J=E.valueOf();(X.selected||k.date==J||e.inArray(J,k.date)>-1||k.mode=="range"&&J>=k.date[0]&&J<=k.date[1])&&A.weeks[P].days[I].classname.push("datepickerSelected"),X.disabled&&A.weeks[P].days[I].classname.push("datepickerDisabled"),X.className&&A.weeks[P].days[I].classname.push(X.className),A.weeks[P].days[I].classname=A.weeks[P].days[I].classname.join(" "),L++,f(E,1)}H=st(r.days.join(""),A)+H,A={data:k.locale.monthsShort,className:"datepickerMonths"},H=st(r.months.join(""),A)+H,j.append(H)}},b=function(w,k){if(w.constructor==Date)return new Date(w);for(var C=w.split(/\W+/),T=k.split(/\W+/),E,A,D,O,L,M=new Date,P=0;P<C.length;P++)switch(T[P]){case"d":case"e":E=parseInt(C[P],10);break;case"b":for(var P,A=0;A<i.getLocale("monthsShort").length&&i.getLocale("monthsShort")[A]!=C[P];A++);break;case"B":for(var P,A=0;A<i.getLocale("months").length&&i.getLocale("months")[A]!=C[P];A++);break;case"m":A=parseInt(C[P],10)-1;break;case"Y":case"y":D=parseInt(C[P],10),D+=D>100?0:D<29?2e3:1900;break;case"H":case"I":case"k":case"l":O=parseInt(C[P],10);break;case"P":case"p":/pm/i.test(C[P])&&O<12?O+=12:/am/i.test(C[P])&&O>=12&&(O-=12);break;case"M":L=parseInt(C[P],10);break}return new Date(D===void 0?M.getFullYear():D,A===void 0?M.getMonth():A,E===void 0?M.getDate():E,O===void 0?M.getHours():O,L===void 0?M.getMinutes():L,0)},d=function(w,k){var C=w.getMonth(),T=w.getDate(),E=w.getFullYear();c(w);var A=w.getDay(),D=w.getHours(),O=D>=12,L=O?D-12:D,M=h(w);L==0&&(L=12);for(var P=w.getMinutes(),I=w.getSeconds(),H=k.split(""),j,U=0;U<H.length;U++){switch(j=H[U],H[U]){case"a":j=a(w);break;case"A":j=a(w,!0);break;case"b":j=o(w);break;case"B":j=o(w,!0);break;case"C":j=1+Math.floor(E/100);break;case"d":j=T<10?"0"+T:T;break;case"e":j=T;break;case"H":j=D<10?"0"+D:D;break;case"I":j=L<10?"0"+L:L;break;case"j":j=M<100?M<10?"00"+M:"0"+M:M;break;case"k":j=D;break;case"l":j=L;break;case"m":j=C<9?"0"+(1+C):1+C;break;case"M":j=P<10?"0"+P:P;break;case"p":case"P":j=O?"PM":"AM";break;case"s":j=Math.floor(w.getTime()/1e3);break;case"S":j=I<10?"0"+I:I;break;case"u":j=A+1;break;case"w":j=A;break;case"y":j=(""+E).substr(2,2);break;case"Y":j=E;break}H[U]=j}return H.join("")},p=function(w){var k=e(w).data("datepicker"),C=e("#"+k.id);if(!k.extraHeight){var T=e(w).find("div");k.extraHeight=T.get(0).offsetHeight+T.get(1).offsetHeight,k.extraWidth=T.get(2).offsetWidth+T.get(3).offsetWidth}var E=C.find("table:first").get(0),A=E.offsetWidth,D=E.offsetHeight;C.css({width:A+k.extraWidth+"px",height:D+k.extraHeight+"px"}).find("div.datepickerContainer").css({width:A+"px",height:D+"px"})},l=function(w){e(w.target).is("span")&&(w.target=w.target.parentNode);var k=e(w.target);if(k.is("a")){if(w.target.blur(),k.hasClass("datepickerDisabled"))return!1;var C=e(this).data("datepicker"),T=k.parent(),E=T.parent().parent().parent(),A=e("table",this).index(E.get(0))-1,D=new Date(C.current),O=!1,L=!1;if(T.is("th")){if(T.hasClass("datepickerWeek")&&C.mode=="range"&&!T.next().hasClass("datepickerDisabled")){var M=parseInt(T.next().text(),10);m(D,A-Math.floor(C.calendars/2)),T.next().hasClass("datepickerNotInMonth")&&m(D,M>15?-1:1),D.setDate(M),C.date[0]=D.setHours(0,0,0,0).valueOf(),D.setHours(23,59,59,0),f(D,6),C.date[1]=D.valueOf(),L=!0,O=!0,C.lastSel=!1}else if(T.hasClass("datepickerMonth"))switch(m(D,A-Math.floor(C.calendars/2)),E.get(0).className){case"datepickerViewDays":E.get(0).className="datepickerViewMonths",k.find("span").text(D.getFullYear());break;case"datepickerViewMonths":E.get(0).className="datepickerViewYears",k.find("span").text(D.getFullYear()-6+" - "+(D.getFullYear()+5));break;case"datepickerViewYears":E.get(0).className="datepickerViewDays",k.find("span").text(d(D,"B, Y"));break}else if(T.parent().parent().is("thead")){switch(E.get(0).className){case"datepickerViewDays":m(C.current,T.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewMonths":y(C.current,T.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewYears":y(C.current,T.hasClass("datepickerGoPrev")?-12:12);break}L=!0}}else if(T.is("td")&&!T.hasClass("datepickerDisabled")){switch(E.get(0).className){case"datepickerViewMonths":var P=E.find("tbody.datepickerMonths td").index(T);C.current.setMonth(P),C.current.setFullYear(parseInt(E.find("thead th.datepickerMonth span").text(),10)),m(C.current,Math.floor(C.calendars/2)-A),E.get(0).className="datepickerViewDays";for(var I=0;I<3&&C.current.getMonth()!=P;I++)f(C.current,-1);break;case"datepickerViewYears":C.current.setFullYear(parseInt(k.text(),10)),E.get(0).className="datepickerViewMonths";break;default:var M=parseInt(k.text(),10);switch(m(D,A-Math.floor(C.calendars/2)),T.hasClass("datepickerNotInMonth")&&m(D,M>15?-1:1),D.setDate(M),C.mode){case"multiple":M=D.setHours(0,0,0,0).valueOf(),e.inArray(M,C.date)>-1?e.each(C.date,function(j,U){if(U==M)return C.date.splice(j,1),!1}):C.date.push(M);break;case"range":C.lastSel||(C.date[0]=D.setHours(0,0,0,0).valueOf()),M=D.setHours(23,59,59,0).valueOf(),M<C.date[0]?(C.date[1]=C.date[0]+86399e3,C.date[0]=M-86399e3):C.date[1]=M,C.lastSel=!C.lastSel;break;default:C.date=D.valueOf();break}break}L=!0,O=!0}L&&v(this),O&&e(w.target).closest("tbody").attr("class")=="datepickerDays"&&C.onChange.apply(this,u(C))}return!1},u=function(w){var k;return w.mode=="single"?(k=new Date(w.date),[d(k,w.format),k,w.el]):(k=[[],[],w.el],e.each(w.date,function(C,T){var E=new Date(T);k[0].push(d(E,w.format)),k[1].push(E)}),k)},g=function(){var w=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(w?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(w?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(w?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(w?document.documentElement.clientHeight:document.body.clientHeight)}},x=function(w,k,C){if(w==k)return!0;if(w.contains)return w.contains(k);if(w.compareDocumentPosition)return!!(w.compareDocumentPosition(k)&16);for(var T=k.parentNode;T&&T!=C;){if(T==w)return!0;T=T.parentNode}return!1},S=function(w){var k=e("#"+e(this).data("datepickerId"));if(!k.is(":visible")){var C=k.get(0);v(C);var T=k.data("datepicker");T.onBeforeShow.apply(this,[k.get(0)]),e.css(C,"display"),k.css({visibility:"hidden",display:"block"});var E=e(C).offsetParent().offset(),A=e(this).offset(),D={top:A.top-E.top,left:A.left-E.left},O=g(),L=D.top,M=D.left;switch(p(C),T.position){case"top":L-=C.offsetHeight;break;case"left":M-=C.offsetWidth;break;case"right":M+=this.offsetWidth;break;case"bottom":L+=this.offsetHeight;break}T.insertionTarget==null&&(L+C.offsetHeight>O.t+O.h&&(L=D.top-C.offsetHeight),L<O.t&&(L=D.top+this.offsetHeight+C.offsetHeight),M+C.offsetWidth>O.l+O.w&&(M=D.left-C.offsetWidth),M<O.l&&(T.position=="bottom"?M=O.l:M=D.left+this.offsetWidth)),k.css({visibility:"visible",display:"block",top:L+"px",left:M+"px"}),T.onShow.apply(this,[k.get(0)])!=!1&&k.show(),e(document).bind("mousedown",{cal:k,trigger:this},_)}return!1},_=function(w){w.target!=w.data.trigger&&!x(w.data.cal.get(0),w.target,w.data.cal.get(0))&&(w.data.cal.data("datepicker").onHide.apply(this,[w.data.cal.get(0)])!=!1&&w.data.cal.hide(),e(document).unbind("mousedown",_))};return{setLocale:function(w){this.locale=w},getLocale:function(w){return this.locale[w]},init:function(w){return w=e.extend({},t,w||{}),i.setLocale(w.locale),w.calendars=Math.max(1,parseInt(w.calendars,10)||1),w.mode=/single|multiple|range/.test(w.mode)?w.mode:"single",this.each(function(){if(!e(this).data("datepicker")){if(w.el=this,w.date.constructor==String&&(w.date=b(w.date,w.format),w.date.setHours(0,0,0,0)),w.mode!="single")if(w.date.constructor!=Array)w.date=[w.date.valueOf()],w.mode=="range"&&w.date.push(new Date(w.date[0]).setHours(23,59,59,0).valueOf());else{for(var k=0;k<w.date.length;k++)w.date[k]=b(w.date[k],w.format).setHours(0,0,0,0).valueOf();w.mode=="range"&&(w.date[1]=new Date(w.date[1]).setHours(23,59,59,0).valueOf())}else w.date=w.date.valueOf();w.current?w.current=b(w.current,w.format):w.current=new Date,w.current.setDate(1),w.current.setHours(0,0,0,0);var C="datepicker_"+parseInt(Math.random()*1e3),T;w.id=C,e(this).data("datepickerId",w.id);var E=e(r.wrapper).attr("id",C).bind("click",l).data("datepicker",w);w.className&&E.addClass(w.className);for(var A="",k=0;k<w.calendars;k++)T=w.starts,k>0&&(A+=r.space),A+=st(r.head.join(""),{week:w.locale.weekMin,prev:w.prev,next:w.next,day1:w.locale.daysMin[T++%7],day2:w.locale.daysMin[T++%7],day3:w.locale.daysMin[T++%7],day4:w.locale.daysMin[T++%7],day5:w.locale.daysMin[T++%7],day6:w.locale.daysMin[T++%7],day7:w.locale.daysMin[T++%7]});E.find("tr:first").append(A).find("table").addClass(n[w.view]),v(E.get(0)),w.flat?(E.appendTo(this).show().css("position","relative"),p(E.get(0))):w.insertionTarget instanceof HTMLElement?(E.appendTo(w.insertionTarget),e(this).bind(w.eventName,S)):(E.appendTo(document.body),e(this).bind(w.eventName,S))}})},showPicker:function(){return this.each(function(){e(this).data("datepickerId")&&S.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("datepickerId")&&(e("#"+e(this).data("datepickerId")).hide(),e("#add-date").trigger("change")),e(this).focus()})},setDate:function(w,k){return this.each(function(){if(e(this).data("datepickerId")){var C=e("#"+e(this).data("datepickerId")),T=C.data("datepicker");if(T.date=w,T.date.constructor==String&&(T.date=b(T.date,T.format),T.date.setHours(0,0,0,0)),T.mode!="single")if(T.date.constructor!=Array)T.date=[T.date.valueOf()],T.mode=="range"&&T.date.push(new Date(T.date[0]).setHours(23,59,59,0).valueOf());else{for(var E=0;E<T.date.length;E++)T.date[E]=b(T.date[E],T.format).setHours(0,0,0,0).valueOf();T.mode=="range"&&(T.date[1]=new Date(T.date[1]).setHours(23,59,59,0).valueOf())}else T.date=T.date.valueOf();k&&(T.current=new Date(T.mode!="single"?T.date[0]:T.date)),v(C.get(0))}})},getDate:function(w){if(this.length>0)return u(e("#"+e(this).data("datepickerId")).data("datepicker"))[w?0:1]},clear:function(){return this.each(function(){if(e(this).data("datepickerId")){var w=e("#"+e(this).data("datepickerId")),k=w.data("datepicker");k.mode!="single"&&(k.date=[],v(w.get(0)))}})},fixLayout:function(){return this.each(function(){if(e(this).data("datepickerId")){var w=e("#"+e(this).data("datepickerId")),k=w.data("datepicker");k.flat&&p(w.get(0))}})}}}();e.fn.extend({DatePicker:i.init,DatePickerHide:i.hidePicker,DatePickerShow:i.showPicker,DatePickerSetDate:i.setDate,DatePickerGetDate:i.getDate,DatePickerClear:i.clear,DatePickerLayout:i.fixLayout})})(window.jQuery);var st;(function(){var e={};st=function i(n,r){var t=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[n]=e[n]||i(document.getElementById(n).innerHTML);return r?t(r):t}})();(function(e){var i=e.event,n,r;n=i.special.debouncedresize={setup:function(){e(this).on("resize",n.handler)},teardown:function(){e(this).off("resize",n.handler)},handler:function(t,s){var o=this,a=arguments,c=function(){t.type="debouncedresize",i.dispatch.apply(o,a)};r&&clearTimeout(r),s?c():r=setTimeout(c,n.threshold)},threshold:150}})(jQuery);(function(e){typeof e.easing<"u"&&(e.easing.jswing=e.easing.swing);var i=Math.pow,n=Math.sqrt,r=Math.sin,t=Math.cos,s=Math.PI,o=1.70158,a=o*1.525,c=o+1,h=2*s/3,f=2*s/4.5;function m(y){var v=7.5625,b=2.75;return y<1/b?v*y*y:y<2/b?v*(y-=1.5/b)*y+.75:y<2.5/b?v*(y-=2.25/b)*y+.9375:v*(y-=2.625/b)*y+.984375}return e.extend(e.easing,{def:"easeOutQuad",swing:function(y){return e.easing[e.easing.def](y)},easeInQuad:function(y){return y*y},easeOutQuad:function(y){return 1-(1-y)*(1-y)},easeInOutQuad:function(y){return y<.5?2*y*y:1-i(-2*y+2,2)/2},easeInCubic:function(y){return y*y*y},easeOutCubic:function(y){return 1-i(1-y,3)},easeInOutCubic:function(y){return y<.5?4*y*y*y:1-i(-2*y+2,3)/2},easeInQuart:function(y){return y*y*y*y},easeOutQuart:function(y){return 1-i(1-y,4)},easeInOutQuart:function(y){return y<.5?8*y*y*y*y:1-i(-2*y+2,4)/2},easeInQuint:function(y){return y*y*y*y*y},easeOutQuint:function(y){return 1-i(1-y,5)},easeInOutQuint:function(y){return y<.5?16*y*y*y*y*y:1-i(-2*y+2,5)/2},easeInSine:function(y){return 1-t(y*s/2)},easeOutSine:function(y){return r(y*s/2)},easeInOutSine:function(y){return-(t(s*y)-1)/2},easeInExpo:function(y){return y===0?0:i(2,10*y-10)},easeOutExpo:function(y){return y===1?1:1-i(2,-10*y)},easeInOutExpo:function(y){return y===0?0:y===1?1:y<.5?i(2,20*y-10)/2:(2-i(2,-20*y+10))/2},easeInCirc:function(y){return 1-n(1-i(y,2))},easeOutCirc:function(y){return n(1-i(y-1,2))},easeInOutCirc:function(y){return y<.5?(1-n(1-i(2*y,2)))/2:(n(1-i(-2*y+2,2))+1)/2},easeInElastic:function(y){return y===0?0:y===1?1:-i(2,10*y-10)*r((y*10-10.75)*h)},easeOutElastic:function(y){return y===0?0:y===1?1:i(2,-10*y)*r((y*10-.75)*h)+1},easeInOutElastic:function(y){return y===0?0:y===1?1:y<.5?-(i(2,20*y-10)*r((20*y-11.125)*f))/2:i(2,-20*y+10)*r((20*y-11.125)*f)/2+1},easeInBack:function(y){return c*y*y*y-o*y*y},easeOutBack:function(y){return 1+c*i(y-1,3)+o*i(y-1,2)},easeInOutBack:function(y){return y<.5?i(2*y,2)*((a+1)*2*y-a)/2:(i(2*y-2,2)*((a+1)*(y*2-2)+a)+2)/2},easeInBounce:function(y){return 1-m(1-y)},easeOutBounce:m,easeInOutBounce:function(y){return y<.5?(1-m(1-2*y))/2:(1+m(2*y-1))/2}}),e})(xi);/*!
 * jNotify jQuery Plug-in
 *
 * Copyright 2010 Giva, Inc. (http://www.givainc.com/labs/) 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * 	http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Date: 2010-09-30
 * Rev:  1.1.00
 */(function(e){e.jnotify=function(f,m,y){return new h(f,m,y)},e.jnotify.version="1.1.00";var i,n=[],r=0,t=!1,s=!1,o,a,c={type:"",delay:2e3,sticky:!1,closeLabel:"&times;",showClose:!0,fadeSpeed:1e3,slideSpeed:250,classContainer:"jnotify-container",classNotification:"jnotify-notification",classBackground:"jnotify-background",classClose:"jnotify-close",classMessage:"jnotify-message",init:null,create:null,beforeRemove:null,remove:null,transition:null};e.jnotify.setup=function(f){c=e.extend({},c,f)},e.jnotify.play=function(f,m){if(!(t&&f!==!0||n.length==0)){t=!0;var y=n.shift();a=y;var v=arguments.length>=2?parseInt(m,10):y.options.delay;o=setTimeout(function(){o=0,y.remove(function(){n.length==0?t=!1:s||e.jnotify.play(!0)})},v)}},e.jnotify.pause=function(){clearTimeout(o),o&&n.unshift(a),s=t=!0},e.jnotify.resume=function(){s=!1,e.jnotify.play(!0,0)},e.jnotify.clear=function(f){for(t&&e.jnotify.pause();n.length>1;){var m=n.shift();m.remove()}e.jnotify.resume(),e.isFunction(f)&&f.apply(self,[i])};function h(f,m){var y=this,v=typeof m;v=="number"?m=e.extend({},c,{delay:m}):v=="boolean"?m=e.extend({},c,{sticky:!0}):v=="string"?m=e.extend({},c,{type:m,delay:arguments.length>2&&typeof arguments[2]=="number"?arguments[2]:c.delay,sticky:arguments.length>2&&typeof arguments[2]=="boolean"?arguments[2]:c.sticky}):m=e.extend({},c,m),this.options=m,i||(i=e('<div class="'+c.classContainer+'" />').appendTo("body"),e.isFunction(m.init)&&m.init.apply(y,[i]));function b(p){var l='<div class="'+m.classNotification+(m.type.length?" "+m.classNotification+"-"+m.type:"")+'"><div class="'+m.classBackground+'"></div>'+(m.showClose?'<a class="'+m.classClose+'">'+m.closeLabel+"</a>":"")+'<div class="'+m.classMessage+'"><div>'+p+"</div></div></div>";r++;var u=e(l);return m.showClose&&u.find("a."+m.classClose).bind("click.jnotify",function(){y.remove()}),e.isFunction(m.create)&&m.create.apply(y,[u]),window.isTouchOnly?u.hide().appendTo(i).fadeIn():u.hide().appendTo(i).slideDown("fast")}this.remove=function(p){var l=d.find("."+m.classMessage),u=l.parent(),g=r--;e.isFunction(m.beforeRemove)&&m.beforeRemove.apply(y,[l]);function x(){window.isTouchOnly?u.fadeOut(function(){e(this).remove()}):u.slideUp(m.slideSpeed,function(){e(this).remove()}),e.isFunction(p)&&p.apply(y,[l]),e.isFunction(m.remove)&&m.remove.apply(y,[l])}e.isFunction(m.transition)?m.transition.apply(y,[u,l,g,x,m]):(l.fadeTo(m.fadeSpeed,.01,function(){g<=1?x():window.isTouchOnly?u.fadeOut(function(){x()}):u.slideUp(m.slideSpeed,x)}),r<=0&&(window.isTouchOnly?u.fadeOut():u.slideUp(m.slideSpeed)))};var d=b(f);return m.sticky||(n.push(this),e.jnotify.play()),this}})(jQuery);(function(e,i,n,r){var t=e(i);e.fn.lazyload=function(s){var o=this,a,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:i,data_attribute:"original",data_srcset:"srcset",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUHAAAALAAAAAABAAEAAAICRAEAOw=="};function h(){var f=0;o.each(function(){var m=e(this);if(!(c.skip_invisible&&!m.is(":visible"))&&!(e.abovethetop(this,c)||e.leftofbegin(this,c))){if(!e.belowthefold(this,c)&&!e.rightoffold(this,c))m.trigger("appear"),f=0;else if(++f>c.failure_limit)return!1}})}return s&&(r!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),r!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(c,s)),a=c.container===r||c.container===i?t:e(c.container),c.event.indexOf("scroll")===0&&a.bind(c.event,function(){return h()}),this.each(function(){var f=this,m=e(f);f.loaded=!1,(m.attr("src")===r||m.attr("src")===!1)&&m.is("img")&&m.attr("src",c.placeholder),m.one("appear",function(){if(!this.loaded){if(c.appear){var y=o.length;c.appear.call(f,y,c)}e("<img />").bind("load",function(){var v=m.attr("data-"+c.data_attribute),b=m.attr("data-"+c.data_srcset);m.hide(),m.is("img")?(m.attr("src",v),m.attr("srcset",b)):(m.css("background-image","url('"+v+"')"),m.show()),m[c.effect](c.effect_speed),f.loaded=!0;var d=e.grep(o,function(l){return!l.loaded});if(o=e(d),c.load){var p=o.length;c.load.call(f,p,c)}}).attr("src",m.attr("data-"+c.data_attribute)).attr("srcset",m.attr("data-"+c.data_srcset))}}),c.event.indexOf("scroll")!==0&&m.bind(c.event,function(){f.loaded||m.trigger("appear")})}),t.bind("resize",function(){h()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&t.bind("pageshow",function(f){f.originalEvent&&f.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){h()}),this},e.belowthefold=function(s,o){var a;return o.container===r||o.container===i?a=(i.innerHeight?i.innerHeight:t.height())+t.scrollTop():a=e(o.container).offset().top+e(o.container).height(),a<=e(s).offset().top-o.threshold},e.rightoffold=function(s,o){var a;return o.container===r||o.container===i?a=t.width()+t.scrollLeft():a=e(o.container).offset().left+e(o.container).width(),a<=e(s).offset().left-o.threshold},e.abovethetop=function(s,o){var a;return o.container===r||o.container===i?a=t.scrollTop():a=e(o.container).offset().top,a>=e(s).offset().top+o.threshold+e(s).height()},e.leftofbegin=function(s,o){var a;return o.container===r||o.container===i?a=t.scrollLeft():a=e(o.container).offset().left,a>=e(s).offset().left+o.threshold+e(s).width()},e.inviewport=function(s,o){return!e.rightoffold(s,o)&&!e.leftofbegin(s,o)&&!e.belowthefold(s,o)&&!e.abovethetop(s,o)},e.extend(e.expr[":"],{"below-the-fold":function(s){return e.belowthefold(s,{threshold:0})},"above-the-top":function(s){return!e.belowthefold(s,{threshold:0})},"right-of-screen":function(s){return e.rightoffold(s,{threshold:0})},"left-of-screen":function(s){return!e.rightoffold(s,{threshold:0})},"in-viewport":function(s){return e.inviewport(s,{threshold:0})},"above-the-fold":function(s){return!e.belowthefold(s,{threshold:0})},"right-of-fold":function(s){return e.rightoffold(s,{threshold:0})},"left-of-fold":function(s){return!e.rightoffold(s,{threshold:0})}})})(jQuery,window,document);/*!
 * jQuery.localScroll
 * Copyright (c) 2007-2013 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * http://flesler.blogspot.com/2007/10/jquerylocalscroll-10.html
 * @author Ariel Flesler
 * @version 1.3.1
 */(function(e){var i=location.href.replace(/#.*/,""),n=e.localScroll=function(t){e("body").localScroll(t)};n.defaults={duration:1e3,axis:"y",event:"click",stop:!0,target:window},e.fn.localScroll=function(t){return t=e.extend({},n.defaults,t),t.hash&&location.hash&&(t.target&&window.scrollTo(0,0),r(0,location,t)),t.lazy?this.bind(t.event,function(o){var a=e([o.target,o.target.parentNode]).filter(s)[0];a&&r(o,a,t)}):this.find("a,area").filter(s).bind(t.event,function(o){r(o,this,t)}).end().end();function s(){return!!this.href&&!!this.hash&&this.href.replace(this.hash,"")==i&&(!t.filter||e(this).is(t.filter))}},n.hash=function(){};function r(t,s,o){var a=s.hash.slice(1),c=document.getElementById(a)||document.getElementsByName(a)[0];if(c){t&&t.preventDefault();var h=e(o.target);if(!(o.lock&&h.is(":animated")||o.onBefore&&o.onBefore(t,c,h)===!1)){if(o.stop&&h._scrollable().stop(!0),o.hash){var f=o.offset;f=f&&f.top||f||0;var m=c.id==a?"id":"name",y=e("<a> </a>").attr(m,a).css({position:"absolute",top:e(window).scrollTop()+f,left:e(window).scrollLeft()});c[m]="",e("body").prepend(y),location=s.hash,y.remove(),c[m]=a}h.scrollTo(c,o).trigger("notify.serialScroll",[c])}}}})(jQuery);(function(e){var i="overthrow",n=typeof console>"u"?function(){}:function(t){console.error(t)};e.easing.easeOutQuart=function(t,s,o,a,c){return-a*((s=s/c-1)*s*s*s-1)+o},e.support.transition=function(){var t=document.body||document.documentElement,s=t.style,o=s.transition!==void 0||s.WebkitTransition!==void 0||s.MozTransition!==void 0||s.MsTransition!==void 0||s.OTransition!==void 0;return o}();var r=function(t,s){this.$el=e(t),this.options=e.extend(!0,{},this.defaults,s),this.options.nestCloseButton?this.container='<div class="overthrow"><div class="overthrow-shield"></div><div class="overthrow-shim"></div><div class="overthrow-wrapper"><div class="overthrow-outer"><div class="overthrow-inner"><div class="overthrow-content"></div><a href="#" class="overthrow-close">Close</a></div></div></div></div>':this.container='<div class="overthrow"><div class="overthrow-shield"></div><div class="overthrow-shim"></div><div class="overthrow-wrapper"><div class="overthrow-outer"><div class="overthrow-inner"><div class="overthrow-content"></div></div></div></div><a href="#" class="overthrow-close">Close</a></div>',this.hasTransitions=e.support.transition,this.transitionDuration=200,this._init()};r.prototype={defaults:{customClass:null,afterLoad:null,youtubeEmbed:!1,disableForTouch:!1,duration:200,aspect:.65,targetAttribute:"href",nestCloseButton:!1,lazyLoad:!1},_init:function(){var t=this;t.$window=e(window),t.$document=e(document),t.$body=e("body"),t.touch=t._touchEnabled(),t.$container=e(t.container),t.$content=t.$container.find(".overthrow-content"),t.$close=t.$container.find(".overthrow-close"),t.options.customClass=t.$el.data("overthrow-class")||t.options.customClass,t.options.target=t.$el.attr(t.options.targetAttribute),t.hasTransitions&&e("html").addClass("overthrow-transitions"),t._bindings()},_bindings:function(){var t=this;t.$el.on("click."+i,function(s){if(!(t.options.disableForTouch&&t.touch)){if(s.preventDefault(),t.options.customClass&&t.$container.addClass(t.options.customClass),t.$body.addClass("overthrow-open"),t.options.target.substring(0,1)==="#"||t.options.target.substring(0,1)===".")return t.loadInline();if(t._checkImageExtensions()){if(typeof imagesLoaded<"u")return t.loadImage();console.warn("Overthrow requires the imagesLoaded plugin for showing images");return}else return t.loadAjax()}})},loadInline:function(){var t=this;t.$content.html(e(""+t.options.target).html()),t.showOverthrow()},loadImage:function(){var t=this,s=t.$el.data("srcset"),o=t.$el.data("sizes"),a=t.$el.data("aspect-ratio"),c;t.options.lazyLoad?c='<img srcset="'+s+'" sizes="'+o+'" alt="" class="lazyload">':c='<img src="'+t.options.target+'" srcset="'+s+'" sizes="'+o+'" alt="" class="lazyload">';var h='<div class="overthrow-image-container">'+c+"</div>";t.$content.addClass("-image").html(h),t.image={$el:t.$content.find("img")};var f=imagesLoaded(t.$content);f.on("always",function(){var m=f.images[0];t.image.width=m.img.width,t.image.height=m.img.height,typeof a<"u"?t.image.aspect=a:t.image.aspect=m.img.width/m.img.height}),t.showOverthrow("image")},_checkImageExtensions:function(){var t=this,s=t.options.target.substr(t.options.target.lastIndexOf("."),4),o=[".jpe",".jpg",".gif",".png"];return e.inArray(s,o)>-1},_resizeImage:function(){var t=this;if(t.image){var s=!1,o=t.$content.innerWidth()/t.$content.innerHeight();o>t.image.aspect&&(s=!0),s?t.$content.removeClass("-landscape").addClass("-portrait"):t.$content.removeClass("-portrait").addClass("-landscape")}},loadAjax:function(){var t=this,s=t.getVideoUrl();if(t.options.youtubeEmbed||s)if(s){var o='<div class="overthrow-video-container"><iframe src="'+s+'" allowfullscreen  allow="autoplay; fullscreen"></iframe></div>';t.$content.html(o),t.showOverthrow()}else return alert("Sorry, that video link seems to be invalid."),!1;else e.ajax({url:t.options.target,dataType:"html",success:function(a,c,h){t.$content.html(a),t.showOverthrow()},error:function(a,c,h){alert("Error: "+h),t.closeOverthrow()}})},loadNewAjaxContent:function(t,s){var o=this;e.ajax({url:t,dataType:"html",success:function(a,c,h){o.$content.html(a),s&&s(o)},error:function(a,c,h){alert("Error: "+h),o.closeOverthrow()}})},getVideoUrl:function(){var t=this,s=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,o=/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/,a=t.options.target.match(s),c=t.options.target.match(o),h;return a&&(h="//www.youtube.com/embed/"+a[1],a.indexOf("autoplay=1")===-1&&a.indexOf("?")>-1?h+="&rel=0&playsinline=1&autoplay=1":a.indexOf("autoplay=1")===-1&&(h+="?rel=0&playsinline=1&autoplay=1")),c&&(h="//player.vimeo.com/video/"+c[4],h+="?autoplay=1&title=0&byline=0&portrait=0"),a||c?h:!1},showOverthrow:function(t){var s=this,o=s.$window.height()/s.$window.width();o<s.options.aspect&&s.$body.addClass("overthrow-switch-aspect"),s.$body.append(s.$container),s.$body.addClass("overthrow-enable"),s.$close.on("click",function(a){a.preventDefault(),event.stopPropagation(),s.closeOverthrow()}),s.$container.on("click",".overthrow-wrapper",function(a){e(a.target).hasClass("overthrow-wrapper")&&s.closeOverthrow()}),s.hasTransitions?(setTimeout(function(){s.$body.addClass("overthrow-trans-in")},10),setTimeout(function(){s.$close.addClass("overthrow-close-active"),t==="image"&&s.image&&(s._resizeImage(),s.$content.addClass("-visible"))},s.options.duration)):(s.$body.addClass("overthrow-show"),s.$close.addClass("overthrow-close-active")),s.$document.on("keyup",function(a){a.which===27&&s.closeOverthrow()}),s.options.afterLoad&&s.options.afterLoad(s),s.$container.trigger("ajaxload")},_touchEnabled:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},option:function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))},closeOverthrow:function(){var t=this;t.hasTransitions?(t.$body.removeClass("overthrow-trans-in").addClass("overthrow-trans-out"),setTimeout(function(){t.$body.removeClass("overthrow-trans-out"),t.$close.removeClass("overthrow-close-active"),t.$content.removeClass("-visible -landscape -portrait").html(""),t.$body.addClass("overthrow-hide"),setTimeout(function(){t.$body.removeClass("overthrow-enable"),t.$body.removeClass("overthrow-hide"),t.$body.removeClass("overthrow-open"),t.$body.removeClass("overthrow-switch-aspect"),t.$container.remove()},t.transitionDuration)},t.transitionDuration)):(t.$close.removeClass("overthrow-close-active"),t.$body.removeClass("overthrow-show"),t.$content.removeClass("-visible -landscape -portrait").html(""),t.$body.addClass("overthrow-hide"),t.$body.removeClass("overthrow-enable"),t.$body.removeClass("overthrow-hide"),t.$body.removeClass("overthrow-open"),t.$body.removeClass("overthrow-switch-aspect"),t.$container.remove())}},e.fn[i]=function(t){if(typeof t=="string"){for(var s=Array.prototype.slice.call(arguments,1),o=0,a=this.length;o<a;o++){var c=this[o],h=e.data(c,i);if(!h){n("cannot call methods on "+i+" prior to initialization; attempted to call '"+t+"'");continue}if(!e.isFunction(h[t])||t.charAt(0)==="_"){n("no such method '"+t+"' for "+i+" instance");continue}var f=h[t].apply(h,s);if(f!==void 0)return f}return this}else return this.each(function(){var m=e.data(this,i);m?(m.option(t||{}),m._init()):(m=new r(this,t),e.data(this,i,m))})}})(jQuery);(function(e){e.fn.padme=function(i){var n=e.extend({},e.fn.padme.defaults,i);function r(s,o){if(s>0){for(var a="",c=0;c<o.cols-s;c++)a+=" "+o.placeholder;o.$group.append(a)}}function t(s){s.$group.find("."+n.placeholderClass).each(function(){e(this).position().top>s.top&&e(this).remove()})}return this.each(function(){var s=e(this).data("padme-cols"),o={$group:e(this),cols:n.cols?n.cols:s};if(o.cols!==null&&o.cols>1&&(n.children?o.$items=o.$group.children(n.children).not("."+n.placeholderClass):o.$items=o.$group.children().not("."+n.placeholderClass),o.$items.length>0)){var a;n.placeholderEl?a=n.placeholderEl:a=o.$items.eq(0).prop("tagName"),o.placeholder="<"+a+' class="'+n.placeholderClass+'"></'+a+">",o.$group.find("."+n.placeholderClass).remove();var c=1;if(n.allowExtras){var h=o.$items.length-1;o.top=o.$items.eq(h).position().top;for(var c=1,f=o.top,m=!1;c<o.cols&&!m&&h>0;){h--;var y=o.$items.eq(h);y.length?(f=y.position().top,f>=o.top?c++:m=!0):m=!0}}else c=o.$items.length%o.cols;r(c,o),n.removeOverflow&&t(o)}})},e.fn.padme.defaults={cols:null,children:null,placeholderEl:null,placeholderClass:"placeholder",removeOverflow:!1,allowExtras:!1}})(jQuery);(function(e){e.fn.popupWindow=function(i){if(this.length)return this.each(function(){e(this).click(function(){n(i)})});n(i);function n(r){e.fn.popupWindow.defaultSettings={centerBrowser:0,centerScreen:0,height:500,left:0,location:0,menubar:0,resizable:0,scrollbars:0,status:0,width:500,windowName:null,windowURL:null,top:0,toolbar:0};var t=e.extend({},e.fn.popupWindow.defaultSettings,r||{}),s="height="+t.height+",width="+t.width+",toolbar="+t.toolbar+",scrollbars="+t.scrollbars+",status="+t.status+",resizable="+t.resizable+",location="+t.location+",menuBar="+t.menubar;t.windowName=this&&this.name||t.windowName,t.windowURL=this&&this.href||t.windowURL;var o,a;return t.centerBrowser?(navigator.userAgent.match(/msie/i)?(o=window.screenTop-120+((document.documentElement.clientHeight+120)/2-t.height/2),a=window.screenLeft+((document.body.offsetWidth+20)/2-t.width/2)):(o=window.screenY+(window.outerHeight/2-t.height/2),a=window.screenX+(window.outerWidth/2-t.width/2)),window.open(t.windowURL,t.windowName,s+",left="+a+",top="+o).focus()):t.centerScreen?(o=(screen.height-t.height)/2,a=(screen.width-t.width)/2,window.open(t.windowURL,t.windowName,s+",left="+a+",top="+o).focus()):window.open(t.windowURL,t.windowName,s+",left="+t.left+",top="+t.top).focus(),!1}}})(jQuery);function Si({message:e,viewingId:i,isIconLayout:n=!1,isViewingFormShouldReturnJsonResponse:r=!0}){const t={mode:ms.EDIT,viewingId:i,jsonResponse:r};return N.jsxs("button",{rel:"nofollow",className:_n(n&&"has-icon icon-16 icon-edit"),...ps(t),children:[N.jsx("span",{className:"label",children:e}),n&&N.jsx("span",{className:"icon"})]})}Si.propsFrom=e=>({message:_e(e,"data-message"),viewingId:Number(_e(e,"data-viewing-id")),isIconLayout:Ge(e,"data-icon-layout",!1),isViewingFormShouldReturnJsonResponse:Ge(e,"data-json-response",!0)});function An({viewingId:e,viewingableIdentifier:i,ownerUsername:n,posterMenuConfig:r}){return N.jsx(gs,{width:150,posterMenuConfig:r,children:person&&person.username===n?N.jsx("span",{className:"diary-entry-edit",children:N.jsx(Si,{message:"Edit this entry",viewingId:e,isIconLayout:!0})}):N.jsxs("span",{children:[N.jsx(bn,{watchableIdentifier:i,format:"minimal"}),N.jsx(wn,{likeable:i,LikeComponent:vs})]})})}An.propsFrom=e=>{const i=Number(_e(e,"data-viewing-id")),n=_e(e,"data-viewing-uid"),r=As(e,"data-viewingable-identifier"),t=_e(e,"data-viewingable-slug"),s=Number(_e(e,"data-viewingable-id")),o={postered:r,filmId:s,itemName:_e(e,"data-viewingable-name"),itemSlug:t},a=_e(e,"data-viewingable-link"),c=_e(e,"data-owner-username");if(person&&person.loggedIn){o.viewingableDataEndpoint=e.getAttribute("data-viewingable-details-endpoint")||void 0;const f=person.profileLink+a.substring(1+baseURL.length);o.membersActivityPageUrl=f+"activity/",o.membersDraftReviewsPageUrl=f+"reviews/drafts/";const m=person.canHaveCustomPosters||Ge(e,"data-poster-freely-customisable",!1),y=!Ge(e,"data-hide-change-backdrop",!1)&&(person.canHaveCustomBackdrops||Ge(e,"data-backdrop-freely-customisable",!1)),v=c===person.username,b=v&&y&&Ge(e,"data-customise-object-backdrop",!1);o.contentMediaPickerOptions={},m&&(o.contentMediaPickerOptions.poster={endpoint:"".concat(a,"poster-picker/"),canCustomiseObject:v}),y&&(o.contentMediaPickerOptions.backdrop={endpoint:"".concat(a,"backdrop-picker/"),canCustomiseObject:b}),v&&(o.contentMediaPickerOptions.customisableObjectIdentifier={uid:n,typeName:"viewing"}),r.type===ji.Film.code&&(o.startNewListURL="/list/new/with/".concat(t,"/")),person.canAccessFilmStats&&(o.backstageLink=a+"backstage/")}return r.type===ji.Film.code&&(o.listsPage=a+"lists/by/popular/"),o.watchLink=a+"watch/",{viewingId:i,viewingableIdentifier:r,ownerUsername:c,posterMenuConfig:o}};const Tr="_meter_1m3so_1",Ir="_label_1m3so_12",Vi={meter:Tr,label:Ir};function Dn({value:e,max:i,label:n}){const r=Xe.useId(),t=e/i*100,s="".concat(t.toFixed(1),"%");return N.jsxs("div",{children:[N.jsx("meter",{id:r,className:_n("progress-meter",Vi.meter),min:0,max:i,value:e,children:s}),N.jsx("label",{htmlFor:r,className:Vi.label,children:"".concat(Fi(e)).concat(Ps).concat(Fi(i)," ").concat(Ds(e,n.singularName,n.pluralName,void 0,!0))})]})}Dn.propsFrom=e=>({value:Number(_e(e,"data-progress-value")),max:Number(_e(e,"data-progress-max")),label:{singularName:_e(e,"data-label-singular-name"),pluralName:e.getAttribute("data-label-plural-name")||void 0}});class Er extends Rt.Component{get renderSync(){return!0}render(){if(person.loggedIn){let i,n,r,t;return person.hasHqRole&&(r=N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/stories/",children:"Stories"})})),person.hasMemberStatistics&&(i=N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/stats/",children:"Stats"})})),person.canHaveHqDashboard&&(t=N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/backstage/",children:"Backstage"})})),person.showVideoStore&&(n=N.jsx("li",{className:"divider -twocolumns",children:N.jsx("a",{href:baseURL+"/video-store/library",children:"Video Store rentals"})})),N.jsxs("li",{className:"navitem nav-account js-nav-account",children:[N.jsxs("a",{href:"#",className:"has-icon toggle-menu",children:[N.jsx("span",{className:"avatar -a24","data-js-user-avatar":!0,children:N.jsx("img",{src:person.avatarURL24,alt:person.username,width:"24",height:"24"})}),person.username]}),N.jsxs("ul",{className:"subnav",children:[N.jsx("li",{className:"divider",children:N.jsx("a",{href:baseURL+"/",children:"Home"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/",children:"Profile"})}),r,N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/films/",children:"Films"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/films/diary/",children:"Diary"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/films/reviews/",children:"Reviews"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/watchlist/",children:"Watchlist"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/lists/",children:"Lists"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/likes/",children:"Likes"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/tags/",children:"Tags"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/"+person.username+"/following/",children:"Network"})}),i,n,N.jsx("li",{className:"divider",children:N.jsx("a",{href:baseURL+"/settings/",children:"Settings"})}),N.jsx("li",{children:N.jsx("a",{href:baseURL+"/settings/subscriptions/",children:"Subscriptions"})}),t,N.jsx("li",{children:N.jsx("a",{id:"sign-out",href:"#",className:"ajax-click-action","data-action":baseURL+"/user/logout.do",children:"Sign Out"})})]})]})}else return null}}class Ar extends Rt.Component{constructor(i){super(i),this.myDOMNode=Rt.createRef()}static get renderSync(){return!0}componentDidMount(){$(this.myDOMNode.current).find(".js-tooltip").twipsy({offset:"-8",placement:"above",template:'<div class="twipsy-inner -mainnav"></div>'})}render(){const i=N.jsx(Er,{},"userMenu"),n=[],r=[];renderMobile?n.push(i):r.push(i);for(let o=0;o<mainMenu.length;o++){const a=mainMenu[o];if(!(person.loggedIn&&a.hideWhenSignedIn||!person.loggedIn&&a.hideWhenNotSignedIn)){const h=N.jsx("li",{className:"navitem "+a.cssClassCode+(a.selected?" -selected":""),children:N.jsx("a",{href:a.url,className:"navlink has-icon"+(a.tooltip?" js-tooltip":""),title:a.tooltip||void 0,children:N.jsx("span",{className:"label",children:a.name})})},a.id);!renderMobile||a.showInMainNavForMobile?r.push(h):n.push(h)}}renderMobile&&r.push(N.jsx("li",{className:"navitem -mobilemenutoggle",id:"mobile-menu-toggle",children:N.jsx("a",{className:"replace",href:"#",children:"Open/Close menu"})},"mobile-menu-toggle")),r.push(N.jsx("li",{className:"navitem -search js-nav-search-toggle",children:N.jsx("a",{href:"#",className:"replace"})},"nav-search"));let t;n.length&&(t=N.jsx("nav",{id:"mobile-nav",children:N.jsx("ul",{children:n})}));const s=N.jsx("nav",{className:"main-nav",children:N.jsx("ul",{className:"navitems",children:r})});return N.jsxs("div",{ref:this.myDOMNode,children:[t,s]})}}function Dr(e,i){const n=[];for(let r=0;r<e.length;r+=i)n.push(e.slice(r,r+i));return n}async function Pr(){var e;return(e=globalThis.scheduler)!=null&&e.yield?globalThis.scheduler.yield():new Promise(i=>{setTimeout(i,0)})}const Xi=150;function Jt(e){const i=e;return i.isLazyImport=!0,i}const Or={NavComponent:Ar,LikeComponent:wn,LazyPoster:ys,WatchLink:bn,EditLogEntry:Si,DiaryEntryRowActions:An,ProgressMeter:Dn,InstantRatingInput:bs,Watchlist:ws,PrivateNoteTrigger:xs,MenuLogEntry:_s,MemberActivity:Cs,ContentMediaPicker:Ss,RatingInput:Jt(()=>Kt(()=>import("./chunks/Bo3YRdmu.js").then(e=>e.G),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url)),SkeletonPlayground:Jt(()=>Kt(()=>import("./chunks/BtrmlD8h.js"),__vite__mapDeps([32,1,2,0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url)),ModalPlayground:Jt(()=>Kt(()=>import("./chunks/C29KSq6L.js"),__vite__mapDeps([33,1,2,34,6,35,36,37,38,39,40,41,42,43,5]),import.meta.url))};async function Mr(e,i){try{let n=_e(e,"data-component-class"),r=i[n];if(!r){console.warn("jquery.react: Component not found: "+n);return}r.isLazyImport&&(r=(await r()).default);const t=typeof r.propsFrom=="function"?r.propsFrom(e):$(e).data();if(r.renderSync){const s=fs(e),o=hs.createRoot(e,s);xn.flushSync(()=>{o.render(Rt.createElement(r,t))})}else yn(e,r,t)}catch(n){console.error(n)}}async function Lr(e,i){const n=Dr(e,Xi),r=Or;for(const t of n)await Promise.all(t.map(s=>Mr(s,r))),t.length===Xi&&await Pr()}xi.fn.react=function(){Lr(this.toArray())};/*!
 * jQuery.scrollTo
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @projectDescription Lightweight, cross-browser and highly customizable animated scrolling with jQuery
 * @author Ariel Flesler
 * @version 2.1.2
 */(function(e){var i=e.scrollTo=function(t,s,o){return e(window).scrollTo(t,s,o)};i.defaults={axis:"xy",duration:0,limit:!0};function n(t){return!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1}e.fn.scrollTo=function(t,s,o){typeof s=="object"&&(o=s,s=0),typeof o=="function"&&(o={onAfter:o}),t==="max"&&(t=9e9),o=e.extend({},i.defaults,o),s=s||o.duration;var a=o.queue&&o.axis.length>1;return a&&(s/=2),o.offset=r(o.offset),o.over=r(o.over),this.each(function(){if(t===null)return;var c=n(this),h=c?this.contentWindow||window:this,f=e(h),m=t,y={},v;switch(typeof m){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(m)){m=r(m);break}m=c?e(m):e(m,h);case"object":if(m.length===0)return;(m.is||m.style)&&(v=(m=e(m)).offset())}var b=e.isFunction(o.offset)&&o.offset(h,m)||o.offset;e.each(o.axis.split(""),function(p,l){var u=l==="x"?"Left":"Top",g=u.toLowerCase(),x="scroll"+u,S=f[x](),_=i.max(h,l);if(v)y[x]=v[g]+(c?0:S-f.offset()[g]),o.margin&&(y[x]-=parseInt(m.css("margin"+u),10)||0,y[x]-=parseInt(m.css("border"+u+"Width"),10)||0),y[x]+=b[g]||0,o.over[g]&&(y[x]+=m[l==="x"?"width":"height"]()*o.over[g]);else{var w=m[g];y[x]=w.slice&&w.slice(-1)==="%"?parseFloat(w)/100*_:w}o.limit&&/^\d+$/.test(y[x])&&(y[x]=y[x]<=0?0:Math.min(y[x],_)),!p&&o.axis.length>1&&(S===y[x]?y={}:a&&(d(o.onAfterFirst),y={}))}),d(o.onAfter);function d(p){var l=e.extend({},o,{queue:!0,duration:s,complete:p&&function(){p.call(h,m,o)}});f.animate(y,l)}})},i.max=function(t,s){var o=s==="x"?"Width":"Height",a="scroll"+o;if(!n(t))return t[a]-e(t)[o.toLowerCase()]();var c="client"+o,h=t.ownerDocument||t.document,f=h.documentElement,m=h.body;return Math.max(f[a],m[a])-Math.min(f[c],m[c])};function r(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}return e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var s=this.get(t);if(t.options.interrupt&&t._last&&t._last!==s)return e(t.elem).stop();var o=Math.round(t.now);s!==o&&(e(t.elem)[t.prop](o),t._last=this.get(t))}},i})(xi);/*! Smooth Scroll - v1.4.6 - 2012-08-23
* Copyright (c) 2012 Karl Swedberg; Licensed MIT, GPL */(function(e){var i="1.4.6",n={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2},r=function(s){var o=[],a=!1,c=s.dir&&s.dir=="left"?"scrollLeft":"scrollTop";return this.each(function(){if(!(this==document||this==window)){var h=e(this);h[c]()>0?o.push(this):(h[c](1),a=h[c]()>0,a&&o.push(this),h[c](0))}}),o.length||this.each(function(h){this.nodeName==="BODY"&&(o=[this])}),s.el==="first"&&o.length>1&&(o=[o[0]]),o};e.fn.extend({scrollable:function(s){var o=r.call(this,{dir:s});return this.pushStack(o)},firstScrollable:function(s){var o=r.call(this,{el:"first",dir:s});return this.pushStack(o)},smoothScroll:function(s){s=s||{};var o=e.extend({},e.fn.smoothScroll.defaults,s),a=e.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(c){var h=this,f=e(this),m=o.exclude,y=o.excludeWithin,v=0,b=0,d=!0,p={},l=location.hostname===h.hostname||!h.hostname,u=o.scrollTarget||(e.smoothScroll.filterPath(h.pathname)||a)===a,g=t(h.hash);if(!o.scrollTarget&&(!l||!u||!g))d=!1;else{for(;d&&v<m.length;)f.is(t(m[v++]))&&(d=!1);for(;d&&b<y.length;)f.closest(y[b++]).length&&(d=!1)}d&&(c.preventDefault(),e.extend(p,o,{scrollTarget:o.scrollTarget||g,link:h}),e.smoothScroll(p))}),this}}),e.smoothScroll=function(s,o){var a,c,h,f,m=0,y="offset",v="scrollTop",b={},d={};typeof s=="number"?(a=e.fn.smoothScroll.defaults,h=s):(a=e.extend({},e.fn.smoothScroll.defaults,s||{}),a.scrollElement&&(y="position",a.scrollElement.css("position")=="static"&&a.scrollElement.css("position","relative")),h=o||e(a.scrollTarget)[y]()&&e(a.scrollTarget)[y]()[a.direction]||0),a=e.extend({link:null},a),v=a.direction=="left"?"scrollLeft":v,a.scrollElement?(c=a.scrollElement,m=c[v]()):c=e("html, body").firstScrollable(),b[v]=h+m+a.offset,a.beforeScroll.call(c,a),f=a.speed,f==="auto"&&(f=b[v]||c.scrollTop(),f=f/a.autoCoefficent),d={duration:f,easing:a.easing,complete:function(){a.afterScroll.call(a.link,a)}},a.step&&(d.step=a.step),c.length?c.stop().animate(b,d):a.afterScroll.call(a.link,a)},e.smoothScroll.version=i,e.smoothScroll.filterPath=function(s){return s.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},e.fn.smoothScroll.defaults=n;function t(s){return s.replace(/(:|\.)/g,"\\$1")}})(jQuery);/**
@license Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net
 */(function(){var e,i;e=window.jQuery,i=e(window),e.fn.stick_in_parent=function(n){var r,t,s,o,a,c,h,f,m,y,v,b;for(n==null&&(n={}),b=n.sticky_class,c=n.inner_scrolling,v=n.recalc_every,y=n.parent,m=n.offset_top,f=n.spacer,s=n.bottoming,m==null&&(m=0),y==null&&(y=void 0),c==null&&(c=!0),b==null&&(b="is_stuck"),r=e(document),s==null&&(s=!0),o=function(d,p,l,u,g,x,S,_){var w,k,C,T,E,A,D,O,L,M,P,I;if(!d.data("sticky_kit")){if(d.data("sticky_kit",!0),E=r.height(),D=d.parent(),y!=null&&(D=D.closest(y)),!D.length)throw"failed to find stick parent";if(C=!1,w=!1,P=f!=null?f&&d.closest(f):e("<div />"),P&&P.css("position",d.css("position")),O=function(){var H,j,U;if(!_&&(E=r.height(),H=parseInt(D.css("border-top-width"),10),j=parseInt(D.css("padding-top"),10),p=parseInt(D.css("padding-bottom"),10),l=D.offset().top+H+j,u=D.height(),C&&(C=!1,w=!1,f==null&&(d.insertAfter(P),P.detach()),d.css({position:"",top:"",width:"",bottom:""}).removeClass(b),U=!0),g=d.offset().top-(parseInt(d.css("margin-top"),10)||0)-m,x=d.outerHeight(!0),S=d.css("float"),P&&P.css({width:d.outerWidth(!0),height:x,display:d.css("display"),"vertical-align":d.css("vertical-align"),float:S}),U))return I()},O(),x!==u)return T=void 0,A=m,M=v,I=function(){var H,j,U,q,X,J;if(!_&&(U=!1,M!=null&&(M-=1,M<=0&&(M=v,O(),U=!0)),!U&&r.height()!==E&&(O(),U=!0),q=i.scrollTop(),T!=null&&(j=q-T),T=q,C?(s&&(X=q+x+A>u+l,w&&!X&&(w=!1,d.css({position:"fixed",bottom:"",top:A}).trigger("sticky_kit:unbottom"))),q<g&&(C=!1,A=m,f==null&&((S==="left"||S==="right")&&d.insertAfter(P),P.detach()),H={position:"",width:"",top:""},d.css(H).removeClass(b).trigger("sticky_kit:unstick")),c&&(J=i.height(),x+m>J&&(w||(A-=j,A=Math.max(J-x,A),A=Math.min(m,A),C&&d.css({top:A+"px"}))))):q>g&&(C=!0,H={position:"fixed",top:A},H.width=d.css("box-sizing")==="border-box"?d.outerWidth()+"px":d.width()+"px",d.css(H).addClass(b),f==null&&(d.after(P),(S==="left"||S==="right")&&P.append(d)),d.trigger("sticky_kit:stick")),C&&s&&(X==null&&(X=q+x+A>u+l),!w&&X)))return w=!0,D.css("position")==="static"&&D.css({position:"relative"}),d.css({position:"absolute",bottom:p,top:"auto"}).trigger("sticky_kit:bottom")},L=function(){return O(),I()},k=function(){if(_=!0,i.off("touchmove",I),i.off("scroll",I),i.off("resize",L),e(document.body).off("sticky_kit:recalc",L),d.off("sticky_kit:detach",k),d.removeData("sticky_kit"),d.css({position:"",bottom:"",top:"",width:""}),D.position("position",""),C)return f==null&&((S==="left"||S==="right")&&d.insertAfter(P),P.remove()),d.removeClass(b)},i.on("touchmove",I),i.on("scroll",I),i.on("resize",L),e(document.body).on("sticky_kit:recalc",L),d.on("sticky_kit:detach",k),setTimeout(I,0)}},a=0,h=this.length;a<h;a++)t=this[a],o(e(t));return this}}).call(void 0);(function(e){e.fn.ellipsis=function(i){var n=document.documentElement.style;return"textOverflow"in n||"OTextOverflow"in n?this:this.each(function(){var r=e(this);if(r.css("overflow")=="hidden"){var t=r.html();r.width();var s=e(this.cloneNode(!0)).hide().css({position:"absolute",width:"auto",overflow:"visible","max-width":"inherit"});r.after(s);for(var o=t;o.length>0&&s.width()>r.width();)o=o.substr(0,o.length-1),s.html(o+"...");if(r.html(s.html()),s.remove(),i==!0){var a=r.width();setInterval(function(){r.width()!=a&&(a=r.width(),r.html(t),r.ellipsis())},200)}}})}})(jQuery);/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */(function(e,i){var n=e.fn.domManip,r="_tmplitem",t=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,s={},o={},a,c={key:0,data:{}},h=0,f=0,m=[];function y(C,T,E,A){var D={data:A||A===0||A===!1?A:T?T.data:{},_wrap:T?T._wrap:null,tmpl:null,parent:T||null,nodes:[],calls:x,nest:S,wrap:_,html:w,update:k};return C&&e.extend(D,C,{nodes:[],parent:T}),E&&(D.tmpl=E,D._ctnt=D._ctnt||D.tmpl(e,D),D.key=++h,(m.length?o:s)[h]=D),D}e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(C,T){e.fn[C]=function(E){var A=[],D=e(E),O,L,M,P,I=this.length===1&&this[0].parentNode;if(a=s||{},I&&I.nodeType===11&&I.childNodes.length===1&&D.length===1)D[T](this[0]),A=this;else{for(L=0,M=D.length;L<M;L++)f=L,O=(L>0?this.clone(!0):this).get(),e(D[L])[T](O),A=A.concat(O);f=0,A=this.pushStack(A,C,D.selector)}return P=a,a=null,e.tmpl.complete(P),A}}),e.fn.extend({tmpl:function(C,T,E){return e.tmpl(this[0],C,T,E)},tmplItem:function(){return e.tmplItem(this[0])},template:function(C){return e.template(C,this[0])},domManip:function(C,T,E,A){if(C[0]&&e.isArray(C[0])){for(var D=e.makeArray(arguments),O=C[0],L=O.length,M=0,P;M<L&&!(P=e.data(O[M++],"tmplItem")););P&&f&&(D[2]=function(I){e.tmpl.afterManip(this,I,E)}),n.apply(this,D)}else n.apply(this,arguments);return f=0,a||e.tmpl.complete(s),this}}),e.extend({tmpl:function(C,T,E,A){var D,O=!A;if(O)A=c,C=e.template[C]||e.template(null,C),o={};else if(!C)return C=A.tmpl,s[A.key]=A,A.nodes=[],A.wrapped&&p(A,A.wrapped),e(v(A,null,A.tmpl(e,A)));return C?(typeof T=="function"&&(T=T.call(A||{})),E&&E.wrapped&&p(E,E.wrapped),D=e.isArray(T)?e.map(T,function(L){return L?y(E,A,C,L):null}):[y(E,A,C,T)],O?e(v(A,null,D)):D):[]},tmplItem:function(C){var T;for(C instanceof e&&(C=C[0]);C&&C.nodeType===1&&!(T=e.data(C,"tmplItem"))&&(C=C.parentNode););return T||c},template:function(C,T){return T?(typeof T=="string"?T=d(T):T instanceof e&&(T=T[0]||{}),T.nodeType&&(T=e.data(T,"tmpl")||e.data(T,"tmpl",d(T.innerHTML))),typeof C=="string"?e.template[C]=T:T):C?typeof C!="string"?e.template(null,C):e.template[C]||e.template(null,t.test(C)?C:e(C)):null},encode:function(C){return(""+C).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(C){s={}},afterManip:function(T,E,A){var D=E.nodeType===11?e.makeArray(E.childNodes):E.nodeType===1?[E]:[];A.call(T,E),g(D),f++}});function v(C,T,E){var A,D=E?e.map(E,function(O){return typeof O=="string"?C.key?O.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+r+'="'+C.key+'" $2'):O:v(O,C,O._ctnt)}):C;return T?D:(D=D.join(""),D.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(O,L,M,P){A=e(M).get(),g(A),L&&(A=b(L).concat(A)),P&&(A=A.concat(b(P)))}),A||b(D))}function b(C){var T=document.createElement("div");return T.innerHTML=C,e.makeArray(T.childNodes)}function d(C){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(C).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(T,E,A,D,O,L,M){var P=e.tmpl.tag[A],I,H,j;if(!P)throw"Unknown template tag: "+A;return I=P._default||[],L&&!/\w$/.test(O)&&(O+=L,L=""),O?(O=l(O),M=M?","+l(M)+")":L?")":"",H=L?O.indexOf(".")>-1?O+l(L):"("+O+").call($item"+M:O,j=L?H:"(typeof("+O+")==='function'?("+O+").call($item):("+O+"))"):j=H=I.$1||"null",D=l(D),"');"+P[E?"close":"open"].split("$notnull_1").join(O?"typeof("+O+")!=='undefined' && ("+O+")!=null":"true").split("$1a").join(j).split("$1").join(H).split("$2").join(D||I.$2||"")+"__.push('"})+"');}return __;")}function p(C,T){C._wrap=v(C,!0,e.isArray(T)?T:[t.test(T)?T:e(T).html()]).join("")}function l(C){return C?C.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function u(C){var T=document.createElement("div");return T.appendChild(C.cloneNode(!0)),T.innerHTML}function g(C){var T="_"+f,E,A,D={},O,L,M;for(O=0,L=C.length;O<L;O++)if((E=C[O]).nodeType===1){for(A=E.getElementsByTagName("*"),M=A.length-1;M>=0;M--)P(A[M]);P(E)}function P(I){var H,j=I,U,q,X;if(X=I.getAttribute(r)){for(;j.parentNode&&(j=j.parentNode).nodeType===1&&!(H=j.getAttribute(r)););H!==X&&(j=j.parentNode?j.nodeType===11?0:j.getAttribute(r)||0:0,(q=s[X])||(q=o[X],q=y(q,s[j]||o[j]),q.key=++h,s[h]=q),f&&J(X)),I.removeAttribute(r)}else f&&(q=e.data(I,"tmplItem"))&&(J(q.key),s[q.key]=q,j=e.data(I.parentNode,"tmplItem"),j=j?j.key:0);if(q){for(U=q;U&&U.key!=j;)U.nodes.push(I),U=U.parent;delete q._ctnt,delete q._wrap,e.data(I,"tmplItem",q)}function J(te){te=te+T,q=D[te]=D[te]||y(q,s[q.parent.key+T]||q.parent)}}}function x(C,T,E,A){if(!C)return m.pop();m.push({_:C,tmpl:T,item:this,data:E,options:A})}function S(C,T,E){return e.tmpl(e.template(C),T,E,this)}function _(C,T){var E=C.options||{};return E.wrapped=T,e.tmpl(e.template(C.tmpl),C.data,E,C.item)}function w(C,T){var E=this._wrap;return e.map(e(e.isArray(E)?E.join(""):E).filter(C||"*"),function(A){return T?A.innerText||A.textContent:A.outerHTML||u(A)})}function k(){var C=this.nodes;e.tmpl(null,null,null,this).insertBefore(C[0]),e(C).remove()}})(jQuery);(function(e){e.fn.touchwipe=function(i){var n={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return i&&e.extend(n,i),this.each(function(){var r,t,s=!1;function o(){this.removeEventListener("touchmove",a),r=null,s=!1}function a(h){if(n.preventDefaultEvents&&h.preventDefault(),s){var f=h.touches[0].pageX,m=h.touches[0].pageY,y=r-f,v=t-m;Math.abs(y)>=n.min_move_x?(o(),y>0?n.wipeLeft():n.wipeRight()):Math.abs(v)>=n.min_move_y&&(o(),v>0?n.wipeDown():n.wipeUp())}}function c(h){h.touches.length==1&&(r=h.touches[0].pageX,t=h.touches[0].pageY,s=!0,this.addEventListener("touchmove",a,!1))}"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",c,!1)}),this}})(jQuery);/*!
Waypoints - 4.0.1
Copyright  2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/(function(){var e=0,i={};function n(r){if(!r)throw new Error("No options passed to Waypoint constructor");if(!r.element)throw new Error("No element option passed to Waypoint constructor");if(!r.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=n.Adapter.extend({},n.defaults,r),this.element=this.options.element,this.adapter=new n.Adapter(this.element),this.callback=r.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=n.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=n.Context.findOrCreateByElement(this.options.context),n.offsetAliases[this.options.offset]&&(this.options.offset=n.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}n.prototype.queueTrigger=function(r){this.group.queueTrigger(this,r)},n.prototype.trigger=function(r){this.enabled&&this.callback&&this.callback.apply(this,r)},n.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},n.prototype.disable=function(){return this.enabled=!1,this},n.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},n.prototype.next=function(){return this.group.next(this)},n.prototype.previous=function(){return this.group.previous(this)},n.invokeAll=function(r){var t=[];for(var s in i)t.push(i[s]);for(var o=0,a=t.length;o<a;o++)t[o][r]()},n.destroyAll=function(){n.invokeAll("destroy")},n.disableAll=function(){n.invokeAll("disable")},n.enableAll=function(){n.Context.refreshAll();for(var r in i)i[r].enabled=!0;return this},n.refreshAll=function(){n.Context.refreshAll()},n.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},n.viewportWidth=function(){return document.documentElement.clientWidth},n.adapters=[],n.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},n.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=n})();(function(){function e(o){window.setTimeout(o,1e3/60)}var i=0,n={},r=window.Waypoint,t=window.onload;function s(o){this.element=o,this.Adapter=r.Adapter,this.adapter=new this.Adapter(o),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},o.waypointContextKey=this.key,n[o.waypointContextKey]=this,i+=1,r.windowContext||(r.windowContext=!0,r.windowContext=new s(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}s.prototype.add=function(o){var a=o.options.horizontal?"horizontal":"vertical";this.waypoints[a][o.key]=o,this.refresh()},s.prototype.checkEmpty=function(){var o=this.Adapter.isEmptyObject(this.waypoints.horizontal),a=this.Adapter.isEmptyObject(this.waypoints.vertical),c=this.element==this.element.window;o&&a&&!c&&(this.adapter.off(".waypoints"),delete n[this.key])},s.prototype.createThrottledResizeHandler=function(){var o=this;function a(){o.handleResize(),o.didResize=!1}this.adapter.on("resize.waypoints",function(){o.didResize||(o.didResize=!0,r.requestAnimationFrame(a))})},s.prototype.createThrottledScrollHandler=function(){var o=this;function a(){o.handleScroll(),o.didScroll=!1}this.adapter.on("scroll.waypoints",function(){(!o.didScroll||r.isTouch)&&(o.didScroll=!0,r.requestAnimationFrame(a))})},s.prototype.handleResize=function(){r.Context.refreshAll()},s.prototype.handleScroll=function(){var o={},a={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var c in a){var h=a[c],f=h.newScroll>h.oldScroll,m=f?h.forward:h.backward;for(var y in this.waypoints[c]){var v=this.waypoints[c][y];if(v.triggerPoint!==null){var b=h.oldScroll<v.triggerPoint,d=h.newScroll>=v.triggerPoint,p=b&&d,l=!b&&!d;(p||l)&&(v.queueTrigger(m),o[v.group.id]=v.group)}}}for(var u in o)o[u].flushTriggers();this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},s.prototype.innerHeight=function(){return this.element==this.element.window?r.viewportHeight():this.adapter.innerHeight()},s.prototype.remove=function(o){delete this.waypoints[o.axis][o.key],this.checkEmpty()},s.prototype.innerWidth=function(){return this.element==this.element.window?r.viewportWidth():this.adapter.innerWidth()},s.prototype.destroy=function(){var o=[];for(var a in this.waypoints)for(var c in this.waypoints[a])o.push(this.waypoints[a][c]);for(var h=0,f=o.length;h<f;h++)o[h].destroy()},s.prototype.refresh=function(){var o=this.element==this.element.window,a=o?void 0:this.adapter.offset(),c={},h;this.handleScroll(),h={horizontal:{contextOffset:o?0:a.left,contextScroll:o?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:o?0:a.top,contextScroll:o?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var f in h){var m=h[f];for(var y in this.waypoints[f]){var v=this.waypoints[f][y],b=v.options.offset,d=v.triggerPoint,p=0,l=d==null,u,g,x,S,_;v.element!==v.element.window&&(p=v.adapter.offset()[m.offsetProp]),typeof b=="function"?b=b.apply(v):typeof b=="string"&&(b=parseFloat(b),v.options.offset.indexOf("%")>-1&&(b=Math.ceil(m.contextDimension*b/100))),u=m.contextScroll-m.contextOffset,v.triggerPoint=Math.floor(p+u-b),g=d<m.oldScroll,x=v.triggerPoint>=m.oldScroll,S=g&&x,_=!g&&!x,!l&&S?(v.queueTrigger(m.backward),c[v.group.id]=v.group):(!l&&_||l&&m.oldScroll>=v.triggerPoint)&&(v.queueTrigger(m.forward),c[v.group.id]=v.group)}}return r.requestAnimationFrame(function(){for(var w in c)c[w].flushTriggers()}),this},s.findOrCreateByElement=function(o){return s.findByElement(o)||new s(o)},s.refreshAll=function(){for(var o in n)n[o].refresh()},s.findByElement=function(o){return n[o.waypointContextKey]},window.onload=function(){t&&t(),s.refreshAll()},r.requestAnimationFrame=function(o){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e;a.call(window,o)},r.Context=s})();(function(){function e(s,o){return s.triggerPoint-o.triggerPoint}function i(s,o){return o.triggerPoint-s.triggerPoint}var n={vertical:{},horizontal:{}},r=window.Waypoint;function t(s){this.name=s.name,this.axis=s.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}t.prototype.add=function(s){this.waypoints.push(s)},t.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},t.prototype.flushTriggers=function(){for(var s in this.triggerQueues){var o=this.triggerQueues[s],a=s==="up"||s==="left";o.sort(a?i:e);for(var c=0,h=o.length;c<h;c+=1){var f=o[c];(f.options.continuous||c===o.length-1)&&f.trigger([s])}}this.clearTriggerQueues()},t.prototype.next=function(s){this.waypoints.sort(e);var o=r.Adapter.inArray(s,this.waypoints),a=o===this.waypoints.length-1;return a?null:this.waypoints[o+1]},t.prototype.previous=function(s){this.waypoints.sort(e);var o=r.Adapter.inArray(s,this.waypoints);return o?this.waypoints[o-1]:null},t.prototype.queueTrigger=function(s,o){this.triggerQueues[o].push(s)},t.prototype.remove=function(s){var o=r.Adapter.inArray(s,this.waypoints);o>-1&&this.waypoints.splice(o,1)},t.prototype.first=function(){return this.waypoints[0]},t.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},t.findOrCreate=function(s){return n[s.axis][s.name]||new t(s)},r.Group=t})();(function(){var e=window.jQuery,i=window.Waypoint;function n(r){this.$element=e(r)}e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(r,t){n.prototype[t]=function(){var s=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,s)}}),e.each(["extend","inArray","isEmptyObject"],function(r,t){n[t]=e[t]}),i.adapters.push({name:"jquery",Adapter:n}),i.Adapter=n})();(function(){var e=window.Waypoint;function i(n){return function(){var r=[],t=arguments[0];return n.isFunction(arguments[0])&&(t=n.extend({},arguments[1]),t.handler=arguments[0]),this.each(function(){var s=n.extend({},t,{element:this});typeof s.context=="string"&&(s.context=n(this).closest(s.context)[0]),r.push(new e(s))}),r}}window.jQuery&&(window.jQuery.fn.waypoint=i(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=i(window.Zepto))})();/*!
Waypoints Inview Shortcut - 4.0.1
Copyright  2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/(function(){function e(){}var i=window.Waypoint;function n(r){this.options=i.Adapter.extend({},n.defaults,r),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}n.prototype.createWaypoints=function(){for(var r={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:0},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},t=0,s=r[this.axis].length;t<s;t++){var o=r[this.axis][t];this.createWaypoint(o)}},n.prototype.createWaypoint=function(r){var t=this;this.waypoints.push(new i({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:function(s){return function(o){t.options[s[o]].call(t,o)}}(r),offset:r.offset,horizontal:this.options.horizontal}))},n.prototype.destroy=function(){for(var r=0,t=this.waypoints.length;r<t;r++)this.waypoints[r].destroy();this.waypoints=[]},n.prototype.disable=function(){for(var r=0,t=this.waypoints.length;r<t;r++)this.waypoints[r].disable()},n.prototype.enable=function(){for(var r=0,t=this.waypoints.length;r<t;r++)this.waypoints[r].enable()},n.defaults={context:window,enabled:!0,enter:e,entered:e,exit:e,exited:e},i.Inview=n})();(function(e){var i="bgAnimate",n=typeof console>"u"?function(){}:function(t){console.error(t)},r=function(t,s){this.$el=e(t),this.options=e.extend(!0,{},this.defaults,s),this._init()};r.prototype={defaults:{myCallback:null,width:1400,height:788,frames:null,reverse:!1},_init:function(){var t=this;t.$window=e(window),t.$document=e(document),t.options.frames!==null&&(t.animation=t.sprite(),window.requestAnimationFrame(t._animationLoop.bind(this)))},_animationLoop:function(){var t=this;window.requestAnimationFrame(t._animationLoop.bind(this)),t.animation.update(),t.animation.render()},_bindings:function(){},sprite:function(t){var s=this,o={},a=0,c=0,h=s.options.frames,f=s.options.frames.length||1,m=s.options.height,y=s.options.reverse,v=!1;return o.update=function(){c+=1,c>h[a]&&(c=0,a<f-1?v?a==0?(v=!1,a+=1):a-=1:a+=1:y?(v=!0,a-=1):a=0)},o.render=function(){s.$el.css("background-position","0 "+-(a*m)+"px")},o},refresh:function(){},destroy:function(){var t=this;t.$window.off("resize."+i,t._resizeDelegate)},option:function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))}},e.fn[i]=function(t){if(typeof t=="string"){for(var s=Array.prototype.slice.call(arguments,1),o=0,a=this.length;o<a;o++){var c=this[o],h=e.data(c,i);if(!h){n("cannot call methods on "+i+" prior to initialization; attempted to call '"+t+"'");continue}if(!e.isFunction(h[t])||t.charAt(0)==="_"){n("no such method '"+t+"' for "+i+" instance");continue}var f=h[t].apply(h,s);if(f!==void 0)return f}return this}else return this.each(function(){var m=e.data(this,i);m?(m.option(t||{}),m._init()):(m=new r(this,t),e.data(this,i,m))})}})(jQuery);(function(e){e.fn.popmenu=function(i){var n;return e(this).each(function(){var r=e(this),t=null,s=!1,o="#"+r.data("popmenu-id");const a=document.createElement("div");a.className="popmenu-arrow ir";let c;const h=y=>{if(r.data("popmenu-opts"))return;const v=y[0];v.parentNode!==document.body&&document.body.appendChild(v);const b=this.dataset.popmenuDirection;n={direction:Object.values($i).includes(b)&&b||$i.EAST,arrow:this.dataset.popmenuArrow!=="false"},r.data("popmenu-opts",n),n.arrow&&v.appendChild(a),v.classList.toggle("-has-arrow",n.arrow),r.on("click",function(_){_.preventDefault(),y.is(":visible")?g():(t&&(clearTimeout(t),t=null),l())}),r.mouseleave(function(){t===null&&(t=setTimeout(function(){t=null,s||g()},500))});const d=()=>{let _="".concat(Ns(n.direction),"-").concat(Os[0]);if(zi(_)==="top"){const k=y[0].offsetHeight,C=this.getBoundingClientRect();k>C.y+window.scrollY&&(_=Gt(_))}const w=[];if(Wi(_)==="y"){if(w.push(Bi(_)),zi(_)==="top"){const k=Gt(_);w.push(k),w.push(Bi(k))}}else w.push(Gt(_));Sn(this,y[0],{placement:_,middleware:[kn(Fs),Ms(({placement:k})=>Wi(k)==="x"?{padding:ct.shift.padding,crossAxis:!1,limiter:Rs({offset:({rects:T,middlewareData:E})=>E.arrow?{mainAxis:T.reference.height+a.offsetHeight*.5}:{mainAxis:T.reference.height}})}:{mainAxis:!1,crossAxis:!1}),Tn(k=>({padding:ct.flip.padding,fallbackPlacements:w})),n.arrow&&Ls({...ct.arrow,element:a})]}).then(Hs.bind(null,this,y[0],a))};function p(){try{c()}catch(_){}}const l=()=>{p(),y[0].removeAttribute("hidden"),d(),c=Cn(this,y[0],d,{ancestorScroll:!1,layoutShift:!1})};y.mouseenter(function(){s=!0,t&&(clearTimeout(t),t=null)});function u(_){s=!1,x(_),g()}y.mouseleave(u),y.find("a,.popmenu-close").click(u);function g(_){setTimeout(function(){y[0].setAttribute("hidden",""),p()},50)}function x(_){return S(_,r)?!0:y.is(":visible")?!!S(_,y):!1}function S(_,w){if(w==null||w.length===0)return!1;var k=w.offset(),C=k.left,T=k.top,E=k.left+w.outerWidth(),A=k.top+w.outerHeight();return!(_.pageX<=C||_.pageX>=E||_.pageY<=T||_.pageY>=A)}};if(e(o).length)h(e(o));else var f=1,m=setInterval(function(){f>30?(clearInterval(m),console.error("lb.popmenu.js : ERROR - Unable to find the popmenu-id "+o)):e(o).length&&(clearInterval(m),h(e(o))),f=f+1},100)})}})(jQuery);const Rr={name:"labelOffset",fn({elements:e,placement:i,rects:n,x:r,y:t}){const s=e.floating.querySelector(":scope > .smenu-selected:first-child");if(!s)return{};const o=e.reference.querySelector(":scope > label:first-child"),a=o.offsetParent,c={right:0,left:0},h={start:0,end:0};if(a===e.reference){const p=o.getBoundingClientRect(),l=e.reference.getBoundingClientRect();c.right=p.x-l.x,c.left=p.right-(l.x+n.reference.width),h.start=l.y-p.y}const f=window.getComputedStyle(o),m=window.getComputedStyle(s),y={right:parseFloat(f["padding-left"])-parseFloat(m["padding-left"]),left:-(parseFloat(f["padding-right"])-parseFloat(m["padding-right"]))},[v,b]=i.split("-"),d=parseFloat(f["padding-top"])-parseFloat(m["padding-top"]);return{x:r+y[v]+c[v],y:t+d+h[b]}}};(function(e){e.fn.selectmenu=function(i){return e(this).each(function(){var n=e(this),r=n.find("label"),t=r.data("heading")?r.data("heading")+'<i class="ir s icon"></i>':d(r),s=n.find("ul.smenu-menu").prepend(e('<li class="smenu-selected">'+t+"</li>")),o=null,a=!1,c=!1;const h=document.createElement("div");h.className="smenu-overflowsentinel",s[0].appendChild(h);const f=document.createElement("div");f.className="smenu-overflowindicator",f.innerHTML='<div class="fade"></div>',s[0].appendChild(f);const m=new IntersectionObserver((S,_)=>{S.forEach(w=>{f.classList.toggle("-scrollable",!w.isIntersecting||w.intersectionRatio<1)})},{root:s[0],rootMargin:"0px",threshold:1});let y;var v=!!n.closest(".modal").length;v&&s.addClass("-modal"),e.data(n[0],"smenu-menu",s[0]),e(this).children("label").hasClass("-lower")&&s.children(".smenu-selected").addClass("-lower"),e(this).children("label").hasClass("-bold")&&s.children(".smenu-selected").addClass("-bold"),s.appendTo(e("body"));var b=r.find(".js-smenu-label");s.on("ajax-success",".ajax-click-action",function(S,_,w,k){if(_&&_.messages&&bxd.showMessages(_.result?"success":"error",_.messages),_&&_.result){var C=e(this).parent(),T=C.siblings(".smenu-subselected");if(T.length==1){T.removeClass("smenu-subselected"),C.addClass("smenu-subselected");var E=C.data("label");E&&b.text(E)}}}),window.isTouchOnly?(n.on("click",function(){e(".smenu-menu:visible").hide(),c=!0,o&&(clearTimeout(o),o=null),c&&u()}),s.find(".smenu-selected").click(g)):(n.mouseenter(function(){c=!0,o&&(clearTimeout(o),o=null),setTimeout(function(){c&&u()},500)}),n.mouseleave(function(){c=!1,o===null&&(o=setTimeout(function(){o=null,a||x()},500))}));function d(S){var _=S.text(),w=_.replace("subscription","sub").substring(0,19);return _!==w&&(w=w.trim()+""),S.html().replace(_,w)}function p(){Sn(n[0],s[0],{placement:"right-start",middleware:[kn(({rects:S})=>-S.reference.width),Tn({crossAxis:!1,padding:ct.flip.padding,fallbackPlacements:["left-start"]}),Rr,js({apply({availableWidth:S,availableHeight:_,elements:w}){const k=_-ct.flip.padding;w.floating.style.maxHeight=k>=w.floating.scrollHeight?"":"".concat(k,"px")}})]}).then(({x:S,y:_,placement:w,middlewareData:k})=>{s[0].dataset.placement=w,Object.assign(s[0].style,{top:"0",left:"0",transform:"translate(".concat(qi(S),"px, ").concat(qi(_),"px)")})})}function l(){try{y()}catch(S){}}function u(){m.observe(h),s.show(),l(),y=Cn(n[0],s[0],p)}function g(S){a=!1,x()}s.mouseenter(function(){a=!0,o&&(clearTimeout(o),o=null)}),s.mouseleave(g),s.find("a").click(g);function x(){setTimeout(function(){s.hide(),l(),m.unobserve(h)},50)}})}})(jQuery);var kt={exports:{}};/*!
 * Masonry PACKAGED v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */var jr=kt.exports,Ki;function Nr(){return Ki||(Ki=1,function(e){(function(i,n){e.exports?e.exports=n(i,qt()):i.jQueryBridget=n(i,i.jQuery)})(window,function(n,r){var t=Array.prototype.slice,s=n.console,o=typeof s>"u"?function(){}:function(h){s.error(h)};function a(h,f,m){if(m=m||r||n.jQuery,!m)return;f.prototype.option||(f.prototype.option=function(b){m.isPlainObject(b)&&(this.options=m.extend(!0,this.options,b))}),m.fn[h]=function(b){if(typeof b=="string"){var d=t.call(arguments,1);return y(this,b,d)}return v(this,b),this};function y(b,d,p){var l,u="$()."+h+'("'+d+'")';return b.each(function(g,x){var S=m.data(x,h);if(!S){o(h+" not initialized. Cannot call methods, i.e. "+u);return}var _=S[d];if(!_||d.charAt(0)=="_"){o(u+" is not a valid method");return}var w=_.apply(S,p);l=l===void 0?w:l}),l!==void 0?l:b}function v(b,d){b.each(function(p,l){var u=m.data(l,h);u?(u.option(d),u._init()):(u=new f(l,d),m.data(l,h,u))})}c(m)}function c(h){!h||h&&h.bridget||(h.bridget=a)}return c(r||n.jQuery),a}),function(i,n){e.exports?e.exports=n():i.EvEmitter=n()}(typeof window<"u"?window:jr,function(){function i(){}var n=i.prototype;return n.on=function(r,t){if(!(!r||!t)){var s=this._events=this._events||{},o=s[r]=s[r]||[];return o.indexOf(t)==-1&&o.push(t),this}},n.once=function(r,t){if(!(!r||!t)){this.on(r,t);var s=this._onceEvents=this._onceEvents||{},o=s[r]=s[r]||{};return o[t]=!0,this}},n.off=function(r,t){var s=this._events&&this._events[r];if(!(!s||!s.length)){var o=s.indexOf(t);return o!=-1&&s.splice(o,1),this}},n.emitEvent=function(r,t){var s=this._events&&this._events[r];if(!(!s||!s.length)){s=s.slice(0),t=t||[];for(var o=this._onceEvents&&this._onceEvents[r],a=0;a<s.length;a++){var c=s[a],h=o&&o[c];h&&(this.off(r,c),delete o[c]),c.apply(this,t)}return this}},n.allOff=function(){delete this._events,delete this._onceEvents},i});/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */(function(i,n){e.exports?e.exports=n():i.getSize=n()})(window,function(){function n(v){var b=parseFloat(v),d=v.indexOf("%")==-1&&!isNaN(b);return d&&b}function r(){}var t=typeof console>"u"?r:function(v){console.error(v)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],o=s.length;function a(){for(var v={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0;b<o;b++){var d=s[b];v[d]=0}return v}function c(v){var b=getComputedStyle(v);return b||t("Style returned "+b+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),b}var h=!1,f;function m(){if(!h){h=!0;var v=document.createElement("div");v.style.width="200px",v.style.padding="1px 2px 3px 4px",v.style.borderStyle="solid",v.style.borderWidth="1px 2px 3px 4px",v.style.boxSizing="border-box";var b=document.body||document.documentElement;b.appendChild(v);var d=c(v);f=Math.round(n(d.width))==200,y.isBoxSizeOuter=f,b.removeChild(v)}}function y(v){if(m(),typeof v=="string"&&(v=document.querySelector(v)),!(!v||typeof v!="object"||!v.nodeType)){var b=c(v);if(b.display=="none")return a();var d={};d.width=v.offsetWidth,d.height=v.offsetHeight;for(var p=d.isBorderBox=b.boxSizing=="border-box",l=0;l<o;l++){var u=s[l],g=b[u],x=parseFloat(g);d[u]=isNaN(x)?0:x}var S=d.paddingLeft+d.paddingRight,_=d.paddingTop+d.paddingBottom,w=d.marginLeft+d.marginRight,k=d.marginTop+d.marginBottom,C=d.borderLeftWidth+d.borderRightWidth,T=d.borderTopWidth+d.borderBottomWidth,E=p&&f,A=n(b.width);A!==!1&&(d.width=A+(E?0:S+C));var D=n(b.height);return D!==!1&&(d.height=D+(E?0:_+T)),d.innerWidth=d.width-(S+C),d.innerHeight=d.height-(_+T),d.outerWidth=d.width+w,d.outerHeight=d.height+k,d}}return y}),function(i,n){e.exports?e.exports=n():i.matchesSelector=n()}(window,function(){var n=function(){var r=window.Element.prototype;if(r.matches)return"matches";if(r.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],s=0;s<t.length;s++){var o=t[s],a=o+"MatchesSelector";if(r[a])return a}}();return function(t,s){return t[n](s)}}),function(i,n){e.exports?e.exports=n(i,zs()):i.fizzyUIUtils=n(i,i.matchesSelector)}(window,function(n,r){var t={};t.extend=function(a,c){for(var h in c)a[h]=c[h];return a},t.modulo=function(a,c){return(a%c+c)%c};var s=Array.prototype.slice;t.makeArray=function(a){if(Array.isArray(a))return a;if(a==null)return[];var c=typeof a=="object"&&typeof a.length=="number";return c?s.call(a):[a]},t.removeFrom=function(a,c){var h=a.indexOf(c);h!=-1&&a.splice(h,1)},t.getParent=function(a,c){for(;a.parentNode&&a!=document.body;)if(a=a.parentNode,r(a,c))return a},t.getQueryElement=function(a){return typeof a=="string"?document.querySelector(a):a},t.handleEvent=function(a){var c="on"+a.type;this[c]&&this[c](a)},t.filterFindElements=function(a,c){a=t.makeArray(a);var h=[];return a.forEach(function(f){if(f instanceof HTMLElement){if(!c){h.push(f);return}r(f,c)&&h.push(f);for(var m=f.querySelectorAll(c),y=0;y<m.length;y++)h.push(m[y])}}),h},t.debounceMethod=function(a,c,h){h=h||100;var f=a.prototype[c],m=c+"Timeout";a.prototype[c]=function(){var y=this[m];clearTimeout(y);var v=arguments,b=this;this[m]=setTimeout(function(){f.apply(b,v),delete b[m]},h)}},t.docReady=function(a){var c=document.readyState;c=="complete"||c=="interactive"?setTimeout(a):document.addEventListener("DOMContentLoaded",a)},t.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(c,h,f){return h+"-"+f}).toLowerCase()};var o=n.console;return t.htmlInit=function(a,c){t.docReady(function(){var h=t.toDashed(c),f="data-"+h,m=document.querySelectorAll("["+f+"]"),y=document.querySelectorAll(".js-"+h),v=t.makeArray(m).concat(t.makeArray(y)),b=f+"-options",d=n.jQuery;v.forEach(function(p){var l=p.getAttribute(f)||p.getAttribute(b),u;try{u=l&&JSON.parse(l)}catch(x){o&&o.error("Error parsing "+f+" on "+p.className+": "+x);return}var g=new a(p,u);d&&d.data(p,c,g)})})},t}),function(i,n){e.exports?e.exports=n(Ui(),Qt()):(i.Outlayer={},i.Outlayer.Item=n(i.EvEmitter,i.getSize))}(window,function(n,r){function t(p){for(var l in p)return!1;return l=null,!0}var s=document.documentElement.style,o=typeof s.transition=="string"?"transition":"WebkitTransition",a=typeof s.transform=="string"?"transform":"WebkitTransform",c={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],h={transform:a,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property",transitionDelay:o+"Delay"};function f(p,l){p&&(this.element=p,this.layout=l,this.position={x:0,y:0},this._create())}var m=f.prototype=Object.create(n.prototype);m.constructor=f,m._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},m.handleEvent=function(p){var l="on"+p.type;this[l]&&this[l](p)},m.getSize=function(){this.size=r(this.element)},m.css=function(p){var l=this.element.style;for(var u in p){var g=h[u]||u;l[g]=p[u]}},m.getPosition=function(){var p=getComputedStyle(this.element),l=this.layout._getOption("originLeft"),u=this.layout._getOption("originTop"),g=p[l?"left":"right"],x=p[u?"top":"bottom"],S=parseFloat(g),_=parseFloat(x),w=this.layout.size;g.indexOf("%")!=-1&&(S=S/100*w.width),x.indexOf("%")!=-1&&(_=_/100*w.height),S=isNaN(S)?0:S,_=isNaN(_)?0:_,S-=l?w.paddingLeft:w.paddingRight,_-=u?w.paddingTop:w.paddingBottom,this.position.x=S,this.position.y=_},m.layoutPosition=function(){var p=this.layout.size,l={},u=this.layout._getOption("originLeft"),g=this.layout._getOption("originTop"),x=u?"paddingLeft":"paddingRight",S=u?"left":"right",_=u?"right":"left",w=this.position.x+p[x];l[S]=this.getXValue(w),l[_]="";var k=g?"paddingTop":"paddingBottom",C=g?"top":"bottom",T=g?"bottom":"top",E=this.position.y+p[k];l[C]=this.getYValue(E),l[T]="",this.css(l),this.emitEvent("layout",[this])},m.getXValue=function(p){var l=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!l?p/this.layout.size.width*100+"%":p+"px"},m.getYValue=function(p){var l=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&l?p/this.layout.size.height*100+"%":p+"px"},m._transitionTo=function(p,l){this.getPosition();var u=this.position.x,g=this.position.y,x=p==this.position.x&&l==this.position.y;if(this.setPosition(p,l),x&&!this.isTransitioning){this.layoutPosition();return}var S=p-u,_=l-g,w={};w.transform=this.getTranslate(S,_),this.transition({to:w,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},m.getTranslate=function(p,l){var u=this.layout._getOption("originLeft"),g=this.layout._getOption("originTop");return p=u?p:-p,l=g?l:-l,"translate3d("+p+"px, "+l+"px, 0)"},m.goTo=function(p,l){this.setPosition(p,l),this.layoutPosition()},m.moveTo=m._transitionTo,m.setPosition=function(p,l){this.position.x=parseFloat(p),this.position.y=parseFloat(l)},m._nonTransition=function(p){this.css(p.to),p.isCleaning&&this._removeStyles(p.to);for(var l in p.onTransitionEnd)p.onTransitionEnd[l].call(this)},m.transition=function(p){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(p);return}var l=this._transn;for(var u in p.onTransitionEnd)l.onEnd[u]=p.onTransitionEnd[u];for(u in p.to)l.ingProperties[u]=!0,p.isCleaning&&(l.clean[u]=!0);p.from&&(this.css(p.from),this.element.offsetHeight),this.enableTransition(p.to),this.css(p.to),this.isTransitioning=!0};function y(p){return p.replace(/([A-Z])/g,function(l){return"-"+l.toLowerCase()})}var v="opacity,"+y(a);m.enableTransition=function(){if(!this.isTransitioning){var p=this.layout.options.transitionDuration;p=typeof p=="number"?p+"ms":p,this.css({transitionProperty:v,transitionDuration:p,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(c,this,!1)}},m.onwebkitTransitionEnd=function(p){this.ontransitionend(p)},m.onotransitionend=function(p){this.ontransitionend(p)};var b={"-webkit-transform":"transform"};m.ontransitionend=function(p){if(p.target===this.element){var l=this._transn,u=b[p.propertyName]||p.propertyName;if(delete l.ingProperties[u],t(l.ingProperties)&&this.disableTransition(),u in l.clean&&(this.element.style[p.propertyName]="",delete l.clean[u]),u in l.onEnd){var g=l.onEnd[u];g.call(this),delete l.onEnd[u]}this.emitEvent("transitionEnd",[this])}},m.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(c,this,!1),this.isTransitioning=!1},m._removeStyles=function(p){var l={};for(var u in p)l[u]="";this.css(l)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return m.removeTransitionStyles=function(){this.css(d)},m.stagger=function(p){p=isNaN(p)?0:p,this.staggerDelay=p+"ms"},m.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},m.remove=function(){if(!o||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},m.reveal=function(){delete this.isHidden,this.css({display:""});var p=this.layout.options,l={},u=this.getHideRevealTransitionEndProperty("visibleStyle");l[u]=this.onRevealTransitionEnd,this.transition({from:p.hiddenStyle,to:p.visibleStyle,isCleaning:!0,onTransitionEnd:l})},m.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},m.getHideRevealTransitionEndProperty=function(p){var l=this.layout.options[p];if(l.opacity)return"opacity";for(var u in l)return u},m.hide=function(){this.isHidden=!0,this.css({display:""});var p=this.layout.options,l={},u=this.getHideRevealTransitionEndProperty("hiddenStyle");l[u]=this.onHideTransitionEnd,this.transition({from:p.visibleStyle,to:p.hiddenStyle,isCleaning:!0,onTransitionEnd:l})},m.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},m.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},f});/*!
 * Outlayer v2.1.1
 * the brains and guts of a layout library
 * MIT license
 */(function(i,n){e.exports?e.exports=n(i,Ui(),Qt(),Bs()):i.Outlayer=n(i,i.EvEmitter,i.getSize,i.fizzyUIUtils,i.Outlayer.Item)})(window,function(n,r,t,s,o){var a=n.console,c=n.jQuery,h=function(){},f=0,m={};function y(l,u){var g=s.getQueryElement(l);if(!g){a&&a.error("Bad element for "+this.constructor.namespace+": "+(g||l));return}this.element=g,c&&(this.$element=c(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(u);var x=++f;this.element.outlayerGUID=x,m[x]=this,this._create();var S=this._getOption("initLayout");S&&this.layout()}y.namespace="outlayer",y.Item=o,y.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var v=y.prototype;s.extend(v,r.prototype),v.option=function(l){s.extend(this.options,l)},v._getOption=function(l){var u=this.constructor.compatOptions[l];return u&&this.options[u]!==void 0?this.options[u]:this.options[l]},y.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},v._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),s.extend(this.element.style,this.options.containerStyle);var l=this._getOption("resize");l&&this.bindResize()},v.reloadItems=function(){this.items=this._itemize(this.element.children)},v._itemize=function(l){for(var u=this._filterFindItemElements(l),g=this.constructor.Item,x=[],S=0;S<u.length;S++){var _=u[S],w=new g(_,this);x.push(w)}return x},v._filterFindItemElements=function(l){return s.filterFindElements(l,this.options.itemSelector)},v.getItemElements=function(){return this.items.map(function(l){return l.element})},v.layout=function(){this._resetLayout(),this._manageStamps();var l=this._getOption("layoutInstant"),u=l!==void 0?l:!this._isLayoutInited;this.layoutItems(this.items,u),this._isLayoutInited=!0},v._init=v.layout,v._resetLayout=function(){this.getSize()},v.getSize=function(){this.size=t(this.element)},v._getMeasurement=function(l,u){var g=this.options[l],x;g?(typeof g=="string"?x=this.element.querySelector(g):g instanceof HTMLElement&&(x=g),this[l]=x?t(x)[u]:g):this[l]=0},v.layoutItems=function(l,u){l=this._getItemsForLayout(l),this._layoutItems(l,u),this._postLayout()},v._getItemsForLayout=function(l){return l.filter(function(u){return!u.isIgnored})},v._layoutItems=function(l,u){if(this._emitCompleteOnItems("layout",l),!(!l||!l.length)){var g=[];l.forEach(function(x){var S=this._getItemLayoutPosition(x);S.item=x,S.isInstant=u||x.isLayoutInstant,g.push(S)},this),this._processLayoutQueue(g)}},v._getItemLayoutPosition=function(){return{x:0,y:0}},v._processLayoutQueue=function(l){this.updateStagger(),l.forEach(function(u,g){this._positionItem(u.item,u.x,u.y,u.isInstant,g)},this)},v.updateStagger=function(){var l=this.options.stagger;if(l==null){this.stagger=0;return}return this.stagger=p(l),this.stagger},v._positionItem=function(l,u,g,x,S){x?l.goTo(u,g):(l.stagger(S*this.stagger),l.moveTo(u,g))},v._postLayout=function(){this.resizeContainer()},v.resizeContainer=function(){var l=this._getOption("resizeContainer");if(l){var u=this._getContainerSize();u&&(this._setContainerMeasure(u.width,!0),this._setContainerMeasure(u.height,!1))}},v._getContainerSize=h,v._setContainerMeasure=function(l,u){if(l!==void 0){var g=this.size;g.isBorderBox&&(l+=u?g.paddingLeft+g.paddingRight+g.borderLeftWidth+g.borderRightWidth:g.paddingBottom+g.paddingTop+g.borderTopWidth+g.borderBottomWidth),l=Math.max(l,0),this.element.style[u?"width":"height"]=l+"px"}},v._emitCompleteOnItems=function(l,u){var g=this;function x(){g.dispatchEvent(l+"Complete",null,[u])}var S=u.length;if(!u||!S){x();return}var _=0;function w(){_++,_==S&&x()}u.forEach(function(k){k.once(l,w)})},v.dispatchEvent=function(l,u,g){var x=u?[u].concat(g):g;if(this.emitEvent(l,x),c)if(this.$element=this.$element||c(this.element),u){var S=c.Event(u);S.type=l,this.$element.trigger(S,g)}else this.$element.trigger(l,g)},v.ignore=function(l){var u=this.getItem(l);u&&(u.isIgnored=!0)},v.unignore=function(l){var u=this.getItem(l);u&&delete u.isIgnored},v.stamp=function(l){l=this._find(l),l&&(this.stamps=this.stamps.concat(l),l.forEach(this.ignore,this))},v.unstamp=function(l){l=this._find(l),l&&l.forEach(function(u){s.removeFrom(this.stamps,u),this.unignore(u)},this)},v._find=function(l){if(l)return typeof l=="string"&&(l=this.element.querySelectorAll(l)),l=s.makeArray(l),l},v._manageStamps=function(){!this.stamps||!this.stamps.length||(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},v._getBoundingRect=function(){var l=this.element.getBoundingClientRect(),u=this.size;this._boundingRect={left:l.left+u.paddingLeft+u.borderLeftWidth,top:l.top+u.paddingTop+u.borderTopWidth,right:l.right-(u.paddingRight+u.borderRightWidth),bottom:l.bottom-(u.paddingBottom+u.borderBottomWidth)}},v._manageStamp=h,v._getElementOffset=function(l){var u=l.getBoundingClientRect(),g=this._boundingRect,x=t(l),S={left:u.left-g.left-x.marginLeft,top:u.top-g.top-x.marginTop,right:g.right-u.right-x.marginRight,bottom:g.bottom-u.bottom-x.marginBottom};return S},v.handleEvent=s.handleEvent,v.bindResize=function(){n.addEventListener("resize",this),this.isResizeBound=!0},v.unbindResize=function(){n.removeEventListener("resize",this),this.isResizeBound=!1},v.onresize=function(){this.resize()},s.debounceMethod(y,"onresize",100),v.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||this.layout()},v.needsResizeLayout=function(){var l=t(this.element),u=this.size&&l;return u&&l.innerWidth!==this.size.innerWidth},v.addItems=function(l){var u=this._itemize(l);return u.length&&(this.items=this.items.concat(u)),u},v.appended=function(l){var u=this.addItems(l);u.length&&(this.layoutItems(u,!0),this.reveal(u))},v.prepended=function(l){var u=this._itemize(l);if(u.length){var g=this.items.slice(0);this.items=u.concat(g),this._resetLayout(),this._manageStamps(),this.layoutItems(u,!0),this.reveal(u),this.layoutItems(g)}},v.reveal=function(l){if(this._emitCompleteOnItems("reveal",l),!(!l||!l.length)){var u=this.updateStagger();l.forEach(function(g,x){g.stagger(x*u),g.reveal()})}},v.hide=function(l){if(this._emitCompleteOnItems("hide",l),!(!l||!l.length)){var u=this.updateStagger();l.forEach(function(g,x){g.stagger(x*u),g.hide()})}},v.revealItemElements=function(l){var u=this.getItems(l);this.reveal(u)},v.hideItemElements=function(l){var u=this.getItems(l);this.hide(u)},v.getItem=function(l){for(var u=0;u<this.items.length;u++){var g=this.items[u];if(g.element==l)return g}},v.getItems=function(l){l=s.makeArray(l);var u=[];return l.forEach(function(g){var x=this.getItem(g);x&&u.push(x)},this),u},v.remove=function(l){var u=this.getItems(l);this._emitCompleteOnItems("remove",u),!(!u||!u.length)&&u.forEach(function(g){g.remove(),s.removeFrom(this.items,g)},this)},v.destroy=function(){var l=this.element.style;l.height="",l.position="",l.width="",this.items.forEach(function(g){g.destroy()}),this.unbindResize();var u=this.element.outlayerGUID;delete m[u],delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},y.data=function(l){l=s.getQueryElement(l);var u=l&&l.outlayerGUID;return u&&m[u]},y.create=function(l,u){var g=b(y);return g.defaults=s.extend({},y.defaults),s.extend(g.defaults,u),g.compatOptions=s.extend({},y.compatOptions),g.namespace=l,g.data=y.data,g.Item=b(o),s.htmlInit(g,l),c&&c.bridget&&c.bridget(l,g),g};function b(l){function u(){l.apply(this,arguments)}return u.prototype=Object.create(l.prototype),u.prototype.constructor=u,u}var d={ms:1,s:1e3};function p(l){if(typeof l=="number")return l;var u=l.match(/(^\d*\.?\d*)(\w*)/),g=u&&u[1],x=u&&u[2];if(!g.length)return 0;g=parseFloat(g);var S=d[x]||1;return g*S}return y.Item=o,y});/*!
 * Masonry v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */(function(i,n){e.exports?e.exports=n(Ws(),Qt()):i.Masonry=n(i.Outlayer,i.getSize)})(window,function(n,r){var t=n.create("masonry");t.compatOptions.fitWidth="isFitWidth";var s=t.prototype;return s._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var o=0;o<this.cols;o++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},s.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var o=this.items[0],a=o&&o.element;this.columnWidth=a&&r(a).outerWidth||this.containerWidth}var c=this.columnWidth+=this.gutter,h=this.containerWidth+this.gutter,f=h/c,m=c-h%c,y=m&&m<1?"round":"floor";f=Math[y](f),this.cols=Math.max(f,1)},s.getContainerWidth=function(){var o=this._getOption("fitWidth"),a=o?this.element.parentNode:this.element,c=r(a);this.containerWidth=c&&c.innerWidth},s._getItemLayoutPosition=function(o){o.getSize();var a=o.size.outerWidth%this.columnWidth,c=a&&a<1?"round":"ceil",h=Math[c](o.size.outerWidth/this.columnWidth);h=Math.min(h,this.cols);for(var f=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",m=this[f](h,o),y={x:this.columnWidth*m.col,y:m.y},v=m.y+o.size.outerHeight,b=h+m.col,d=m.col;d<b;d++)this.colYs[d]=v;return y},s._getTopColPosition=function(o){var a=this._getTopColGroup(o),c=Math.min.apply(Math,a);return{col:a.indexOf(c),y:c}},s._getTopColGroup=function(o){if(o<2)return this.colYs;for(var a=[],c=this.cols+1-o,h=0;h<c;h++)a[h]=this._getColGroupY(h,o);return a},s._getColGroupY=function(o,a){if(a<2)return this.colYs[o];var c=this.colYs.slice(o,o+a);return Math.max.apply(Math,c)},s._getHorizontalColPosition=function(o,a){var c=this.horizontalColIndex%this.cols,h=o>1&&c+o>this.cols;c=h?0:c;var f=a.size.outerWidth&&a.size.outerHeight;return this.horizontalColIndex=f?c+o:this.horizontalColIndex,{col:c,y:this._getColGroupY(c,o)}},s._manageStamp=function(o){var a=r(o),c=this._getElementOffset(o),h=this._getOption("originLeft"),f=h?c.left:c.right,m=f+a.outerWidth,y=Math.floor(f/this.columnWidth);y=Math.max(0,y);var v=Math.floor(m/this.columnWidth);v-=m%this.columnWidth?0:1,v=Math.min(this.cols-1,v);for(var b=this._getOption("originTop"),d=(b?c.top:c.bottom)+a.outerHeight,p=y;p<=v;p++)this.colYs[p]=Math.max(d,this.colYs[p])},s._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var o={height:this.maxY};return this._getOption("fitWidth")&&(o.width=this._getContainerFitWidth()),o},s._getContainerFitWidth=function(){for(var o=0,a=this.cols;--a&&this.colYs[a]===0;)o++;return(this.cols-o)*this.columnWidth-this.gutter},s.needsResizeLayout=function(){var o=this.containerWidth;return this.getContainerWidth(),o!=this.containerWidth},t})}(kt)),kt.exports}Nr();var Zt={exports:{}};/*!
 * hoverIntent v1.10.2 // 2020.04.28 // jQuery v1.7.0+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007-2019 Brian Cherne
 */var Gi;function Hr(){return Gi||(Gi=1,function(e){(function(i){e.exports?e.exports=i(qt()):jQuery&&!jQuery.fn.hoverIntent&&i(jQuery)})(function(i){var n={interval:100,sensitivity:6,timeout:0},r=0,t,s,o=function(f){t=f.pageX,s=f.pageY},a=function(f,m,y,v){if(Math.sqrt((y.pX-t)*(y.pX-t)+(y.pY-s)*(y.pY-s))<v.sensitivity)return m.off(y.event,o),delete y.timeoutId,y.isActive=!0,f.pageX=t,f.pageY=s,delete y.pX,delete y.pY,v.over.apply(m[0],[f]);y.pX=t,y.pY=s,y.timeoutId=setTimeout(function(){a(f,m,y,v)},v.interval)},c=function(f,m,y,v){var b=m.data("hoverIntent");return b&&delete b[y.id],v.apply(m[0],[f])},h=function(f){return typeof f=="function"};i.fn.hoverIntent=function(f,m,y){var v=r++,b=i.extend({},n);i.isPlainObject(f)?(b=i.extend(b,f),h(b.out)||(b.out=b.over)):h(m)?b=i.extend(b,{over:f,out:m,selector:y}):b=i.extend(b,{over:f,out:f,selector:m});var d=function(p){var l=i.extend({},p),u=i(this),g=u.data("hoverIntent");g||u.data("hoverIntent",g={});var x=g[v];x||(g[v]=x={id:v}),x.timeoutId&&(x.timeoutId=clearTimeout(x.timeoutId));var S=x.event="mousemove.hoverIntent.hoverIntent"+v;if(p.type==="mouseenter"){if(x.isActive)return;x.pX=l.pageX,x.pY=l.pageY,u.off(S,o).on(S,o),x.timeoutId=setTimeout(function(){a(l,u,x,b)},b.interval)}else{if(!x.isActive)return;u.off(S,o),x.timeoutId=setTimeout(function(){c(l,u,x,b.out)},b.timeout)}};return this.on({"mouseenter.hoverIntent":d,"mouseleave.hoverIntent":d},b.selector)}})}(Zt)),Zt.exports}Hr();/*!
 * jQuery UI Draggable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */(function(e,i){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(n){var r=this.options;return this.helper||r.disabled||e(n.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(n),!this.handle)?!1:(e(r.iframeFix===!0?"iframe":r.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0)},_mouseStart:function(n){var r=this.options;return this.helper=this._createHelper(n),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:n.pageX-this.offset.left,top:n.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(n),this.originalPageX=n.pageX,this.originalPageY=n.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this._setContainment(),this._trigger("start",n)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,n),this._mouseDrag(n,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,n),!0)},_mouseDrag:function(n,r){if(this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(n),this.positionAbs=this._convertPositionTo("absolute"),!r){var t=this._uiHash();if(this._trigger("drag",n,t)===!1)return this._mouseUp({}),!1;this.position=t.position}return(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,n),!1},_mouseStop:function(n){var r=this,t=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(t=e.ui.ddmanager.drop(this,n)),this.dropped&&(t=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])||(this.options.revert==="invalid"&&!t||this.options.revert==="valid"&&t||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,t)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",n)!==!1&&r._clear()}):this._trigger("stop",n)!==!1&&this._clear()),!1},_mouseUp:function(n){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,n),e.ui.mouse.prototype._mouseUp.call(this,n)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(n){return this.options.handle?!!e(n.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(n){var r=this.options,t=e.isFunction(r.helper)?e(r.helper.apply(this.element[0],[n])):r.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return t.parents("body").length||t.appendTo(r.appendTo==="parent"?this.element[0].parentNode:r.appendTo),t[0]!==this.element[0]&&!/(fixed|absolute)/.test(t.css("position"))&&t.css("position","absolute"),t},_adjustOffsetFromHelper:function(n){typeof n=="string"&&(n=n.split(" ")),e.isArray(n)&&(n={left:+n[0],top:+n[1]||0}),"left"in n&&(this.offset.click.left=n.left+this.margins.left),"right"in n&&(this.offset.click.left=this.helperProportions.width-n.right+this.margins.left),"top"in n&&(this.offset.click.top=n.top+this.margins.top),"bottom"in n&&(this.offset.click.top=this.helperProportions.height-n.bottom+this.margins.top)},_getParentOffset:function(){var n=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(n.left+=this.scrollParent.scrollLeft(),n.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)&&(n={top:0,left:0}),{top:n.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:n.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var n,r,t,s=this.options;if(!s.containment){this.containment=null;return}if(s.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment.constructor===Array){this.containment=s.containment;return}s.containment==="parent"&&(s.containment=this.helper[0].parentNode),r=e(s.containment),t=r[0],t&&(n=r.css("overflow")!=="hidden",this.containment=[(parseInt(r.css("borderLeftWidth"),10)||0)+(parseInt(r.css("paddingLeft"),10)||0),(parseInt(r.css("borderTopWidth"),10)||0)+(parseInt(r.css("paddingTop"),10)||0),(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(r.css("borderRightWidth"),10)||0)-(parseInt(r.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(r.css("borderBottomWidth"),10)||0)-(parseInt(r.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=r)},_convertPositionTo:function(n,r){r||(r=this.position);var t=n==="absolute"?1:-1,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:r.top+this.offset.relative.top*t+this.offset.parent.top*t-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*t,left:r.left+this.offset.relative.left*t+this.offset.parent.left*t-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*t}},_generatePosition:function(n){var r,t,s,o,a=this.options,c=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=n.pageX,f=n.pageY;return this.offset.scroll||(this.offset.scroll={top:c.scrollTop(),left:c.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(t=this.relative_container.offset(),r=[this.containment[0]+t.left,this.containment[1]+t.top,this.containment[2]+t.left,this.containment[3]+t.top]):r=this.containment,n.pageX-this.offset.click.left<r[0]&&(h=r[0]+this.offset.click.left),n.pageY-this.offset.click.top<r[1]&&(f=r[1]+this.offset.click.top),n.pageX-this.offset.click.left>r[2]&&(h=r[2]+this.offset.click.left),n.pageY-this.offset.click.top>r[3]&&(f=r[3]+this.offset.click.top)),a.grid&&(s=a.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,f=r?s-this.offset.click.top>=r[1]||s-this.offset.click.top>r[3]?s:s-this.offset.click.top>=r[1]?s-a.grid[1]:s+a.grid[1]:s,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=r?o-this.offset.click.left>=r[0]||o-this.offset.click.left>r[2]?o:o-this.offset.click.left>=r[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(n,r,t){return t=t||this._uiHash(),e.ui.plugin.call(this,n,[r,t]),n==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,n,r,t)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(n,r){var t=e(this).data("ui-draggable"),s=t.options,o=e.extend({},r,{item:t.element});t.sortables=[],e(s.connectToSortable).each(function(){var a=e.data(this,"ui-sortable");a&&!a.options.disabled&&(t.sortables.push({instance:a,shouldRevert:a.options.revert}),a.refreshPositions(),a._trigger("activate",n,o))})},stop:function(n,r){var t=e(this).data("ui-draggable"),s=e.extend({},r,{item:t.element});e.each(t.sortables,function(){this.instance.isOver?(this.instance.isOver=0,t.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(n),this.instance.options.helper=this.instance.options._helper,t.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",n,s))})},drag:function(n,r){var t=e(this).data("ui-draggable"),s=this;e.each(t.sortables,function(){var o=!1,a=this;this.instance.positionAbs=t.positionAbs,this.instance.helperProportions=t.helperProportions,this.instance.offset.click=t.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(t.sortables,function(){return this.instance.positionAbs=t.positionAbs,this.instance.helperProportions=t.helperProportions,this.instance.offset.click=t.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return r.helper[0]},n.target=this.instance.currentItem[0],this.instance._mouseCapture(n,!0),this.instance._mouseStart(n,!0,!0),this.instance.offset.click.top=t.offset.click.top,this.instance.offset.click.left=t.offset.click.left,this.instance.offset.parent.left-=t.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=t.offset.parent.top-this.instance.offset.parent.top,t._trigger("toSortable",n),t.dropped=this.instance.element,t.currentItem=t.element,this.instance.fromOutside=t),this.instance.currentItem&&this.instance._mouseDrag(n)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",n,this.instance._uiHash(this.instance)),this.instance._mouseStop(n,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),t._trigger("fromSortable",n),t.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var n=e("body"),r=e(this).data("ui-draggable").options;n.css("cursor")&&(r._cursor=n.css("cursor")),n.css("cursor",r.cursor)},stop:function(){var n=e(this).data("ui-draggable").options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(n,r){var t=e(r.helper),s=e(this).data("ui-draggable").options;t.css("opacity")&&(s._opacity=t.css("opacity")),t.css("opacity",s.opacity)},stop:function(n,r){var t=e(this).data("ui-draggable").options;t._opacity&&e(r.helper).css("opacity",t._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var n=e(this).data("ui-draggable");n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"&&(n.overflowOffset=n.scrollParent.offset())},drag:function(n){var r=e(this).data("ui-draggable"),t=r.options,s=!1;r.scrollParent[0]!==document&&r.scrollParent[0].tagName!=="HTML"?((!t.axis||t.axis!=="x")&&(r.overflowOffset.top+r.scrollParent[0].offsetHeight-n.pageY<t.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+t.scrollSpeed:n.pageY-r.overflowOffset.top<t.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-t.scrollSpeed)),(!t.axis||t.axis!=="y")&&(r.overflowOffset.left+r.scrollParent[0].offsetWidth-n.pageX<t.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+t.scrollSpeed:n.pageX-r.overflowOffset.left<t.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-t.scrollSpeed))):((!t.axis||t.axis!=="x")&&(n.pageY-e(document).scrollTop()<t.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-t.scrollSpeed):e(window).height()-(n.pageY-e(document).scrollTop())<t.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+t.scrollSpeed))),(!t.axis||t.axis!=="y")&&(n.pageX-e(document).scrollLeft()<t.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-t.scrollSpeed):e(window).width()-(n.pageX-e(document).scrollLeft())<t.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+t.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!t.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,n)}}),e.ui.plugin.add("draggable","snap",{start:function(){var n=e(this).data("ui-draggable"),r=n.options;n.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),s=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:s.top,left:s.left})})},drag:function(n,r){var t,s,o,a,c,h,f,m,y,v,b=e(this).data("ui-draggable"),d=b.options,p=d.snapTolerance,l=r.offset.left,u=l+b.helperProportions.width,g=r.offset.top,x=g+b.helperProportions.height;for(y=b.snapElements.length-1;y>=0;y--){if(c=b.snapElements[y].left,h=c+b.snapElements[y].width,f=b.snapElements[y].top,m=f+b.snapElements[y].height,u<c-p||l>h+p||x<f-p||g>m+p||!e.contains(b.snapElements[y].item.ownerDocument,b.snapElements[y].item)){b.snapElements[y].snapping&&b.options.snap.release&&b.options.snap.release.call(b.element,n,e.extend(b._uiHash(),{snapItem:b.snapElements[y].item})),b.snapElements[y].snapping=!1;continue}d.snapMode!=="inner"&&(t=Math.abs(f-x)<=p,s=Math.abs(m-g)<=p,o=Math.abs(c-u)<=p,a=Math.abs(h-l)<=p,t&&(r.position.top=b._convertPositionTo("relative",{top:f-b.helperProportions.height,left:0}).top-b.margins.top),s&&(r.position.top=b._convertPositionTo("relative",{top:m,left:0}).top-b.margins.top),o&&(r.position.left=b._convertPositionTo("relative",{top:0,left:c-b.helperProportions.width}).left-b.margins.left),a&&(r.position.left=b._convertPositionTo("relative",{top:0,left:h}).left-b.margins.left)),v=t||s||o||a,d.snapMode!=="outer"&&(t=Math.abs(f-g)<=p,s=Math.abs(m-x)<=p,o=Math.abs(c-l)<=p,a=Math.abs(h-u)<=p,t&&(r.position.top=b._convertPositionTo("relative",{top:f,left:0}).top-b.margins.top),s&&(r.position.top=b._convertPositionTo("relative",{top:m-b.helperProportions.height,left:0}).top-b.margins.top),o&&(r.position.left=b._convertPositionTo("relative",{top:0,left:c}).left-b.margins.left),a&&(r.position.left=b._convertPositionTo("relative",{top:0,left:h-b.helperProportions.width}).left-b.margins.left)),!b.snapElements[y].snapping&&(t||s||o||a||v)&&b.options.snap.snap&&b.options.snap.snap.call(b.element,n,e.extend(b._uiHash(),{snapItem:b.snapElements[y].item})),b.snapElements[y].snapping=t||s||o||a||v}}}),e.ui.plugin.add("draggable","stack",{start:function(){var n,r=this.data("ui-draggable").options,t=e.makeArray(e(r.stack)).sort(function(s,o){return(parseInt(e(s).css("zIndex"),10)||0)-(parseInt(e(o).css("zIndex"),10)||0)});t.length&&(n=parseInt(e(t[0]).css("zIndex"),10)||0,e(t).each(function(s){e(this).css("zIndex",n+s)}),this.css("zIndex",n+t.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(n,r){var t=e(r.helper),s=e(this).data("ui-draggable").options;t.css("zIndex")&&(s._zIndex=t.css("zIndex")),t.css("zIndex",s.zIndex)},stop:function(n,r){var t=e(this).data("ui-draggable").options;t._zIndex&&e(r.helper).css("zIndex",t._zIndex)}})})(jQuery);/*!
 * jQuery UI Droppable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */(function(e,i){function n(r,t,s){return r>t&&r<t+s}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var r=this.options,t=r.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(t)?t:function(s){return s.is(t)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[r.scope]=e.ui.ddmanager.droppables[r.scope]||[],e.ui.ddmanager.droppables[r.scope].push(this),r.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var r=0,t=e.ui.ddmanager.droppables[this.options.scope];r<t.length;r++)t[r]===this&&t.splice(r,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(r,t){r==="accept"&&(this.accept=e.isFunction(t)?t:function(s){return s.is(t)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(r){var t=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),t&&this._trigger("activate",r,this.ui(t))},_deactivate:function(r){var t=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),t&&this._trigger("deactivate",r,this.ui(t))},_over:function(r){var t=e.ui.ddmanager.current;!t||(t.currentItem||t.element)[0]===this.element[0]||this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",r,this.ui(t)))},_out:function(r){var t=e.ui.ddmanager.current;!t||(t.currentItem||t.element)[0]===this.element[0]||this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",r,this.ui(t)))},_drop:function(r,t){var s=t||e.ui.ddmanager.current,o=!1;return!s||(s.currentItem||s.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var a=e.data(this,"ui-droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope===s.options.scope&&a.accept.call(a.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(a,{offset:a.element.offset()}),a.options.tolerance))return o=!0,!1}),o)?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",r,this.ui(s)),this.element):!1},ui:function(r){return{draggable:r.currentItem||r.element,helper:r.helper,position:r.position,offset:r.positionAbs}}}),e.ui.intersect=function(r,t,s){if(!t.offset)return!1;var o,a,c=(r.positionAbs||r.position.absolute).left,h=c+r.helperProportions.width,f=(r.positionAbs||r.position.absolute).top,m=f+r.helperProportions.height,y=t.offset.left,v=y+t.proportions.width,b=t.offset.top,d=b+t.proportions.height;switch(s){case"fit":return y<=c&&h<=v&&b<=f&&m<=d;case"intersect":return y<c+r.helperProportions.width/2&&h-r.helperProportions.width/2<v&&b<f+r.helperProportions.height/2&&m-r.helperProportions.height/2<d;case"pointer":return o=(r.positionAbs||r.position.absolute).left+(r.clickOffset||r.offset.click).left,a=(r.positionAbs||r.position.absolute).top+(r.clickOffset||r.offset.click).top,n(a,b,t.proportions.height)&&n(o,y,t.proportions.width);case"touch":return(f>=b&&f<=d||m>=b&&m<=d||f<b&&m>d)&&(c>=y&&c<=v||h>=y&&h<=v||c<y&&h>v);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(r,t){var s,o,a=e.ui.ddmanager.droppables[r.options.scope]||[],c=t?t.type:null,h=(r.currentItem||r.element).find(":data(ui-droppable)").addBack();e:for(s=0;s<a.length;s++)if(!(a[s].options.disabled||r&&!a[s].accept.call(a[s].element[0],r.currentItem||r.element))){for(o=0;o<h.length;o++)if(h[o]===a[s].element[0]){a[s].proportions.height=0;continue e}a[s].visible=a[s].element.css("display")!=="none",a[s].visible&&(c==="mousedown"&&a[s]._activate.call(a[s],t),a[s].offset=a[s].element.offset(),a[s].proportions={width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight})}},drop:function(r,t){var s=!1;return e.each((e.ui.ddmanager.droppables[r.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(r,this,this.options.tolerance)&&(s=this._drop.call(this,t)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],r.currentItem||r.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))}),s},dragStart:function(r,t){r.element.parentsUntil("body").bind("scroll.droppable",function(){r.options.refreshPositions||e.ui.ddmanager.prepareOffsets(r,t)})},drag:function(r,t){r.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(r,t),e.each(e.ui.ddmanager.droppables[r.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var s,o,a,c=e.ui.intersect(r,this,this.options.tolerance),h=!c&&this.isover?"isout":c&&!this.isover?"isover":null;h&&(this.options.greedy&&(o=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===o}),a.length&&(s=e.data(a[0],"ui-droppable"),s.greedyChild=h==="isover")),s&&h==="isover"&&(s.isover=!1,s.isout=!0,s._out.call(s,t)),this[h]=!0,this[h==="isout"?"isover":"isout"]=!1,this[h==="isover"?"_over":"_out"].call(this,t),s&&h==="isout"&&(s.isout=!1,s.isover=!0,s._over.call(s,t)))}})},dragStop:function(r,t){r.element.parentsUntil("body").unbind("scroll.droppable"),r.options.refreshPositions||e.ui.ddmanager.prepareOffsets(r,t)}}})(jQuery);/*!
 * jQuery UI Sortable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */(function(e,i){function n(t,s,o){return t>s&&t<s+o}function r(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?t.axis==="x"||r(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,s){t==="disabled"?(this.options[t]=s,this.widget().toggleClass("ui-sortable-disabled",!!s)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,s){var o=null,a=!1,c=this;return this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,c.widgetName+"-item")===c)return o=e(this),!1}),e.data(t.target,c.widgetName+"-item")===c&&(o=e(t.target)),!o)||this.options.handle&&!s&&(e(this.options.handle,o).find("*").addBack().each(function(){this===t.target&&(a=!0)}),!a)?!1:(this.currentItem=o,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,s,o){var a,c,h=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),h.containment&&this._setContainment(),h.cursor&&h.cursor!=="auto"&&(c=this.document.find("body"),this.storedCursor=c.css("cursor"),c.css("cursor",h.cursor),this.storedStylesheet=e("<style>*{ cursor: "+h.cursor+" !important; }</style>").appendTo(c)),h.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",h.opacity)),h.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",h.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!o)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!h.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var s,o,a,c,h=this.options,f=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<h.scrollSensitivity?this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+h.scrollSpeed:t.pageY-this.overflowOffset.top<h.scrollSensitivity&&(this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-h.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<h.scrollSensitivity?this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+h.scrollSpeed:t.pageX-this.overflowOffset.left<h.scrollSensitivity&&(this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft-h.scrollSpeed)):(t.pageY-e(document).scrollTop()<h.scrollSensitivity?f=e(document).scrollTop(e(document).scrollTop()-h.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<h.scrollSensitivity&&(f=e(document).scrollTop(e(document).scrollTop()+h.scrollSpeed)),t.pageX-e(document).scrollLeft()<h.scrollSensitivity?f=e(document).scrollLeft(e(document).scrollLeft()-h.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<h.scrollSensitivity&&(f=e(document).scrollLeft(e(document).scrollLeft()+h.scrollSpeed))),f!==!1&&e.ui.ddmanager&&!h.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),s=this.items.length-1;s>=0;s--)if(o=this.items[s],a=o.item[0],c=this._intersectsWithPointer(o),!!c&&o.instance===this.currentContainer&&a!==this.currentItem[0]&&this.placeholder[c===1?"next":"prev"]()[0]!==a&&!e.contains(this.placeholder[0],a)&&(this.options.type!=="semi-dynamic"||!e.contains(this.element[0],a))){if(this.direction=c===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(o))this._rearrange(t,o);else break;this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,s){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var o=this,a=this.placeholder.offset(),c=this.options.axis,h={};(!c||c==="x")&&(h.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),(!c||c==="y")&&(h.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(h,parseInt(this.options.revert,10)||500,function(){o._clear(t)})}else this._clear(t,s);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var s=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},e(s).each(function(){var a=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);a&&o.push((t.key||a[1]+"[]")+"="+(t.key&&t.expression?a[1]:a[2]))}),!o.length&&t.key&&o.push(t.key+"="),o.join("&")},toArray:function(t){var s=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},s.each(function(){o.push(e(t.item||this).attr(t.attribute||"id")||"")}),o},_intersectsWith:function(t){var s=this.positionAbs.left,o=s+this.helperProportions.width,a=this.positionAbs.top,c=a+this.helperProportions.height,h=t.left,f=h+t.width,m=t.top,y=m+t.height,v=this.offset.click.top,b=this.offset.click.left,d=this.options.axis==="x"||a+v>m&&a+v<y,p=this.options.axis==="y"||s+b>h&&s+b<f,l=d&&p;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?l:h<s+this.helperProportions.width/2&&o-this.helperProportions.width/2<f&&m<a+this.helperProportions.height/2&&c-this.helperProportions.height/2<y},_intersectsWithPointer:function(t){var s=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,t.top,t.height),o=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,t.left,t.width),a=s&&o,c=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return a?this.floating?h&&h==="right"||c==="down"?2:1:c&&(c==="down"?2:1):!1},_intersectsWithSides:function(t){var s=n(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),o=n(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),a=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?c==="right"&&o||c==="left"&&!o:a&&(a==="down"&&s||a==="up"&&!s)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var s,o,a,c,h=[],f=[],m=this._connectWith();if(m&&t)for(s=m.length-1;s>=0;s--)for(a=e(m[s]),o=a.length-1;o>=0;o--)c=e.data(a[o],this.widgetFullName),c&&c!==this&&!c.options.disabled&&f.push([e.isFunction(c.options.items)?c.options.items.call(c.element):e(c.options.items,c.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),c]);for(f.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=f.length-1;s>=0;s--)f[s][0].each(function(){h.push(this)});return e(h)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(s){for(var o=0;o<t.length;o++)if(t[o]===s.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var s,o,a,c,h,f,m,y,v=this.items,b=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(s=d.length-1;s>=0;s--)for(a=e(d[s]),o=a.length-1;o>=0;o--)c=e.data(a[o],this.widgetFullName),c&&c!==this&&!c.options.disabled&&(b.push([e.isFunction(c.options.items)?c.options.items.call(c.element[0],t,{item:this.currentItem}):e(c.options.items,c.element),c]),this.containers.push(c));for(s=b.length-1;s>=0;s--)for(h=b[s][1],f=b[s][0],o=0,y=f.length;o<y;o++)m=e(f[o]),m.data(this.widgetName+"-item",h),v.push({item:m,instance:h,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var s,o,a,c;for(s=this.items.length-1;s>=0;s--)o=this.items[s],!(o.instance!==this.currentContainer&&this.currentContainer&&o.item[0]!==this.currentItem[0])&&(a=this.options.toleranceElement?e(this.options.toleranceElement,o.item):o.item,t||(o.width=a.outerWidth(),o.height=a.outerHeight()),c=a.offset(),o.left=c.left,o.top=c.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(s=this.containers.length-1;s>=0;s--)c=this.containers[s].element.offset(),this.containers[s].containerCache.left=c.left,this.containers[s].containerCache.top=c.top,this.containers[s].containerCache.width=this.containers[s].element.outerWidth(),this.containers[s].containerCache.height=this.containers[s].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var s,o=t.options;(!o.placeholder||o.placeholder.constructor===String)&&(s=o.placeholder,o.placeholder={element:function(){var a=t.currentItem[0].nodeName.toLowerCase(),c=e("<"+a+">",t.document[0]).addClass(s||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return a==="tr"?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(c)}):a==="img"&&c.attr("src",t.currentItem.attr("src")),s||c.css("visibility","hidden"),c},update:function(a,c){s&&!o.forcePlaceholderSize||(c.height()||c.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),c.width()||c.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(o.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),o.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var s,o,a,c,h,f,m,y,v,b,d=null,p=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(d&&e.contains(this.containers[s].element[0],d.element[0]))continue;d=this.containers[s],p=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(d)if(this.containers.length===1)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(a=1e4,c=null,b=d.floating||r(this.currentItem),h=b?"left":"top",f=b?"width":"height",m=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)e.contains(this.containers[p].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(b&&!n(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height)||(y=this.items[o].item.offset()[h],v=!1,Math.abs(y-m)>Math.abs(y+this.items[o][f]-m)&&(v=!0,y+=this.items[o][f]),Math.abs(y-m)<a&&(a=Math.abs(y-m),c=this.items[o],this.direction=v?"up":"down")));if(!c&&!this.options.dropOnEmpty||this.currentContainer===this.containers[p])return;c?this._rearrange(t,c,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var s=this.options,o=e.isFunction(s.helper)?e(s.helper.apply(this.element[0],[t,this.currentItem])):s.helper==="clone"?this.currentItem.clone():this.currentItem;return o.parents("body").length||e(s.appendTo!=="parent"?s.appendTo:this.currentItem[0].parentNode)[0].appendChild(o[0]),o[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!o[0].style.width||s.forceHelperSize)&&o.width(this.currentItem.width()),(!o[0].style.height||s.forceHelperSize)&&o.height(this.currentItem.height()),o},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,s,o,a=this.options;a.containment==="parent"&&(a.containment=this.helper[0].parentNode),(a.containment==="document"||a.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(a.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(a.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],s=e(a.containment).offset(),o=e(t).css("overflow")!=="hidden",this.containment=[s.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,s.left+(o?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(o?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,s){s||(s=this.position);var o=t==="absolute"?1:-1,a=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(a[0].tagName);return{top:s.top+this.offset.relative.top*o+this.offset.parent.top*o-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():c?0:a.scrollTop())*o,left:s.left+this.offset.relative.left*o+this.offset.parent.left*o-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():c?0:a.scrollLeft())*o}},_generatePosition:function(t){var s,o,a=this.options,c=t.pageX,h=t.pageY,f=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,m=/(html|body)/i.test(f[0].tagName);return this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(c=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(c=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),a.grid&&(s=this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1],h=this.containment?s-this.offset.click.top>=this.containment[1]&&s-this.offset.click.top<=this.containment[3]?s:s-this.offset.click.top>=this.containment[1]?s-a.grid[1]:s+a.grid[1]:s,o=this.originalPageX+Math.round((c-this.originalPageX)/a.grid[0])*a.grid[0],c=this.containment?o-this.offset.click.left>=this.containment[0]&&o-this.offset.click.left<=this.containment[2]?o:o-this.offset.click.left>=this.containment[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():m?0:f.scrollTop()),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():m?0:f.scrollLeft())}},_rearrange:function(t,s,o,a){o?o[0].appendChild(this.placeholder[0]):s.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?s.item[0]:s.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var c=this.counter;this._delay(function(){c===this.counter&&this.refreshPositions(!a)})},_clear:function(t,s){this.reverting=!1;var o,a=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(o in this._storedCSS)(this._storedCSS[o]==="auto"||this._storedCSS[o]==="static")&&(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!s&&a.push(function(c){this._trigger("receive",c,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!s&&a.push(function(c){this._trigger("update",c,this._uiHash())}),this!==this.currentContainer&&(s||(a.push(function(c){this._trigger("remove",c,this._uiHash())}),a.push((function(c){return function(h){c._trigger("receive",h,this._uiHash(this))}}).call(this,this.currentContainer)),a.push((function(c){return function(h){c._trigger("update",h,this._uiHash(this))}}).call(this,this.currentContainer)))),o=this.containers.length-1;o>=0;o--)s||a.push((function(c){return function(h){c._trigger("deactivate",h,this._uiHash(this))}}).call(this,this.containers[o])),this.containers[o].containerCache.over&&(a.push((function(c){return function(h){c._trigger("out",h,this._uiHash(this))}}).call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!s){for(this._trigger("beforeStop",t,this._uiHash()),o=0;o<a.length;o++)a[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(s||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!s){for(o=0;o<a.length;o++)a[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var s=t||this;return{helper:s.helper,placeholder:s.placeholder||e([]),position:s.position,originalPosition:s.originalPosition,offset:s.positionAbs,item:s.currentItem,sender:t?t.element:null}}})})(jQuery);$.fn.clwidont=function(){function e(i){for(var n=$(i).contents(),r=n.length-1;r>=0;r--){var t=n[r].nodeType;if(t==3){var s=n[r].nodeValue,o=s.search(/\s\S*$/);if(o!=-1)return n[r].nodeValue=s.substring(0,o)+""+s.substring(o+1),!0}else if(t==1&&e(n[r]))return!0}}$(this).each(function(){e(this)})};jQuery.fn.clequalize=function(e,i){var n=0,r=0,t=$(this),s={init:function(){var o=t.parent().data("eqcols");o!=null&&(i=o),i!=null&&t.length>i?s.step():s.adjust()},step:function(){var o;r==0?o=t.filter(":lt("+i+")"):(o=t.filter(":gt("+(r-1)+")"),o=o.filter(":lt("+i+")")),s.setmax(o),o.css(""+e,n),n=0,r<t.length-i?s.step():(o=t.filter(":gt("+(r-1)+")"),s.setmax(o),o.css(""+e,n))},setmax:function(o){$(o).each(function(){var a=s.value(this,e);a>n&&(n=a),r++})},adjust:function(){t.each(function(){var o=s.value(this,e);o>n&&(n=o)}),t.css(""+e,n)},value:function(o){if(e=="height")return $(o).height();if(e=="width")return $(o).width()}};s.init()};var Tt={exports:{}};/*!
 * typeahead.js 1.4.2
 * https://github.com/corejavascript/typeahead.js
 * Copyright 2013-2020 Twitter, Inc. and other contributors; Licensed MIT
 */var Fr=Tt.exports,Qi;function zr(){return Qi||(Qi=1,function(e){(function(i,n){e.exports?e.exports=n(qt()):i.Bloodhound=n(i.jQuery)})(Fr,function(i){var n=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(v){return!v||/^\s*$/.test(v)},escapeRegExChars:function(v){return v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(v){return typeof v=="string"},isNumber:function(v){return typeof v=="number"},isArray:i.isArray,isFunction:i.isFunction,isObject:i.isPlainObject,isUndefined:function(v){return typeof v>"u"},isElement:function(v){return!!(v&&v.nodeType===1)},isJQuery:function(v){return v instanceof i},toStr:function(b){return n.isUndefined(b)||b===null?"":b+""},bind:i.proxy,each:function(v,b){i.each(v,d);function d(p,l){return b(l,p)}},map:i.map,filter:i.grep,every:function(v,b){var d=!0;return v?(i.each(v,function(p,l){if(!(d=b.call(null,l,p,v)))return!1}),!!d):d},some:function(v,b){var d=!1;return v?(i.each(v,function(p,l){if(d=b.call(null,l,p,v))return!1}),!!d):d},mixin:i.extend,identity:function(v){return v},clone:function(v){return i.extend(!0,{},v)},getIdGenerator:function(){var v=0;return function(){return v++}},templatify:function(b){return i.isFunction(b)?b:d;function d(){return String(b)}},defer:function(v){setTimeout(v,0)},debounce:function(v,b,d){var p,l;return function(){var u=this,g=arguments,x,S;return x=function(){p=null,d||(l=v.apply(u,g))},S=d&&!p,clearTimeout(p),p=setTimeout(x,b),S&&(l=v.apply(u,g)),l}},throttle:function(v,b){var d,p,l,u,g,x;return g=0,x=function(){g=new Date,l=null,u=v.apply(d,p)},function(){var S=new Date,_=b-(S-g);return d=this,p=arguments,_<=0?(clearTimeout(l),l=null,g=S,u=v.apply(d,p)):l||(l=setTimeout(x,_)),u}},stringify:function(v){return n.isString(v)?v:JSON.stringify(v)},guid:function(){function v(b){var d=(Math.random().toString(16)+"000000000").substr(2,8);return b?"-"+d.substr(0,4)+"-"+d.substr(4,4):d}return"tt-"+v()+v(!0)+v(!0)+v()},noop:function(){}}}(),r="1.4.2",t=function(){return{nonword:b,whitespace:v,ngram:d,obj:{nonword:p(b),whitespace:p(v),ngram:p(d)}};function v(l){return l=n.toStr(l),l?l.split(/\s+/):[]}function b(l){return l=n.toStr(l),l?l.split(/\W+/):[]}function d(l){l=n.toStr(l);var u=[],g="";return n.each(l.split(""),function(x){x.match(/\s+/)?g="":(u.push(g+x),g+=x)}),u}function p(l){return function(g){return g=n.isArray(g)?g:[].slice.call(arguments,0),function(S){var _=[];return n.each(g,function(w){_=_.concat(l(n.toStr(S[w])))}),_}}}}(),s=function(){function v(p){this.maxSize=n.isNumber(p)?p:100,this.reset(),this.maxSize<=0&&(this.set=this.get=i.noop)}n.mixin(v.prototype,{set:function(l,u){var g=this.list.tail,x;this.size>=this.maxSize&&(this.list.remove(g),delete this.hash[g.key],this.size--),(x=this.hash[l])?(x.val=u,this.list.moveToFront(x)):(x=new d(l,u),this.list.add(x),this.hash[l]=x,this.size++)},get:function(l){var u=this.hash[l];if(u)return this.list.moveToFront(u),u.val},reset:function(){this.size=0,this.hash={},this.list=new b}});function b(){this.head=this.tail=null}n.mixin(b.prototype,{add:function(l){this.head&&(l.next=this.head,this.head.prev=l),this.head=l,this.tail=this.tail||l},remove:function(l){l.prev?l.prev.next=l.next:this.head=l.next,l.next?l.next.prev=l.prev:this.tail=l.prev},moveToFront:function(p){this.remove(p),this.add(p)}});function d(p,l){this.key=p,this.val=l,this.prev=this.next=null}return v}(),o=function(){var v;try{v=window.localStorage,v.setItem("~~~","!"),v.removeItem("~~~")}catch(g){v=null}function b(g,x){this.prefix=["__",g,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+n.escapeRegExChars(this.prefix)),this.ls=x||v,!this.ls&&this._noop()}return n.mixin(b.prototype,{_prefix:function(g){return this.prefix+g},_ttlKey:function(g){return this._prefix(g)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=n.noop},_safeSet:function(g,x){try{this.ls.setItem(g,x)}catch(S){S.name==="QuotaExceededError"&&(this.clear(),this._noop())}},get:function(g){return this.isExpired(g)&&this.remove(g),l(this.ls.getItem(this._prefix(g)))},set:function(g,x,S){return n.isNumber(S)?this._safeSet(this._ttlKey(g),p(d()+S)):this.ls.removeItem(this._ttlKey(g)),this._safeSet(this._prefix(g),p(x))},remove:function(g){return this.ls.removeItem(this._ttlKey(g)),this.ls.removeItem(this._prefix(g)),this},clear:function(){var g,x=u(this.keyMatcher);for(g=x.length;g--;)this.remove(x[g]);return this},isExpired:function(g){var x=l(this.ls.getItem(this._ttlKey(g)));return!!(n.isNumber(x)&&d()>x)}}),b;function d(){return new Date().getTime()}function p(g){return JSON.stringify(n.isUndefined(g)?null:g)}function l(g){return i.parseJSON(g)}function u(g){var x,S,_=[],w=v.length;for(x=0;x<w;x++)(S=v.key(x)).match(g)&&_.push(S.replace(g,""));return _}}(),a=function(){var v=0,b={},d=new s(10);function p(l){l=l||{},this.maxPendingRequests=l.maxPendingRequests||6,this.cancelled=!1,this.lastReq=null,this._send=l.transport,this._get=l.limiter?l.limiter(this._get):this._get,this._cache=l.cache===!1?new s(0):d}return p.setMaxPendingRequests=function(u){this.maxPendingRequests=u},p.resetCache=function(){d.reset()},n.mixin(p.prototype,{_fingerprint:function(u){return u=u||{},u.url+u.type+i.param(u.data||{})},_get:function(l,u){var g=this,x,S;if(x=this._fingerprint(l),this.cancelled||x!==this.lastReq)return;(S=b[x])?S.done(_).fail(w):v<this.maxPendingRequests?(v++,b[x]=this._send(l).done(_).fail(w).always(k)):this.onDeckRequestArgs=[].slice.call(arguments,0);function _(C){u(null,C),g._cache.set(x,C)}function w(){u(!0)}function k(){v--,delete b[x],g.onDeckRequestArgs&&(g._get.apply(g,g.onDeckRequestArgs),g.onDeckRequestArgs=null)}},get:function(l,u){var g,x;u=u||i.noop,l=n.isString(l)?{url:l}:l||{},x=this._fingerprint(l),this.cancelled=!1,this.lastReq=x,(g=this._cache.get(x))?u(null,g):this._get(l,u)},cancel:function(){this.cancelled=!0}}),p}(),c=window.SearchIndex=function(){var v="c",b="i";function d(x){x=x||{},(!x.datumTokenizer||!x.queryTokenizer)&&i.error("datumTokenizer and queryTokenizer are both required"),this.identify=x.identify||n.stringify,this.datumTokenizer=x.datumTokenizer,this.queryTokenizer=x.queryTokenizer,this.matchAnyQueryToken=x.matchAnyQueryToken,this.reset()}return n.mixin(d.prototype,{bootstrap:function(S){this.datums=S.datums,this.trie=S.trie},add:function(x){var S=this;x=n.isArray(x)?x:[x],n.each(x,function(_){var w,k;S.datums[w=S.identify(_)]=_,k=p(S.datumTokenizer(_)),n.each(k,function(C){var T,E,A;for(T=S.trie,E=C.split("");A=E.shift();)T=T[v][A]||(T[v][A]=l()),T[b].push(w)})})},get:function(S){var _=this;return n.map(S,function(w){return _.datums[w]})},search:function(S){var _=this,w,k;return w=p(this.queryTokenizer(S)),n.each(w,function(C){var T,E,A,D;if(k&&k.length===0&&!_.matchAnyQueryToken)return!1;for(T=_.trie,E=C.split("");T&&(A=E.shift());)T=T[v][A];if(T&&E.length===0)D=T[b].slice(0),k=k?g(k,D):D;else if(!_.matchAnyQueryToken)return k=[],!1}),k?n.map(u(k),function(C){return _.datums[C]}):[]},all:function(){var S=[];for(var _ in this.datums)S.push(this.datums[_]);return S},reset:function(){this.datums={},this.trie=l()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),d;function p(x){return x=n.filter(x,function(S){return!!S}),x=n.map(x,function(S){return S.toLowerCase()}),x}function l(){var x={};return x[b]=[],x[v]={},x}function u(x){for(var S={},_=[],w=0,k=x.length;w<k;w++)S[x[w]]||(S[x[w]]=!0,_.push(x[w]));return _}function g(x,S){var _=0,w=0,k=[];x=x.sort(),S=S.sort();for(var C=x.length,T=S.length;_<C&&w<T;)x[_]<S[w]?_++:(x[_]>S[w]||(k.push(x[_]),_++),w++);return k}}(),h=function(){var v;v={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function b(d){this.url=d.url,this.ttl=d.ttl,this.cache=d.cache,this.prepare=d.prepare,this.transform=d.transform,this.transport=d.transport,this.thumbprint=d.thumbprint,this.storage=new o(d.cacheKey)}return n.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(p){this.cache&&(this.storage.set(v.data,p,this.ttl),this.storage.set(v.protocol,location.protocol,this.ttl),this.storage.set(v.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var p={},l;return this.cache?(p.data=this.storage.get(v.data),p.protocol=this.storage.get(v.protocol),p.thumbprint=this.storage.get(v.thumbprint),l=p.thumbprint!==this.thumbprint||p.protocol!==location.protocol,p.data&&!l?p.data:null):null},fromNetwork:function(d){var p=this,l;if(!d)return;l=this.prepare(this._settings()),this.transport(l).fail(u).done(g);function u(){d(!0)}function g(x){d(null,p.transform(x))}},clear:function(){return this.storage.clear(),this}}),b}(),f=function(){function v(b){this.url=b.url,this.prepare=b.prepare,this.transform=b.transform,this.indexResponse=b.indexResponse,this.transport=new a({cache:b.cache,limiter:b.limiter,transport:b.transport,maxPendingRequests:b.maxPendingRequests})}return n.mixin(v.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(d,p){var l=this,u;if(!p)return;return d=d||"",u=this.prepare(d,this._settings()),this.transport.get(u,g);function g(x,S){p(x?[]:l.transform(S))}},cancelLastRequest:function(){this.transport.cancel()}}),v}(),m=function(){return function(g){var x,S;return x={initialize:!0,identify:n.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},g=n.mixin(x,g||{}),!g.datumTokenizer&&i.error("datumTokenizer is required"),!g.queryTokenizer&&i.error("queryTokenizer is required"),S=g.sorter,g.sorter=S?function(_){return _.sort(S)}:n.identity,g.local=n.isFunction(g.local)?g.local():g.local,g.prefetch=v(g.prefetch),g.remote=b(g.remote),g};function v(u){var g;return u?(g={url:null,ttl:24*60*60*1e3,cache:!0,cacheKey:null,thumbprint:"",prepare:n.identity,transform:n.identity,transport:null},u=n.isString(u)?{url:u}:u,u=n.mixin(g,u),!u.url&&i.error("prefetch requires url to be set"),u.transform=u.filter||u.transform,u.cacheKey=u.cacheKey||u.url,u.thumbprint=r+u.thumbprint,u.transport=u.transport?l(u.transport):i.ajax,u):null}function b(u){var g;if(u)return g={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:n.identity,transport:null},u=n.isString(u)?{url:u}:u,u=n.mixin(g,u),!u.url&&i.error("remote requires url to be set"),u.transform=u.filter||u.transform,u.prepare=d(u),u.limiter=p(u),u.transport=u.transport?l(u.transport):i.ajax,delete u.replace,delete u.wildcard,delete u.rateLimitBy,delete u.rateLimitWait,u}function d(u){var g,x,S;if(g=u.prepare,x=u.replace,S=u.wildcard,g)return g;return x?g=_:u.wildcard?g=w:g=k,g;function _(C,T){return T.url=x(T.url,C),T}function w(C,T){return T.url=T.url.replace(S,encodeURIComponent(C)),T}function k(C,T){return T}}function p(u){var g,x,S;return g=u.limiter,x=u.rateLimitBy,S=u.rateLimitWait,g||(g=/^throttle$/i.test(x)?w(S):_(S)),g;function _(k){return function(T){return n.debounce(T,k)}}function w(k){return function(T){return n.throttle(T,k)}}}function l(u){return function(x){var S=i.Deferred();return u(x,_,w),S;function _(k){n.defer(function(){S.resolve(k)})}function w(k){n.defer(function(){S.reject(k)})}}}}(),y=function(){var v;v=window&&window.Bloodhound;function b(d){d=m(d),this.sorter=d.sorter,this.identify=d.identify,this.sufficient=d.sufficient,this.indexRemote=d.indexRemote,this.local=d.local,this.remote=d.remote?new f(d.remote):null,this.prefetch=d.prefetch?new h(d.prefetch):null,this.index=new c({identify:this.identify,datumTokenizer:d.datumTokenizer,queryTokenizer:d.queryTokenizer}),d.initialize!==!1&&this.initialize()}return b.noConflict=function(){return window&&(window.Bloodhound=v),b},b.tokenizers=t,n.mixin(b.prototype,{__ttAdapter:function(){var p=this;return this.remote?l:u;function l(g,x,S){return p.search(g,x,S)}function u(g,x){return p.search(g,x)}},_loadPrefetch:function(){var p=this,l,u;return l=i.Deferred(),this.prefetch?(u=this.prefetch.fromCache())?(this.index.bootstrap(u),l.resolve()):this.prefetch.fromNetwork(g):l.resolve(),l.promise();function g(x,S){if(x)return l.reject();p.add(S),p.prefetch.store(p.index.serialize()),l.resolve()}},_initialize:function(){var p=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(l),this.initPromise;function l(){p.add(p.local)}},initialize:function(p){return!this.initPromise||p?this._initialize():this.initPromise},add:function(p){return this.index.add(p),this},get:function(p){return p=n.isArray(p)?p:[].slice.call(arguments),this.index.get(p)},search:function(p,l,u){var g=this,x;return l=l||n.noop,u=u||n.noop,x=this.sorter(this.index.search(p)),l(this.remote?x.slice():x),this.remote&&x.length<this.sufficient?this.remote.get(p,S):this.remote&&this.remote.cancelLastRequest(),this;function S(_){var w=[];n.each(_,function(k){!n.some(x,function(C){return g.identify(k)===g.identify(C)})&&w.push(k)}),g.indexRemote&&g.add(w),u(w)}},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return a.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),b}();return y})}(Tt)),Tt.exports}var Wr=zr();const Br=qs(Wr);var It={exports:{}};/*!
 * typeahead.js 1.4.2
 * https://github.com/corejavascript/typeahead.js
 * Copyright 2013-2020 Twitter, Inc. and other contributors; Licensed MIT
 */var qr=It.exports,Ji;function $r(){return Ji||(Ji=1,function(e){(function(i,n){e.exports?e.exports=n(qt()):n(i.jQuery)})(qr,function(i){var n=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(v){return!v||/^\s*$/.test(v)},escapeRegExChars:function(v){return v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(v){return typeof v=="string"},isNumber:function(v){return typeof v=="number"},isArray:i.isArray,isFunction:i.isFunction,isObject:i.isPlainObject,isUndefined:function(v){return typeof v>"u"},isElement:function(v){return!!(v&&v.nodeType===1)},isJQuery:function(v){return v instanceof i},toStr:function(b){return n.isUndefined(b)||b===null?"":b+""},bind:i.proxy,each:function(v,b){i.each(v,d);function d(p,l){return b(l,p)}},map:i.map,filter:i.grep,every:function(v,b){var d=!0;return v?(i.each(v,function(p,l){if(!(d=b.call(null,l,p,v)))return!1}),!!d):d},some:function(v,b){var d=!1;return v?(i.each(v,function(p,l){if(d=b.call(null,l,p,v))return!1}),!!d):d},mixin:i.extend,identity:function(v){return v},clone:function(v){return i.extend(!0,{},v)},getIdGenerator:function(){var v=0;return function(){return v++}},templatify:function(b){return i.isFunction(b)?b:d;function d(){return String(b)}},defer:function(v){setTimeout(v,0)},debounce:function(v,b,d){var p,l;return function(){var u=this,g=arguments,x,S;return x=function(){p=null,d||(l=v.apply(u,g))},S=d&&!p,clearTimeout(p),p=setTimeout(x,b),S&&(l=v.apply(u,g)),l}},throttle:function(v,b){var d,p,l,u,g,x;return g=0,x=function(){g=new Date,l=null,u=v.apply(d,p)},function(){var S=new Date,_=b-(S-g);return d=this,p=arguments,_<=0?(clearTimeout(l),l=null,g=S,u=v.apply(d,p)):l||(l=setTimeout(x,_)),u}},stringify:function(v){return n.isString(v)?v:JSON.stringify(v)},guid:function(){function v(b){var d=(Math.random().toString(16)+"000000000").substr(2,8);return b?"-"+d.substr(0,4)+"-"+d.substr(4,4):d}return"tt-"+v()+v(!0)+v(!0)+v()},noop:function(){}}}(),r=function(){var v={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight",disabled:"tt-disabled"};return b;function b(u){var g,x;return x=n.mixin({},v,u),g={css:l(),classes:x,html:d(x),selectors:p(x)},{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(S){n.mixin(S,g)}}}function d(u){return{wrapper:'<span class="'+u.wrapper+'"></span>',menu:'<div role="listbox" class="'+u.menu+'"></div>'}}function p(u){var g={};return n.each(u,function(x,S){g[S]="."+x}),g}function l(){var u={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return n.isMsie()&&n.mixin(u.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),u}}(),t=function(){var v,b;v="typeahead:",b={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function d(p){(!p||!p.el)&&i.error("EventBus initialized without el"),this.$el=i(p.el)}return n.mixin(d.prototype,{_trigger:function(p,l){var u=i.Event(v+p);return this.$el.trigger.call(this.$el,u,l||[]),u},before:function(p){var l,u;return l=[].slice.call(arguments,1),u=this._trigger("before"+p,l),u.isDefaultPrevented()},trigger:function(p){var l;this._trigger(p,[].slice.call(arguments,1)),(l=b[p])&&this._trigger(l,[].slice.call(arguments,1))}}),d}(),s=function(){var v=/\s+/,b=S();return{onSync:l,onAsync:p,off:u,trigger:g};function d(w,k,C,T){var E;if(!C)return this;for(k=k.split(v),C=T?_(C,T):C,this._callbacks=this._callbacks||{};E=k.shift();)this._callbacks[E]=this._callbacks[E]||{sync:[],async:[]},this._callbacks[E][w].push(C);return this}function p(w,k,C){return d.call(this,"async",w,k,C)}function l(w,k,C){return d.call(this,"sync",w,k,C)}function u(w){var k;if(!this._callbacks)return this;for(w=w.split(v);k=w.shift();)delete this._callbacks[k];return this}function g(w){var k,C,T,E,A;if(!this._callbacks)return this;for(w=w.split(v),T=[].slice.call(arguments,1);(k=w.shift())&&(C=this._callbacks[k]);)E=x(C.sync,this,[k].concat(T)),A=x(C.async,this,[k].concat(T)),E()&&b(A);return this}function x(w,k,C){return T;function T(){for(var E,A=0,D=w.length;!E&&A<D;A+=1)E=w[A].apply(k,C)===!1;return!E}}function S(){var w;return window.setImmediate?w=function(C){setImmediate(function(){C()})}:w=function(C){setTimeout(function(){C()},0)},w}function _(w,k){return w.bind?w.bind(k):function(){w.apply(k,[].slice.call(arguments,0))}}}(),o=function(v){var b={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},d={A:"[Aa--------]",B:"[Bb--]",C:"[Cc--]",D:"[Dd-----]",E:"[Ee------]",F:"[Ff--]",G:"[Gg--]",H:"[Hh---]",I:"[Ii---------]",J:"[Jj--]",K:"[Kk--]",L:"[Ll----]",M:"[Mm----]",N:"[Nn---]",O:"[Oo-----]",P:"[Pp---]",Q:"[Qq]",R:"[Rr-----]",S:"[Ss---]",T:"[Tt--]",U:"[Uu------]",V:"[Vv----]",W:"[Ww--]",X:"[Xx---]",Y:"[Yy--]",Z:"[Zz----]"};return function(g){var x;if(g=n.mixin({},b,g),!g.node||!g.pattern)return;g.pattern=n.isArray(g.pattern)?g.pattern:[g.pattern],x=l(g.pattern,g.caseSensitive,g.wordsOnly,g.diacriticInsensitive),_(g.node,S);function S(w){var k,C,T;return(k=x.exec(w.data))&&(T=v.createElement(g.tagName),g.className&&(T.className=g.className),C=w.splitText(k.index),C.splitText(k[0].length),T.appendChild(C.cloneNode(!0)),w.parentNode.replaceChild(T,C)),!!k}function _(w,k){for(var C,T=3,E=0;E<w.childNodes.length;E++)C=w.childNodes[E],C.nodeType===T?E+=k(C)?1:0:_(C,k)}};function p(u){return d[u.toUpperCase()]||u}function l(u,g,x,S){for(var _=[],w,k=0,C=u.length;k<C;k++){var T=n.escapeRegExChars(u[k]);S&&(T=T.replace(/\S/g,p)),_.push(T)}return w=x?"\\b("+_.join("|")+")\\b":"("+_.join("|")+")",g?new RegExp(w):new RegExp(w,"i")}}(window.document),a=function(){var v;v={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function b(u,g){var x;u=u||{},u.input||i.error("input is missing"),g.mixin(this),this.$hint=i(u.hint),this.$input=i(u.input),this.$menu=i(u.menu),x=this.$input.attr("id")||n.guid(),this.$menu.attr("id",x+"_listbox"),this.$hint.attr({"aria-hidden":!0}),this.$input.attr({"aria-owns":x+"_listbox",role:"combobox","aria-autocomplete":"list","aria-expanded":!1}),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=d(this.$input),this._checkLanguageDirection(),this.$hint.length===0&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=n.noop),this.onSync("cursorchange",this._updateDescendent)}return b.normalizeQuery=function(u){return n.toStr(u).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},n.mixin(b.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(g){var x=v[g.which||g.keyCode];this._managePreventDefault(x,g),x&&this._shouldTrigger(x,g)&&this.trigger(x+"Keyed",g)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(g,x){var S;switch(g){case"up":case"down":S=!l(x);break;default:S=!1}S&&x.preventDefault()},_shouldTrigger:function(g,x){var S;switch(g){case"tab":S=!l(x);break;default:S=!0}return S},_checkLanguageDirection:function(){var g=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==g&&(this.dir=g,this.$hint.attr("dir",g),this.trigger("langDirChanged",g))},_setQuery:function(g,x){var S,_;S=p(g,this.query),_=S?this.query.length!==g.length:!1,this.query=g,!x&&!S?this.trigger("queryChanged",this.query):!x&&_&&this.trigger("whitespaceChanged",this.query)},_updateDescendent:function(g,x){this.$input.attr("aria-activedescendant",x)},bind:function(){var u=this,g,x,S,_;return g=n.bind(this._onBlur,this),x=n.bind(this._onFocus,this),S=n.bind(this._onKeydown,this),_=n.bind(this._onInput,this),this.$input.on("blur.tt",g).on("focus.tt",x).on("keydown.tt",S),!n.isMsie()||n.isMsie()>9?this.$input.on("input.tt",_):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(w){v[w.which||w.keyCode]||n.defer(n.bind(u._onInput,u,w))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(g,x){this.setInputValue(g),this._setQuery(g,x)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(g){this.$input.val(g),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(g){this.$hint.val(g)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var g,x,S,_;g=this.getInputValue(),x=this.getHint(),S=g!==x&&x.indexOf(g)===0,_=g!==""&&S&&!this.hasOverflow(),!_&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var g=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=g},isCursorAtEnd:function(){var u,g,x;return u=this.$input.val().length,g=this.$input[0].selectionStart,n.isNumber(g)?g===u:document.selection?(x=document.selection.createRange(),x.moveStart("character",-u),u===x.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=i("<div>")},setAriaExpanded:function(g){this.$input.attr("aria-expanded",g)}}),b;function d(u){return i('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:u.css("font-family"),fontSize:u.css("font-size"),fontStyle:u.css("font-style"),fontVariant:u.css("font-variant"),fontWeight:u.css("font-weight"),wordSpacing:u.css("word-spacing"),letterSpacing:u.css("letter-spacing"),textIndent:u.css("text-indent"),textRendering:u.css("text-rendering"),textTransform:u.css("text-transform")}).insertAfter(u)}function p(u,g){return b.normalizeQuery(u)===b.normalizeQuery(g)}function l(u){return u.altKey||u.ctrlKey||u.metaKey||u.shiftKey}}(),c=function(){var v,b;v={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},b=n.getIdGenerator();function d(g,x){g=g||{},g.templates=g.templates||{},g.templates.notFound=g.templates.notFound||g.templates.empty,g.source||i.error("missing source"),g.node||i.error("missing node"),g.name&&!u(g.name)&&i.error("invalid dataset name: "+g.name),x.mixin(this),this.highlight=!!g.highlight,this.name=n.toStr(g.name||b()),this.limit=g.limit||5,this.displayFn=p(g.display||g.displayKey),this.templates=l(g.templates,this.displayFn),this.source=g.source.__ttAdapter?g.source.__ttAdapter():g.source,this.async=n.isUndefined(g.async)?this.source.length>2:!!g.async,this._resetLastSuggestion(),this.$el=i(g.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return d.extractData=function(x){var S=i(x);return S.data(v.obj)?{dataset:S.data(v.dataset)||"",val:S.data(v.val)||"",obj:S.data(v.obj)||null}:null},n.mixin(d.prototype,s,{_overwrite:function(x,S){S=S||[],S.length?this._renderSuggestions(x,S):this.async&&this.templates.pending?this._renderPending(x):!this.async&&this.templates.notFound?this._renderNotFound(x):this._empty(),this.trigger("rendered",S,!1,this.name)},_append:function(x,S){S=S||[],S.length&&this.$lastSuggestion.length?this._appendSuggestions(x,S):S.length?this._renderSuggestions(x,S):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(x),this.trigger("rendered",S,!0,this.name)},_renderSuggestions:function(x,S){var _;_=this._getSuggestionsFragment(x,S),this.$lastSuggestion=_.children().last(),this.$el.html(_).prepend(this._getHeader(x,S)).append(this._getFooter(x,S))},_appendSuggestions:function(x,S){var _,w;_=this._getSuggestionsFragment(x,S),w=_.children().last(),this.$lastSuggestion.after(_),this.$lastSuggestion=w},_renderPending:function(x){var S=this.templates.pending;this._resetLastSuggestion(),S&&this.$el.html(S({query:x,dataset:this.name}))},_renderNotFound:function(x){var S=this.templates.notFound;this._resetLastSuggestion(),S&&this.$el.html(S({query:x,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(x,S){var _=this,w;return w=document.createDocumentFragment(),n.each(S,function(C){var T,E;E=_._injectQuery(x,C),T=i(_.templates.suggestion(E)).data(v.dataset,_.name).data(v.obj,C).data(v.val,_.displayFn(C)).addClass(_.classes.suggestion+" "+_.classes.selectable),w.appendChild(T[0])}),this.highlight&&o({className:this.classes.highlight,node:w,pattern:x}),i(w)},_getFooter:function(x,S){return this.templates.footer?this.templates.footer({query:x,suggestions:S,dataset:this.name}):null},_getHeader:function(x,S){return this.templates.header?this.templates.header({query:x,suggestions:S,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=i()},_injectQuery:function(x,S){return n.isObject(S)?n.mixin({_query:x},S):S},update:function(x){var S=this,_=!1,w=!1,k=0;this.cancel(),this.cancel=function(){_=!0,S.cancel=i.noop,S.async&&S.trigger("asyncCanceled",x,S.name)},this.source(x,C,T),!w&&C([]);function C(E){w||(w=!0,E=(E||[]).slice(0,S.limit),k=E.length,S._overwrite(x,E),k<S.limit&&S.async&&S.trigger("asyncRequested",x,S.name))}function T(E){if(E=E||[],!_&&k<S.limit){S.cancel=i.noop;var A=Math.abs(k-S.limit);k+=A,S._append(x,E.slice(0,A)),S.async&&S.trigger("asyncReceived",x,S.name)}}},cancel:i.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=i("<div>")}}),d;function p(g){return g=g||n.stringify,n.isFunction(g)?g:x;function x(S){return S[g]}}function l(g,x){return{notFound:g.notFound&&n.templatify(g.notFound),pending:g.pending&&n.templatify(g.pending),header:g.header&&n.templatify(g.header),footer:g.footer&&n.templatify(g.footer),suggestion:g.suggestion?S:_};function S(w){var k=g.suggestion;return i(k(w)).attr("id",n.guid())}function _(w){return i('<div role="option">').attr("id",n.guid()).text(x(w))}}function u(g){return/^[_a-zA-Z0-9-]+$/.test(g)}}(),h=function(){function v(b,d){var p=this;b=b||{},b.node||i.error("node is required"),d.mixin(this),this.$node=i(b.node),this.query=null,this.datasets=n.map(b.datasets,l);function l(u){var g=p.$node.find(u.node).first();return u.node=g.length?g:i("<div>").appendTo(p.$node),new c(u,d)}}return n.mixin(v.prototype,s,{_onSelectableClick:function(d){this.trigger("selectableClicked",i(d.currentTarget))},_onRendered:function(d,p,l,u){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",p,l,u)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return n.every(this.datasets,n.bind(function(p){var l=p.isEmpty();return this.$node.attr("aria-expanded",!l),l},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var d=this.getActiveSelectable();d&&d.removeClass(this.classes.cursor)},_ensureVisible:function(d){var p,l,u,g;p=d.position().top,l=p+d.outerHeight(!0),u=this.$node.scrollTop(),g=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),p<0?this.$node.scrollTop(u+p):g<l&&this.$node.scrollTop(u+(l-g))},_getNextNonDisabledIndex:function(d,p,l,u){var g=this;function x(k){return g._getSelectables().eq(k)}function S(k){return k[0].hasAttribute("disabled")||k[0].classList.contains(g.classes.disabled)}var _=x(p);if(!_||!S(_))return p;if(d>0){for(var w=p+1;w<l;w++)if(!S(x(w)))return w}else for(var w=p-1;w>=0;w--)if(!S(x(w)))return w;return u?d>0?g._getNextNonDisabledIndex(1,0,l,!1):g._getNextNonDisabledIndex(-1,l-1,l,!1):-1},bind:function(){var b=this,d;return d=n.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,d),this.$node.on("mouseover",this.selectors.selectable,function(p){b.setCursor(i(this),p)}),this.$node.on("mouseleave",function(){b._removeCursor()}),n.each(this.datasets,function(p){p.onSync("asyncRequested",b._propagate,b).onSync("asyncCanceled",b._propagate,b).onSync("asyncReceived",b._propagate,b).onSync("rendered",b._onRendered,b).onSync("cleared",b._onCleared,b)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(d){this.$node.attr("dir",d)},selectableRelativeToCursor:function(d){var p,l,u,g,x,S;return u=this.getActiveSelectable(),p=this._getSelectables(),l=p.filter(this.selectors.disabled),l.length===p.length?null:(g=u?p.index(u):-1,x=g+d,x=(x+1)%(p.length+1)-1,x=x<-1?p.length-1:x,S=this._getNextNonDisabledIndex(d,x,p.length,!0),S===-1?null:p.eq(S))},setCursor:function(d,p){if(!(d&&d.hasClass(this.classes.disabled))&&(this._removeCursor(),d=d&&d.first())){if(d.addClass(this.classes.cursor),p&&p.type==="mouseover")return;this._ensureVisible(d)}},getSelectableData:function(d){return d&&d.length&&!d.hasClass(this.classes.disabled)?c.extractData(d):null},getActiveSelectable:function(){var d=this._getSelectables().filter(this.selectors.cursor).first();return d.length?d:null},getTopSelectable:function(){var d=this._getSelectables().not(this.selectors.disabled).first();return d.length?d:null},disableSelectable:function(d){d.addClass(this.classes.disabled)},enableSelectable:function(d){d.removeClass(this.classes.disabled)},update:function(d){var p=d!==this.query;return p&&(this.query=d,n.each(this.datasets,l)),p;function l(u){u.update(d)}},empty:function(){n.each(this.datasets,d),this.query=null,this.$node.addClass(this.classes.empty);function d(p){p.clear()}},destroy:function(){this.$node.off(".tt"),this.$node=i("<div>"),n.each(this.datasets,d);function d(p){p.destroy()}}}),v}(),f=function(){function v(b){this.$el=i("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),b.$input.after(this.$el),n.each(b.menu.datasets,n.bind(function(d){d.onSync&&(d.onSync("rendered",n.bind(this.update,this)),d.onSync("cleared",n.bind(this.cleared,this)))},this))}return n.mixin(v.prototype,{update:function(d,p){var l=p.length,u;l===1?u={result:"result",is:"is"}:u={result:"results",is:"are"},this.$el.text(l+" "+u.result+" "+u.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),v}(),m=function(){var v=h.prototype;function b(){h.apply(this,[].slice.call(arguments,0))}return n.mixin(b.prototype,h.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),v.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),v.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),v._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),v._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(p){return this.$node.css(p==="ltr"?this.css.ltr:this.css.rtl),v.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),b}(),y=function(){function v(d,p){var l,u,g,x,S,_,w,k,C,T,E;d=d||{},d.input||i.error("missing input"),d.menu||i.error("missing menu"),d.eventBus||i.error("missing event bus"),p.mixin(this),this.eventBus=d.eventBus,this.minLength=n.isNumber(d.minLength)?d.minLength:1,this.input=d.input,this.menu=d.menu,this.enabled=!0,this.autoselect=!!d.autoselect,this.clearOnSelect=!!d.clearOnSelect,this.persistQuery=!!d.persistQuery,this.preventClose=!!d.preventClose,this.disableSuggestionOnSelect=!!d.disableSuggestionOnSelect,this.disableOnDirectionKeyAutoCompletion=!!d.disableOnDirectionKeyAutoCompletion,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),l=b(this,"activate","open","_onFocused"),u=b(this,"deactivate","_onBlurred"),g=b(this,"isActive","isOpen","_onEnterKeyed"),x=b(this,"isActive","isOpen","_onTabKeyed"),S=b(this,"isActive","_onEscKeyed"),_=b(this,"isActive","open","_onUpKeyed"),w=b(this,"isActive","open","_onDownKeyed"),k=b(this,"isActive","isOpen","_onLeftKeyed"),C=b(this,"isActive","isOpen","_onRightKeyed"),T=b(this,"_openIfActive","_onQueryChanged"),E=b(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",l,this).onSync("blurred",u,this).onSync("enterKeyed",g,this).onSync("tabKeyed",x,this).onSync("escKeyed",S,this).onSync("upKeyed",_,this).onSync("downKeyed",w,this).onSync("leftKeyed",k,this).onSync("rightKeyed",C,this).onSync("queryChanged",T,this).onSync("whitespaceChanged",E,this).onSync("langDirChanged",this._onLangDirChanged,this)}return n.mixin(v.prototype,{_hacks:function(){var p,l;p=this.input.$input||i("<div>"),l=this.menu.$node||i("<div>"),p.on("blur.tt",function(u){var g,x,S;g=document.activeElement,x=l.is(g),S=l.has(g).length>0,n.isMsie()&&(x||S)&&(u.preventDefault(),u.stopImmediatePropagation(),n.defer(function(){p.focus()}))}),l.on("mousedown.tt",function(u){u.preventDefault()})},_onSelectableClicked:function(p,l){this.select(l)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(p,l,u,g){if(this._updateHint(),this.autoselect){var x=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(x)}this.menu.$node[0].scrollTop=0,this.eventBus.trigger("render",l,u,g)},_onAsyncRequested:function(p,l,u){this.eventBus.trigger("asyncrequest",u,l)},_onAsyncCanceled:function(p,l,u){this.eventBus.trigger("asynccancel",u,l)},_onAsyncReceived:function(p,l,u){this.eventBus.trigger("asyncreceive",u,l)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(p,l){var u;(u=this.menu.getActiveSelectable())?this.select(u)&&(l.preventDefault(),l.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(l.preventDefault(),l.stopPropagation())},_onTabKeyed:function(p,l){var u;(u=this.menu.getActiveSelectable())?this.select(u)&&l.preventDefault():this.autoselect&&(u=this.menu.getTopSelectable())&&this.autocomplete(u)&&l.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){!this.disableOnDirectionKeyAutoCompletion&&this.dir==="rtl"&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){!this.disableOnDirectionKeyAutoCompletion&&this.dir==="ltr"&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(p,l){this._minLengthMet(l)?this.menu.update(l):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(p,l){this.dir!==l&&(this.dir=l,this.menu.setLanguageDirection(l))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(p){return p=n.isString(p)?p:this.input.getQuery()||"",p.length>=this.minLength},_updateHint:function(){var p,l,u,g,x,S,_;p=this.menu.getTopSelectable(),l=this.menu.getSelectableData(p),u=this.input.getInputValue(),l&&!n.isBlankString(u)&&!this.input.hasOverflow()?(g=a.normalizeQuery(u),x=n.escapeRegExChars(g),S=new RegExp("^(?:"+x+")(.+$)","i"),_=S.exec(l.val),_&&this.input.setHint(u+_[1])):this.input.clearHint()},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return!this.isOpen()&&!this.eventBus.before("open")&&(this.input.setAriaExpanded(!0),this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return!this.preventClose&&this.isOpen()&&!this.eventBus.before("close")&&(this.input.setAriaExpanded(!1),this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(p){this.input.setQuery(n.toStr(p))},getVal:function(){return this.input.getQuery()},select:function(p){var l=this.menu.getSelectableData(p);return l&&!this.eventBus.before("select",l.obj,l.dataset)?(this.persistQuery||(this.clearOnSelect?this.setVal(""):this.input.setQuery(l.val,!0)),this.disableSuggestionOnSelect&&this.menu.disableSelectable(p),this.eventBus.trigger("select",l.obj,l.dataset),this.close(),!0):!1},autocomplete:function(p){var l,u,g;return l=this.input.getQuery(),u=this.menu.getSelectableData(p),g=u&&l!==u.val,g&&!this.eventBus.before("autocomplete",u.obj,u.dataset)?(this.persistQuery||this.input.setQuery(u.val),this.eventBus.trigger("autocomplete",u.obj,u.dataset),!0):!1},moveCursor:function(p){var l,u,g,x,S,_,w;return l=this.input.getQuery(),u=this.menu.selectableRelativeToCursor(p),g=this.menu.getSelectableData(u),x=g?g.obj:null,S=g?g.dataset:null,w=u?u.attr("id"):null,this.input.trigger("cursorchange",w),_=this._minLengthMet()&&this.menu.update(l),!_&&!this.eventBus.before("cursorchange",x,S)?(this.menu.setCursor(u),!this.persistQuery&&g?typeof g.val=="string"&&this.input.setInputValue(g.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",x,S),!0):!1},destroy:function(){this.input.destroy(),this.menu.destroy()}}),v;function b(d){var p=[].slice.call(arguments,1);return function(){var l=[].slice.call(arguments);n.each(p,function(u){return d[u].apply(d,l)})}}}();(function(){var v,b,d;v=i.fn.typeahead,b={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},d={initialize:function(w,k){var C;return k=n.isArray(k)?k:[].slice.call(arguments,1),w=w||{},C=r(w.classNames),this.each(T);function T(){var E,A,D,O,L,M,P,I,H,j,U;n.each(k,function(q){q.highlight=!!w.highlight}),E=i(this),A=i(C.html.wrapper),D=S(w.hint),O=S(w.menu),L=w.hint!==!1&&!D,M=w.menu!==!1&&!O,L&&(D=l(E,C)),M&&(O=i(C.html.menu).css(C.css.menu)),D&&D.val(""),E=u(E,C),(L||M)&&(A.css(C.css.wrapper),E.css(L?C.css.input:C.css.inputWithNoHint),E.wrap(A).parent().prepend(L?D:null).append(M?O:null)),U=M?m:h,P=new t({el:E}),I=new a({hint:D,input:E,menu:O},C),H=new U({node:O,datasets:k},C),new f({$input:E,menu:H}),j=new y({input:I,menu:H,eventBus:P,minLength:w.minLength,autoselect:w.autoselect,clearOnSelect:w.clearOnSelect,persistQuery:w.persistQuery,preventClose:w.preventClose,disableSuggestionOnSelect:w.disableSuggestionOnSelect,disableOnDirectionKeyAutoCompletion:w.disableOnDirectionKeyAutoCompletion},C),E.data(b.www,C),E.data(b.typeahead,j)}},isEnabled:function(){var w;return p(this.first(),function(k){w=k.isEnabled()}),w},enable:function(){return p(this,function(w){w.enable()}),this},disable:function(){return p(this,function(w){w.disable()}),this},isActive:function(){var w;return p(this.first(),function(k){w=k.isActive()}),w},activate:function(){return p(this,function(w){w.activate()}),this},deactivate:function(){return p(this,function(w){w.deactivate()}),this},isOpen:function(){var w;return p(this.first(),function(k){w=k.isOpen()}),w},open:function(){return p(this,function(w){w.open()}),this},close:function(){return p(this,function(w){w.close()}),this},select:function(w){var k=!1,C=i(w);return p(this.first(),function(T){k=T.select(C)}),k},autocomplete:function(w){var k=!1,C=i(w);return p(this.first(),function(T){k=T.autocomplete(C)}),k},moveCursor:function(w){var k=!1;return p(this.first(),function(C){k=C.moveCursor(w)}),k},val:function(w){var k;return arguments.length?(p(this,function(C){C.setVal(n.toStr(w))}),this):(p(this.first(),function(C){k=C.getVal()}),k)},destroy:function(){return p(this,function(w,k){x(k),w.destroy()}),this}},i.fn.typeahead=function(_){return d[_]?d[_].apply(this,[].slice.call(arguments,1)):d.initialize.apply(this,arguments)},i.fn.typeahead.noConflict=function(){return i.fn.typeahead=v,this};function p(_,w){_.each(function(){var k=i(this),C;(C=k.data(b.typeahead))&&w(C,k)})}function l(_,w){return _.clone().addClass(w.classes.hint).removeData().css(w.css.hint).css(g(_)).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function u(_,w){_.data(b.attrs,{dir:_.attr("dir"),autocomplete:_.attr("autocomplete"),spellcheck:_.attr("spellcheck"),style:_.attr("style")}),_.addClass(w.classes.input).attr({spellcheck:!1});try{!_.attr("dir")&&_.attr("dir","auto")}catch(k){}return _}function g(_){return{backgroundAttachment:_.css("background-attachment"),backgroundClip:_.css("background-clip"),backgroundColor:_.css("background-color"),backgroundImage:_.css("background-image"),backgroundOrigin:_.css("background-origin"),backgroundPosition:_.css("background-position"),backgroundRepeat:_.css("background-repeat"),backgroundSize:_.css("background-size")}}function x(_){var w,k;w=_.data(b.www),k=_.parent().filter(w.selectors.wrapper),n.each(_.data(b.attrs),function(C,T){n.isUndefined(C)?_.removeAttr(T):_.attr(T,C)}),_.removeData(b.typeahead).removeData(b.www).removeData(b.attr).removeClass(w.classes.input),k.length&&(_.detach().insertAfter(k),k.remove())}function S(_){var w,k;return w=n.isJQuery(_)||n.isElement(_),k=w?i(_).first():[],k.length?k:null}})()})}(It)),It.exports}$r();(function(){var i=14,n=70,r=10,t=!1,s=!1,o=document.createElement("div");o.classList.add("debug-grid");var a=document.createElement("div");function c(){var u=document.createElement("div"),g=i*(n+r),x="display: flex; z-index: 9999; position: fixed; top: 0; bottom: 0; left: 0; right: 0; margin-left: auto; margin-right: auto; pointer-events: none; opacity: 0.05; box-sizing: content-box !important;";x+=" max-width: "+g+"px;";var S="flex: 1; background-color: #f00; margin-left: "+r/2+"px; margin-right: "+r/2+"px;";o.setAttribute("style",x),u.setAttribute("style",S);for(var _=0;_<i;_++){var w=u.cloneNode(!0);o.appendChild(w)}}function h(){var u=document.createElement("div"),g=i*(n+r),x="display: flex; z-index: 9999; position: fixed; top: 0; bottom: 0; left: 0; right: 0; margin-left: auto; margin-right: auto; pointer-events: none; opacity: 0.1; box-sizing: content-box !important;";x+=" max-width: "+g+"px;";var S="flex: 1; display: flex; justify-content: space-between;";a.setAttribute("style",x),u.setAttribute("style",S);for(var _=0;_<i;_++){var w=u.cloneNode(!0),k=document.createElement("div"),C=document.createElement("div");k.style.backgroundColor="#f00",k.style.width=r/2+"px",C.style.backgroundColor="#00f",C.style.width=r/2+"px",w.appendChild(k),w.appendChild(C),a.appendChild(w)}}function f(){s&&v(),console.log(document.body,document),document.body.appendChild(o),t=!0}function m(){document.body.removeChild(o),t=!1}function y(){t&&m(),document.body.appendChild(a),s=!0}function v(){document.body.removeChild(a),s=!1}document.addEventListener("keydown",function(u){u.ctrlKey&&u.altKey&&u.shiftKey&&u.key==="/"?s?v():y():u.ctrlKey&&u.altKey&&u.key==="/"&&(t?m():f())}),c(),h();const b=window.location.search,d=new URLSearchParams(b),p=d.has("columns"),l=d.has("gutters");window.onload=function(){p?f():l&&y()}})();var Pn,On,Mn,Ln;Ln=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function jt(e,i){for(var n=0,r=e.length,t=[];n<r;n++)t[n]=i(e[n],n);return t}function Zi(e){return e}Pn=[96,130,165,200,235,270,304,340,375,410,445,485,520,555,590,625,660,695,736];On=typeof Object.keys=="function"?Object.keys:function(e){var i=[],n;for(n in e)i.push(n);return i};Mn=function(i){return Object.prototype.toString.call(i)==="[object Array]"};function oe(e,i){var n=this,r=document;i=i||{},e!==void 0&&(typeof e=="string"?(i.selector=e,e=void 0):e.hasOwnProperty("length")||(i=e,e=void 0)),this.imagesOffScreen=[],this.viewportHeight=r.documentElement.clientHeight,this.selector=i.selector||".delayed-image-load",this.className=i.className||"image-replace",this.gif=r.createElement("img"),this.gif.src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7",this.gif.className=this.className,this.gif.alt="",this.scrollDelay=i.scrollDelay||250,this.onResize=i.hasOwnProperty("onResize")?i.onResize:!0,this.lazyload=i.hasOwnProperty("lazyload")?i.lazyload:!1,this.lazyloadOffset=i.hasOwnProperty("lazyloadOffset")?i.lazyloadOffset:0,this.scrolled=!1,this.devicePixelRatio=oe.getPixelRatio(),i.availableWidths===void 0&&(i.availableWidths=Pn),typeof i.afterChange=="function"&&(this.afterChange=i.afterChange),Mn(i.availableWidths)?(this.availableWidths=i.availableWidths,this.widthsMap=oe.createWidthsMap(this.availableWidths)):(this.availableWidths=On(i.availableWidths),this.widthsMap=i.availableWidths),this.availableWidths=this.availableWidths.sort(function(t,s){return t-s}),e?(this.divs=jt(e,Zi),this.selector=null):this.divs=jt(r.querySelectorAll(this.selector),Zi),this.changeDivsToEmptyImages(),Ln(function(){n.init()})}oe.prototype.scrollCheck=function(){this.scrolled&&(this.imagesOffScreen.length||window.clearInterval(this.interval),this.divs=this.imagesOffScreen.slice(0),this.imagesOffScreen.length=0,this.changeDivsToEmptyImages(),this.scrolled=!1)};oe.prototype.init=function(){this.initialized=!0,this.checkImagesNeedReplacing(this.divs),this.onResize&&this.registerResizeEvent(),this.lazyload&&this.registerScrollEvent()};oe.prototype.createGif=function(e){if(e.className.match(new RegExp("(^| )"+this.className+"( |$)")))return e;var i=this.gif.cloneNode(!1);return i.width=e.getAttribute("data-width"),i.setAttribute("data-src",e.getAttribute("data-src")),i.setAttribute("alt",e.getAttribute("data-alt")||this.gif.alt),e.parentNode.replaceChild(i,e),i};oe.prototype.changeDivsToEmptyImages=function(){var e=this;jt(this.divs,function(i,n){e.lazyload?e.isThisElementOnScreen(i)?e.divs[n]=e.createGif(i):e.imagesOffScreen.push(i):e.divs[n]=e.createGif(i)}),this.initialized&&this.checkImagesNeedReplacing(this.divs)};oe.prototype.isThisElementOnScreen=function(e){var i=window.hasOwnProperty("pageYOffset")?window.pageYOffset:document.documentElement.scrollTop,n=0;if(e.offsetParent)do n+=e.offsetTop;while(e=e.offsetParent);return n<this.viewportHeight+i+this.lazyloadOffset};oe.prototype.checkImagesNeedReplacing=function(e){var i=this;this.isResizing||(this.isResizing=!0,jt(e,function(n){i.replaceImagesBasedOnScreenDimensions(n)}),this.isResizing=!1)};oe.prototype.replaceImagesBasedOnScreenDimensions=function(e){var i,n;i=typeof this.availableWidths=="function"?this.availableWidths(e):this.determineAppropriateResolution(e),n=this.changeImageSrcToUseNewImageDimensions(e.getAttribute("data-src"),i),e.src=n,typeof this.afterChange=="function"&&this.afterChange(e)};oe.prototype.determineAppropriateResolution=function(e){for(var i=e.clientWidth,n=this.availableWidths.length,r=this.availableWidths[n-1];n--;)i<=this.availableWidths[n]&&(r=this.availableWidths[n]);return r};oe.prototype.changeImageSrcToUseNewImageDimensions=function(e,i){return e.replace(/{width}/g,oe.transforms.width(i,this.widthsMap)).replace(/{pixel_ratio}/g,oe.transforms.pixelRatio(this.devicePixelRatio))};oe.getPixelRatio=function(){return window.devicePixelRatio||1};oe.createWidthsMap=function(i){for(var n={},r=i.length;r--;)n[i[r]]=null;return n};oe.transforms={pixelRatio:function(e){return e===1?"":"-"+e+"x"},width:function(e,i){return i[e]||e}};oe.prototype.registerResizeEvent=function(){var e=this;window.addEventListener("resize",function(){e.checkImagesNeedReplacing(e.divs)},!1)};oe.prototype.registerScrollEvent=function(){var e=this;this.scrolled=!1,this.interval=window.setInterval(function(){e.scrollCheck()},e.scrollDelay),window.addEventListener("scroll",function(){e.scrolled=!0},!1)};typeof module=="object"&&typeof module.exports=="object"?module.exports=exports=oe:typeof define=="function"&&define.amd?define(function(){return oe}):typeof window=="object"&&(window.Imager=oe);const Ur=function(e,i){e.split(" ").forEach(r=>{const t=r.indexOf("-");if(t>=0){const s=r.substring(0,t),o=r.substring(t+1);i[o]=s}})},Yr=function(e){let i="";for(const n in e){const r=e[n];i.length>0&&(i+=" "),i+=r+"-"+n}return i},Rn=function(e){const i={};try{$.cookie(e)===""?$.cookie(e,null,{expires:0,path:"/"}):$.cookie(e)&&Ur($.cookie(e),i)}catch(n){$.cookie(e,null,{expires:0,path:"/"})}return i},jn=function(e,i,n,r){$("body").addClass("show-hide-toggle"),$(e).each((s,o)=>{const a=$(o),c=a.data("category"),h=a.data("type");n[c]===h?a.addClass("smenu-subselected").find("a").data("toggle","on"):a.removeClass("smenu-subselected").find("a").data("toggle","off")}),$(e.concat(" a")).click(function(s){s.preventDefault();const o=$(this),a=o.parent().data("category"),c=o.parent().data("type"),h=$(this).data("toggle");h==="off"?($(this).data("toggle","on"),i[a]=c):h==="on"&&($(this).data("toggle","off"),delete i[a]),$.cookie(r,Yr(i),{expires:730,path:"/"}),location.reload()})},Nn=function(e,i){$(e.concat(" .smenu-subselected")).not(".fade-toggle-off").length?$(i).closest(".sorting-selects").add(e).addClass("hide-toggle-active"):$(i).closest(".sorting-selects").add(e).removeClass("hide-toggle-active")};$(function(){const e=Rn("filmFilter"),i=Object.assign({},e),n=$("body"),r=n.stringData("owner")===person.username;r&&n.addClass("my-own-page"),person.role!=="staff"&&($(".js-film-filter[data-category='backdropped']").hide(),delete i.backdropped,$(".js-film-filter[data-category='nanocrowd']").hide(),delete i.nanocrowd),person.canAccessEnhancedFilters||($(".js-film-filter[data-category='obscure']").hide(),delete i.obscure),person.canFilterOwned?r&&n.hasClass("owned-list")&&delete i.owned:($(".js-film-filter[data-category='owned']").hide(),delete i.owned),person.canHaveCustomPosters||($(".js-film-filter[data-category='customised']").hide(),delete i.customised),person.canHaveCustomBackdrops||($(".js-film-filter[data-category='customisedbackdrop']").hide(),delete i.customisedBackdrop),person.canSeePrivateNotes||($(".js-film-filter[data-category='addedprivatenote']").hide(),delete i.addedPrivateNote);let t=n.hasClass("my-own-films");if(!t&&!n.hasClass("watchlist")&&$(".js-profile-header").stringData("person")===person.username&&(t=!0,n.addClass("my-own-films")),t&&delete i.watched,(i.rated==="show"||i.logged==="show"||i.reviewed==="show")&&(n.addClass("watched-films-subset"),delete i.watched),t&&n.hasClass("films-reviewed")&&delete i.reviewed,t&&n.hasClass("films-rated")&&delete i.rated,t&&n.hasClass("films-diary")&&delete i.logged,t&&n.hasClass("likes")&&delete i.liked,$("#frm-watchlist-autocomplete").length&&delete i.watchlisted,n.hasClass("unreleased-films-only")&&delete i.unreleased,window.location.href.includes("genre/documentary/")&&(n.addClass("documentaries-only"),delete i.docs),i.watched==="show"?n.addClass("hide-unwatched"):i.watched==="hide"&&n.addClass("hide-watched"),$.isEmptyObject(i)&&$("#hide-toggle-menu .js-film-filter-remover").closest("li").hide(),$(".hide-toggle-menu").length){jn(".js-film-filter",e,i,"filmFilter");const s=function(){const h=$.cookie("hideMyWatchedFilms")=="true";h?$("#hide-toggle-menu .js-fade-toggle input").prop("checked",!0):$("#hide-toggle-menu .js-fade-toggle input").prop("checked",!1),h&&!t&&!i.watched?n.addClass("hide-films-seen"):n.removeClass("hide-films-seen"),Nn("#hide-toggle-menu",".hide-toggle-menu")};s(),$("#hide-toggle-menu .js-fade-toggle input").on("change",function(h){h.preventDefault(),!t&&!i.watched&&($(this).prop("checked")?$.cookie("hideMyWatchedFilms","true",{expires:730,path:"/"}):$.cookie("hideMyWatchedFilms",null,{expires:0,path:"/"}),s())});const o=document.querySelector(".js-custom-poster-toggle"),a=document.querySelector(".js-custom-poster-control"),c={_doAjaxAsDeferred:Yi,updatePosterMode:function(h,f,m,y){if(f!==m){const v={url:h,type:"POST",data:{__csrf:window.supermodelCSRF,posterMode:f},dataType:"json",traditional:!0};this._doAjaxAsDeferred(v).fail(()=>{y&&y(f,m)}).done((b,d,p)=>{b&&b.result&&window.location.reload()})}}};if(person.canHaveCustomPosters){if(o){const h=o.parentNode;h&&h.parentNode.removeChild(h)}if(a){const h=new us(a,{togglable:!1,initialValue:null}),f=person&&person.loggedIn&&person.posterMode;let m;h.values.indexOf(f)>-1?m=f:f===Se.YOURS?m=Se.NONE:m=Se.ALL,h.update(m);const y=a.dataset.action;y&&(h._doAjaxAsDeferred=Yi,h.on(ds.CHANGE,(v,b)=>{c.updatePosterMode(y,v,b,()=>{h.update(b)})}))}}else{if(a){const h=a.parentNode;h&&h.parentNode.removeChild(h)}if(o){const h=o.querySelector("input"),f=person&&person.loggedIn&&(person.posterMode===Se.NONE||person.posterMode===Se.YOURS)?Se.NONE:Se.ALL;h.checked=f===Se.ALL;const m=o.dataset.action;m&&h.addEventListener("change",function(){const y=this.checked?Se.ALL:Se.NONE;c.updatePosterMode(m,y,f,()=>{h.checked=f===Se.ALL})})}}}$(document).on("click",".js-film-filter-remover",function(s){s.preventDefault(),$.cookie("filmFilter",null,{expires:0,path:"/"}),location.reload()})});let rt=window.location.href;const Hn=typeof fixURL<"u";Hn&&(rt=window.baseURL+fixURL);(rt.includes("__requestid=")||Hn)&&(rt=rt.replace(/__requestid=[^&]*/,"").replace(/\?$/,"").replace("&&","&").replace("?&","?"),window.history.replaceState(null,"",rt));$(function(){if(!$("body").hasClass("activity-stream"))return;const e=$(".activity-table");if(person.username===e.stringData("owner")&&!$("body").hasClass("moderation")){if(typeof window.history<"u"&&typeof window.history.replaceState<"u"){let y=window.location.href,v=baseURL+"/"+person.username+"/activity/following/";y.indexOf(v)>0?(y=y.replace(v,baseURL+"/activity/"),window.history.replaceState(null,null,y),$(".main-nav-activity").addClass("selected")):(v=baseURL+"/"+person.username+"/activity/",y.indexOf(v)>0&&(y=y.replace(v,baseURL+"/activity/you/"),window.history.replaceState(null,null,y),$(".main-nav-activity").addClass("selected")))}}else e.addClass("generic-person-activity");function i(y,v){$("#pagination-errors").remove();const b=$(v).filter(".error-message");if(b.length){const d=[];b.each(function(){d.push($(this).html())}),$(".pagination").after("<div id='pagination-errors' class='messages'></div>"),bxd.showMessages("error",d)}else{const d=$(y.data("ajax-target")),p=$(v);if(d.append(p),p.hide().fadeIn("slow"),p.filter("section.no-activity-message").length)y.attr("hidden",!0);else{let u=d.children("section:last-child").data("activityId");typeof u>"u"&&(u=0),y.data("after-id",u)}bxd.layout(p),In(p.get())}}$(document).on("click",".load-more-activity",function(y){y.preventDefault(),n($(this))}).on("ajax-success",".load-more-activity",function(y,v,b,d){const p=$(this);$("#pagination-errors").remove(),i(p,v)}).on("ajax-working",".load-more-activity",function(y,v,b,d){$(this).lbSpinner({size:12,fallback:globals.spinners.spinner_12_2C3641})}).on("ajax-error",".load-more-activity",function(){$(this).lbSpinner("stop")}).on("ajax-work-complete",".load-more-activity",function(y,v,b,d){$(this).lbSpinner("stop")});function n(y){r(y),y.trigger("ajax-action")}function r(y){let v=y.data("url");const b=y.data("after-id"),d=y.data("combined-person"),p=y.data("combined-incoming"),l=[];b!=null&&l.push("after="+b),d&&l.push("combinedPerson="+d),p&&l.push("combinedIncoming="+p),$("#activity-stream-tab").hasClass("selected")?t().forEach(u=>{l.push(u+"=true")}):t().forEach(u=>{u==="groupActivity"&&l.push(u+"=true")}),l.length&&(v=v+"?"+l.join("&")),y.data("action",v)}function t(){const y=JSON.parse($.cookie("activity-streams-"+person.username));return y!=null?y.map(v=>{if(v.name)return v.name;if(typeof v=="string")return v}):["diaryEntries","reviews","lists","stories","reviewComments","listComments","storyComments","watchlistAdditions","reviewLikes","listLikes","storyLikes","follows","yourActivity","incomingActivity"]}const s=$(".paginate-ajax > .load-more-activity");$("section.no-activity-message").length?s.attr("hidden",!0):$(document).bind("keydown",function(y){y.key==="l"&&!s.attr("hidden")&&s.trigger("click")}),n(s);const a=$(".js-activity-filter-options");function c(){const y=t();a.find("input").each(function(){let v=!1;y.forEach(b=>{(b==this.name||b=="contentLikes"&&(this.name=="reviewLikes"||this.name=="listLikes")||b=="ratings"&&this.name=="diaryEntries")&&(v=!0)}),v?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$(".js-hide-filter").hide()}c();let h=!1,f=!1;s.on("ajax-working",function(){f=!0}).on("ajax-ready-for-next-action",function(){f=!1,h?($("#activity-table-body").hide(),h=!1,m()):$("#activity-table-body").show()}),a.find("input").on("click",function(){const y=[];t().forEach(v=>{v!=this.name&&y.push(v)}),this.checked&&y.push(this.name),y.sort(),$.cookie("activity-streams-"+person.username,JSON.stringify(y),{expires:730}),f?h=!0:m()});function m(){$("#activity-table-body").empty(),s.attr("hidden",!1),s.removeData("after-id"),s.trigger("click")}$(".js-activity-filters").on("click",".js-toggle-settings-panel",function(y){y.preventDefault();const v=$(this).closest(".js-activity-filters"),b=v.find(".js-activity-filter-options"),d=v.find(".js-toggle-settings-panel");v.attr("data-panel-open")=="on"?(v.attr("data-panel-open","off"),d.attr("title","Edit Filters")):(v.attr("data-panel-open","on"),d.attr("title","Close Filters")),b.stop().slideToggle()}),document.body.addEventListener("click",function(y){if(y.target.classList.contains("js-truncate")){y.preventDefault();const v=y.target.closest(".sub-activity-details");v.querySelectorAll(".details").forEach(b=>{b.classList.add("-hidden")}),v.querySelector(".js-untruncate").classList.remove("-hidden"),y.target.classList.add("-hidden")}},!1),document.body.addEventListener("click",function(y){if(y.target.classList.contains("js-untruncate")){y.preventDefault();const v=y.target.closest(".sub-activity-details");if(!v.querySelector("section.activity-row")){const b=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});v.querySelector(".load-more-activity").dispatchEvent(b)}v.querySelectorAll(".details").forEach(b=>{b.classList.remove("-hidden")}),v.querySelector(".js-truncate").classList.remove("-hidden"),y.target.classList.add("-hidden")}},!1)});const Vr=["GET","HEAD"],Xr=(e,i)=>{if(i!=null&&i.method&&!Vr.includes(i.method.toUpperCase())){const n=new Headers(i.headers);n.set("X-CSRF-TOKEN",mt()),i.headers=n}return fetch(e,i)},Kr=new Ys({baseUri:window.baseURL+"/api/v0",fetch:Xr});Vs(Kr);const en=(e=!0,i)=>{const n=i.querySelectorAll('[data-js-trigger="block"]'),r=i.querySelectorAll('[data-js-trigger="unblock"]'),t=e?r:n,s=e?n:r;t.forEach(o=>o.removeAttribute("hidden")),s.forEach(o=>o.setAttribute("hidden",""))},Gr=(e=!0,i)=>{i instanceof NodeList||Array.isArray(i)?Array.from(i).filter(n=>n.nodeType===1).forEach(n=>en(e,n)):i instanceof HTMLElement&&en(e,i)},Et={};let tn;Et.layoutCommentSection=function(e){if(e?Et.savedSection=e:e=Et.savedSection,e&&e.length){let r=function(){person&&(person.moderator||person.username===n)?$("li.comment").addClass("editable"):($("li.comment.editable").removeClass("editable"),person.loggedIn&&$("li.comment[data-person="+person.username+"]").each(function(f,m){parseInt($(m).data("editWindowExpiry"),10)+6e4>new Date().getTime()&&$(m).addClass("editable")}),$("li.comment").not(".editable").find(".js-edit-comment, .js-delete-comment").fadeOut("slow",function(){$(this).remove()}))};const i=e.find(".comment-list"),n=i.stringData("owner");r(),setInterval(r,6e4),person.loggedIn&&($.ajax({url:e.data("reports-url")}).done(function(f){const m=$(".flag-content");m.length&&(f.reportedContent||m.show())}),person.blockedMembers.length&&e.find("li.comment").each(function(){const f=$(this);person.hasBlocked(f.stringData("person"))&&!f.hasClass("comment-blocked")&&(f.addClass("comment-blocked comment-collapsed has-icon icon-16"),f.find(".comment-body").replaceWith("<div class='comment-body col-12 body-text -small'><p>Youve blocked the author of this comment.</p></div>"),bxd.layout(f))}),e.on("submit","#post-comment-form",function(f){const m=$(this);return f.preventDefault(),m.hasClass("ajax-working")||(m.addClass("ajax-working"),$.post(m.attr("action"),m.serialize()).done(function(y){y.result?(bxd.showMessages("success",y.messages),m.find("[name=comment]").val(""),m.protectUnsavedChanges({reset:!0}),y.audienceMemberState&&$("#join-audience").data("state",y.audienceMemberState).trigger("subscriptionChanged"),bxd.fetchMissingComments({done:()=>{$(f.delegateTarget).trigger("newcommentsubmission")}})):bxd.showMessages("error",y.messages)}).always(function(){m.removeClass("ajax-working")})),!1}),$("#join-audience").mouseover(function(f){if(!$(this).data("ajax-working")){const m=$(this).data("state");m==="NotSubscribed"?$(this).addClass("button-subscribe").removeClass("button-unsubscribe").find(".subscription-text").text("Enable notifications for this thread"):m==="Unsubscribed"?$(this).addClass("button-subscribe").removeClass("button-unsubscribe").find(".subscription-text").text("Enable notifications for this thread"):m==="Subscribed"&&$(this).addClass("button-unsubscribe").removeClass("button-subscribe").find(".subscription-text").text("Mute notifications for this thread")}}).mouseout(function(f){const m=$(this);$(this).data("ajax-working")||m.trigger("subscriptionChanged")}).bind("subscriptionChanged",function(f){const m=$(this),y=m.data("state");y==="NotSubscribed"?m.addClass("button-subscribe").removeClass("button-unsubscribe").data("action",m.data("subscribe-action")).find(".subscription-text").text("Notify me"):y==="Unsubscribed"?m.addClass("button-subscribe").removeClass("button-unsubscribe").data("action",m.data("subscribe-action")).find(".subscription-text").text("Notifications muted"):y==="Subscribed"&&m.addClass("button-unsubscribe").removeClass("button-subscribe").data("action",m.data("unsubscribe-action")).find(".subscription-text").text("Notifications enabled")}).bind("ajax-action",function(f){$(this).data("start-time",new Date)}).bind("ajax-working",function(f){$(this).find(".subscription-text").text("Saving...")}).bind("ajax-success",function(f,m,y,v){const b=$(this),d=b.data("start-time"),p=new Date-d,l=Math.max(0,1e3-p);b.trigger("ajax-working"),setTimeout(function(){b.trigger("ajax-work-complete"),m.messages&&bxd.showMessages(m.result?"success":"error",m.messages),m.result&&b.data("state",m.audienceMemberState),b.trigger("subscriptionChanged")},l)}).trigger("subscriptionChanged")),e.on("click","#show-all-comments",function(f){f.preventDefault();const m=$(this).parent().data("comments-link");m&&(document.location=m)}),e.on("click","#load-all-comments",function(f){f.preventDefault(),$(this).data("ajax-working")||($(this).data("ajax-working",!0),$(this).text("Loading"),bxd.fetchMissingComments({preload:!0}))}),e.on("click","#load-previous-comments",function(f){if(f.preventDefault(),!$(this).data("ajax-working")){$(this).data("ajax-working",!0),$(this).text("loading");let m=i.data("comments-start");const y=20;m=Math.max(0,m-y),bxd.fetchMissingComments({start:m,howMany:y})}}),e.on("click","li.comment-collapsed",function(f){f.preventDefault(),$(this).removeClass("comment-collapsed").addClass("comment-expanded");let m=$(this).next();for(;m.hasClass("comment-collapsed");)m.removeClass("comment-collapsed").addClass("comment-expanded"),m=m.next()});const t=function(){const f=i.data("num-comments");if(f>0)if($("body.profile-hq").length){const m=$("li.comment:not(.removed-by-admin):not(.removed-by-owner):not(.deleted):not(.comment-blocked)",e).filter(":visible").length;if(m<f){const y="<a href='#' id='show-all-comments'><span class='comment-count'>"+bxd.pluralise(m,"Comment","Comments","")+" of "+f+"</span></a>";$("#comments").addClass("has-comment-controls").find(".section-heading").html(y)}else $("#comments .section-heading").text(m==1?"1 Comment":f+" Comments")}else{const m=$("li.comment:not(.removed-by-admin):not(.removed-by-owner):not(.deleted):not(.comment-blocked)",e).length;if(m<f){const y="<span class='comment-count'>"+bxd.pluralise(f,"Comment","Comments","")+"</span><span class='comment-controls'>Newest "+bxd.formatNumber(m)+(f<100?"  <a href='#' id='load-all-comments'>Show all</a>":"  <a href='#' id='load-previous-comments'><span class='mob-sm-hide'>Show previous</span><span class='mob-sm-show' aria-hidden='true'>Prev</span></a>")+"</span>";$("#comments").addClass("has-comment-controls").find(".section-heading").html(y)}else $("#comments .section-heading").text(m==1?"1 Comment":f+" Comments")}else $("#comments .section-heading").text("Comment?");if(r(),person.loggedIn){const m=person.moderator||person.username===n?"li.comment":"li.comment.editable[data-person="+person.username+"]";$(m,e).each(function(){const y=$(this);let v=y.find(".js-comment-actions");if(v.length===0&&(v=$('<div class="actions action-icon-list -lowcontrast js-comment-actions show-on-hover"></div>'),y.find(".js-comment-person").append(v)),(person.moderator||person.username===y.stringData("person"))&&y.data("edit-url")){let l=v.find(".js-edit-comment");if(l.length===0){l=$('<a href class="inlineicon icon-16 -ignoreactionpseudo icon-edit -hidelabel js-edit-comment tooltip" title="Edit comment"><span class="icon"></span><span class="label">Edit</span></a>'),v.append(l);const u={href:y.data("edit-url")+"#modal",initialWidth:"510px",overlayClose:!1,title:" ",onComplete:function(){$("#edit-comment-cancel-button").on("click",function(){l.colorbox.close()})}};renderMobile&&(u.width="100%",u.initialWidth="288px",u.initialHeight="200px",u.transition="fade",u.speed=0,u.fixed=!0),l.colorbox(u)}}if((person.moderator||person.username===n||person.username===y.stringData("person"))&&y.data("delete-url")){let l=v.find(".js-delete-comment");l.length===0&&(l=$('<a href class="inlineicon icon-16 -ignoreactionpseudo icon-delete -hidelabel js-delete-comment ajax-click-action tooltip" title="Delete comment" data-action="'.concat(y.data("delete-url"),'" data-confirm="Are you sure you want to delete this&nbsp;comment?"><span class="icon"></span><span class="label">Delete<span></a>')),l.data("modal-confirm",{ok:"Delete",okClass:"-red"}),v.append(l),l.on("ajax-success",function(u,g){g.result&&y.fadeOut(function(){bxd.fetchMissingComments()}),g.messages&&bxd.showMessages(g.result?"success":"error",g.messages)}))}if((person.moderator||person.username===n&&person.username===y.stringData("deleted-by"))&&y.data("undelete-url")){let l=v.find(".js-undelete-comment");l.length===0&&(l=$('<a href class="inlineicon icon-16 -ignoreactionpseudo icon-undelete -hidelabel js-undelete-comment ajax-click-action icon-16 tooltip" title="Undelete comment" data-action="'.concat(y.data("undelete-url"),'"><span class="icon"></span><span class="label">Undelete<span></a>')),v.append(l),l.on("ajax-success",function(u,g){g.result&&y.fadeOut(function(){bxd.fetchMissingComments()}),g.messages&&bxd.showMessages(g.result?"success":"error",g.messages)}))}bxd.layout(v)})}};t();let s=10*1e3;const o=function(){const f=i.data("timestamp"),m=10*60*1e3;return f>new Date().getTime()-m?s=10*1e3:s=5*60*1e3,{latest:f}};bxd.fetchMissingComments=function(f){const m=typeof f<"u"&&f.preload,y=typeof f<"u"&&f.start,v=typeof f<"u"&&f.howMany,b=i.find("li.comment"),d=e.data("url"),p={};let l=null;if(m){const g=i.data("comments-start");if(g===0)return;const x=256;p.start=Math.max(0,g-x),p.howMany=x}else typeof y=="number"?(p.start=y,typeof v=="number"&&(p.howMany=v)):(p.since=o().latest,l=p.since);const u=$.ajax({url:d,type:"GET",data:p});u.done(function(g,x,S){if(S==u){if($.trim(g)!==""){const _=$(g);bxd.layout(_),i.data("num-comments",_.data("num-comments"));const w=_.data("comments-start");if((w||w===0)&&i.data("comments-start",w),_.data("blocked-comments")){const k=_.data("blocked-timestamp"),C=i.data("timestamp");k>C&&i.data("timestamp",k);const T=_.stringData("blocked-comments").split(",");$.each(T,function(E,A){b.filter("[data-comment-id="+A+"]").not(".comment-collapsed").each(function(){$(this).addClass("comment-blocked comment-collapsed has-icon icon-16").removeClass("comment-expanded"),person.loggedIn&&person.moderator?$(this).find(".comment-body").prepend("<p><span class='replace-if-you' data-replacement='Youve' data-person='"+n+"'>The "+i.data("commentableType")+"s owner has</span> blocked the author of this comment.</p>"):$(this).html("<div class='comment-body col-12 body-text -small'><p><span class='replace-if-you' data-replacement='Youve' data-person='"+n+"'>The "+i.data("commentableType")+"s owner has</span> blocked the author of this comment.</p></div>"),bxd.layout($(this))})})}_.find("li.comment").each(function(){const k=$(this),C=k.data("timestamp"),T=i.data("timestamp");C>T&&i.data("timestamp",C);const E=k.stringData("person");person.hasBlocked(E)&&(k.addClass("comment-blocked comment-collapsed has-icon icon-16"),k.find(".comment-body").replaceWith("<div class='comment-body col-12 body-text -small'><p>Youve blocked the author of this comment.</p></div>"),bxd.layout(k));const A=k.data("comment-id"),D=b.filter("[data-comment-id="+A+"]");if(D.length>=1)(D.data("timestamp")!=k.data("timestamp")||k.hasClass("comment-blocked")!==D.hasClass("comment-blocked"))&&(k.insertAfter(D),D.remove());else{const O=k.data("creation-timestamp");if(l===null||l<=O){const L=i.find("li.comment");let M=null;for(let P=L.length-1;P>=0&&$(L[P]).data("creation-timestamp")>O;P--)M=$(L[P]);M?k.insertBefore(M):i.append(k)}}})}t(),f&&f.done&&f.done()}}).always(function(){o(),clearTimeout(tn),tn=setTimeout(bxd.fetchMissingComments,s)})};let a="",c=10;const h=f=>{f&&f.startsWith("#comment-")&&a!=f&&(i.find("a.comment-permalink").toArray().reduce((y,v)=>y||v.hash===f,!1)||c<=0?(a=f,location.hash="",location.hash=a,c<10&&(c=10)):(c=c-1,bxd.fetchMissingComments({preload:!0,done:function(){setTimeout(function(){h(f)},0)}})))};window.onhashchange=f=>{h(new URL(f.newURL).hash)},h(location.hash),o()}};$(function(){$("body").on("submit","#comment-editor-modal form",function(e){const i=$(this);return e.preventDefault(),i.hasClass("ajax-working")||(i.addClass("ajax-working"),$.post(i.attr("action"),i.serialize()).done(function(n){n.result?(bxd.showMessages("success",n.messages),$("#comments .js-edit-comment").colorbox.close(),bxd.fetchMissingComments()):bxd.showMessages("error",n.messages)}).always(function(){i.removeClass("ajax-working")})),!1})});window.commentSection=Et;(function(e){jQuery.expr[":"].Contains=function(n,r,t){return(n.textContent||n.innerText||"").toUpperCase().indexOf(t[3].toUpperCase())>=0};function i(n,r){const t=e("<form>").attr({class:"filterform",action:"#"}),s=e("<input>").attr({class:"filterinput",placeholder:"Quick find",type:"text"}),o=e("<span>").attr("class","filterclear").html("&times;");e(t).append(s).append(o).appendTo(n),e(o).hide();const a=new URLSearchParams(window.location.search).get("s");e(t).submit(function(){return!1}),e(s).change(function(){e("#filter-no-matches, #filter-matches").remove();const h=e(this).val().trim().split(/\s+/);if(h.length&&h[0].length){e(o).show(),e(r).find(".section-heading").show();let f=e(r).children("li");for(const m in h)m.length&&(f=f.filter(e(r).children("li:Contains("+h[m]+")")));e(r).children("li").hide(),f.show().children(".section-heading").hide(),e(r).find(":visible").length===0?e(r).append("<li class='filtermessage' id='filter-no-matches'><h1>Sorry, no matches!</h1><p>These arent the droids youre looking for.</p></li>"):e(r).prepend("<li class='filtermessage' id='filter-matches'><h2 class='section-heading'>Matching answers</h2></li>")}else e(o).hide(),e(r).children("li").show().children(".section-heading").show();return!1}).keyup(function(){e(this).change()}),a&&e(s).val(a).trigger("change")}e(function(){if(e("body").hasClass("editorial")){e(".filterable-list").length&&(i(e("#sidebar"),e(".filterable-list")),e("body").on("click",".filterclear",function(){e(".filterinput").val("").trigger("change"),e(this).hide()}));for(const n of document.querySelectorAll('[data-js-trigger="copylinktoclipboard"]'))new Us(n,{clipboard:{text:r=>r.href}})}})})(jQuery);const nn=(e,i,n={})=>{$('.follow-button-wrapper[data-username="'.concat(i,'"]')).each(function(){et(e,this,n)})};$(function(){$(document).on("mouseover",".js-button-following",function(e){$(this).addClass("button-unfollow -unfollow").find("span.button-text").text("Unfollow")}).on("mouseout",".js-button-following",function(e){$(this).removeClass("button-unfollow -unfollow").find("span.button-text").text("Following")}).on("ajax-success",".js-button-following",function(e,i,n,r){const t=$(this);t.trigger("ajax-working"),i.result?t.fadeOut("fast",function(){t[0].hidden=!0;const s=t.parent().find(".js-button-follow");s[0].hidden=!1,s.fadeIn("fast",function(){t.trigger("ajax-work-complete")})}):(i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")),me.publish(We,{invalidate:!0,follows:i.username}),gtag("event","unfollow",{event_category:"account",transport_type:"beacon"}),ga("send","event","Following","Unfollowed")}),$(document).on("ajax-success",".js-button-follow",function(e,i,n,r){const t=$(this);t.trigger("ajax-working"),i.result?t.fadeOut("fast",function(){t[0].hidden=!0;const s=t.parent().find(".js-button-following");s[0].hidden=!1,s.fadeIn("fast",function(){t.trigger("ajax-work-complete")})}):(i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")),me.publish(We,{invalidate:!0,follows:i.username}),gtag("event","follow",{event_category:"account",transport_type:"beacon"}),ga("send","event","Following","Followed")}),$(document).on("click","a.link-blocked",function(e){e.preventDefault()}),$(document).on("mouseover","a.js-button-blocked",function(e){$(this).addClass("button-unblock").find("span.button-text").text("Unblock")}).on("mouseout","a.js-button-blocked",function(e){$(this).removeClass("button-unblock").find("span.button-text").text("Blocked")}).on("ajax-success","a.js-button-blocked",function(e,i,n,r){const t=$(this);if(t.trigger("ajax-working"),i.result){const s=t.closest(".follow-button-wrapper").data("username");me.publish(We,{invalidate:!0,follows:s,followers:s}),PubSub.publish(fi,{member:s,blocked:!1}),t.fadeOut("fast",function(){t[0].hidden=!0,nn("block-button.change",s,{blocked:!1});const o=t.parent().find(".js-button-follow");o[0].hidden=!1,o.fadeIn("fast",function(){t.trigger("ajax-work-complete")})})}else i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")}),$(document).on("change",".js-close-friend-triggers",function(e){person.canSeePrivateViewings&&(e.detail.friend?($(this).find('[data-js-trigger="unfriend"]').css("visibility","visible").removeAttr("hidden"),$(this).find('[data-js-trigger="befriend"]').css("visibility","hidden").attr("hidden","")):($(this).find('[data-js-trigger="unfriend"]').css("visibility","hidden").attr("hidden",""),$(this).find('[data-js-trigger="befriend"]').css("visibility","visible").removeAttr("hidden")))}),$(document).on("ajax-success",'[data-js-trigger="befriend"]',function(e,i,n,r){if(i.result){bxd.showMessages("success","Added to Close Friends");const t=this.closest(".js-close-friend-triggers").dataset.owner;me.publish(We,{invalidate:!0,friends:t}),$(".js-close-friend-triggers[data-owner="+t+"]").each(function(){et("change",this,{username:t,friend:!0})})}else i.messages&&bxd.showMessages("error",i.messages)}),$(document).on("ajax-success",'[data-js-trigger="unfriend"]',function(e,i,n,r){if(i.result){bxd.showMessages("success","Removed from Close Friends");const t=this.closest(".js-close-friend-triggers").dataset.owner;me.publish(We,{invalidate:!0,friends:t}),$(".js-close-friend-triggers[data-owner="+t+"]").each(function(){et("change",this,{username:t,friend:!1})})}else i.messages&&bxd.showMessages("error",i.messages)}),$(document).on("ajax-success",'[data-js-trigger="block"]',function(e,i,n,r){const t=$(this);if(t.trigger("ajax-working"),i.result){const s=this.closest("[data-owner]").dataset.owner;me.publish(We,{invalidate:!0,follows:s,followers:s}),me.publish(fi,{member:s,blocked:!0}),t.trigger("ajax-work-complete")}else i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")}),PubSub.subscribe("block-member",function(e,i){const n=i.member;if(i.blocked){person.blockedMembers.indexOf(n)<0&&person.blockedMembers.push(n);const t=()=>{nn("block-button.change",n,{blocked:!0})};$('.follow-button-wrapper[data-username="'.concat(n,'"]')).each(function(){const s=$(this).find(".js-button-blocked");s.length?$(this).css("visibility")==="hidden"?($(this).find(".js-button-following, .js-button-follow, .follows-message").hide().each(function(){this.hidden=!0}),s[0].hidden=!1,s.show(),$(this).css("visibility","visible"),t()):$(this).find(".js-button-following:visible, .js-button-follow:visible, .follows-message:visible").fadeOut("fast",function(){$(this)[0].hidden=!0,s[0].hidden=!1,s.fadeIn("fast"),t()}):$(this).remove()})}else{const r=person.blockedMembers.indexOf(n);r>=0&&person.blockedMembers.splice(r,1)}Gr(i.blocked,document.querySelectorAll('.js-block-triggers[data-owner="'.concat(n,'"]'))),commentSection.layoutCommentSection()})});function qe(e){return{buildKey(i){return{id:"".concat(e.payloadKey,":").concat(i)}},addRequired(i,n,r){const t=n[e.payloadKey];t&&!i.triggerIfValue(this,t)&&(r[e.requestKey].add(t),i.reserve(this,t))},invalidate(i,n){const r=n[e.payloadKey];r&&i.invalidate(this,r)},handleMetadata(i,n,r,t){const s=e.getResponseData(r);for(const o of n[e.requestKey])i.isInvalidated(this,o)?t({[e.payloadKey]:o}):i.triggerWithValue(this,o,e.buildRelationship(o,s))},callback:e.cacheCallback,...e.override}}const Qr=qe({payloadKey:"production",requestKey:"productions",getResponseData:e=>({liked:new Set(e.liked),watched:new Set(e.watched),ratings:new Map((e.ratings||[]).map(i=>[i.uid,{ratingOutOf10:i.rating,isDerived:!!i.derived}])),watchlisted:new Set(e.watchlisted)}),buildRelationship:(e,i)=>{var t;const{ratingOutOf10:n=0,isDerived:r=!1}=(t=i.ratings.get(e))!=null?t:{};return{isLiked:i.liked.has(e),isWatched:i.watched.has(e),isInWatchlist:i.watchlisted.has(e),ratingOutOf10:n,isDerived:r}},cacheCallback:(e,i)=>{Fn(e,i),no(e,i),so(e,i),ro(e,i)}}),hi=qe({payloadKey:"likeable",requestKey:"likeables",getResponseData:e=>new Set(e.liked),buildRelationship:(e,i)=>({isLiked:i.has(e)}),cacheCallback:Fn,override:{addRequired:(e,i,n)=>{if(i.likeable&&!e.triggerIfValue(hi,i.likeable)){const r=ks(i.likeable);if(Ts(r))throw new Error("The 'likeable' metadata request should not be used for productions. Use 'production' instead: ".concat(i.likeable));n.likeables.add(i.likeable),e.reserve(hi,i.likeable)}}}}),Jr=qe({payloadKey:"notable",requestKey:"notables",getResponseData:e=>new Set(e.noted),buildRelationship:(e,i)=>({hasPrivateNote:i.has(e)}),cacheCallback:(e,i)=>{const n={type:ir.StateChange,data:i};me.publish(Xs.buildChannelKey(e),n)}}),Zr=qe({payloadKey:"follows",requestKey:"follows",getResponseData:e=>({usersBlocked:new Set(e.usersBlocked),usersFollowed:new Set(e.usersFollowed)}),buildRelationship:(e,i)=>i.usersBlocked.has(e)?{isBlockedByMe:!0,isFollowedByMe:!1}:{isBlockedByMe:!1,isFollowedByMe:i.usersFollowed.has(e)},cacheCallback:(e,i)=>{if(i.isBlockedByMe){const n={member:e,blocked:!0};me.publish(fi,n);return}for(const n of document.querySelectorAll('.follow-button-wrapper[data-username="'.concat(e,'"]'))){const r=Hi(n,".js-button-following"),t=Hi(n,".js-button-follow");if(i.isFollowedByMe){r.hidden=!1,t.hidden=!0;for(const s of n.querySelectorAll(".js-show-if-following"))s.hidden=!1}else r.hidden=!0,t.hidden=!1;n.style.visibility="visible",et("follow-button.change",n,{username:e})}}}),eo=qe({payloadKey:"followers",requestKey:"followers",getResponseData:e=>new Set(e.usersFollowing),buildRelationship:(e,i)=>({isFollowingMe:i.has(e)}),cacheCallback:(e,i)=>{if(i.isFollowingMe)for(const n of document.querySelectorAll('.follow-button-wrapper[data-username="'.concat(e,'"]'))){const r=n.querySelector(".follows-message");r&&(r.hidden=!1)}}}),to=qe({payloadKey:"friends",requestKey:"friends",getResponseData:e=>new Set(e.usersFriends),buildRelationship:(e,i)=>({isCloseFriend:i.has(e)}),cacheCallback:(e,i)=>{for(const n of document.querySelectorAll('.js-close-friend-triggers[data-owner="'.concat(e,'"]')))et("change",n,{username:e,friend:i.isCloseFriend})}}),io=qe({payloadKey:"viewingable",requestKey:"viewingables",getResponseData:e=>new Map((e.viewingables||[]).map(i=>[i.uid,i.viewings])),buildRelationship:(e,i)=>({viewings:i.get(e)||[]}),cacheCallback:(e,i)=>{const n={viewings:i.viewings};me.publish(Ks.buildChannelKey(e),n)}});function Fn(e,i){const n={type:_i.InitialData,data:i};me.publish(Gs.buildChannelKey(e),n)}function no(e,i){const n={type:_i.InitialData,data:{currentRatingOutOf10:i.ratingOutOf10,currentIsDerived:i.isDerived}};me.publish(Qs.buildChannelKey(e),n),Is(e,i.ratingOutOf10,i.isDerived,{initialRating:!0})}function so(e,i){const n={watched:i.isWatched};me.publish(Js.buildChannelKey(e),n),bxd.setAsWatched(e,i.isWatched)}function ro(e,i){const n={type:_i.InitialData,data:i};me.publish(Zs.buildChannelKey(e),n)}const pi=[Qr,hi,Jr,Zr,eo,to,io];class oo{constructor(){ae(this,"cache",{})}get(i){return this.cache[i.id]}set(i,n){this.cache[i.id]=n}invalidate(i){delete this.cache[i.id]}clear(){this.cache={}}}const sn=Symbol("reserved");class ao{constructor(){ae(this,"cache",new oo)}triggerWithValue(i,n,r){this.cache.set(i.buildKey(n),r),i.callback(n,r)}triggerIfValue(i,n,r){const t=this.cache.get(i.buildKey(n));return t===void 0?!1:(t===sn||(r?r(n,t):i.callback(n,t)),!0)}reserve(i,n){this.cache.set(i.buildKey(n),sn)}isInvalidated(i,n){return this.cache.get(i.buildKey(n))===void 0}invalidate(i,n){this.cache.invalidate(i.buildKey(n))}}function zn(){return{productions:new Set,follows:new Set,followers:new Set,friends:new Set,likeables:new Set,notables:new Set,viewingables:new Set}}function lo(e){return e.productions.size===0&&e.follows.size===0&&e.followers.size===0&&e.friends.size===0&&e.likeables.size===0&&e.notables.size===0&&e.viewingables.size===0}const co=2,Wn=200,mi=new ao;let ei=zn(),rn;me.subscribe(We,Bn);function Bn(e){if(e.invalidate)for(const i of pi)i.invalidate(mi,e);else{for(const i of pi)i.addRequired(mi,e,ei);clearTimeout(rn),rn=window.setTimeout(()=>{const i=ei;ei=zn(),uo(i)},Wn)}}function uo(e){lo(e)||Es(()=>fo(e),{maxRetries:co,timeoutInMs:Wn}).then(i=>{i.csrf&&Ci(i.csrf);for(const n of pi)n.handleMetadata(mi,e,i,Bn)}).catch(()=>{bxd.componentFailed()})}async function fo(e){const i=new URLSearchParams;for(const[t,s]of Object.entries(e))for(const o of s)i.append(t,o);const n=await fetch("".concat(baseURL,"/ajax/letterboxd-metadata/"),{method:"POST",body:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!n.ok)throw new Error("Failed to fetch metadata: ".concat(n.status," ").concat(n.statusText));return await n.json()}$(function(){const e=Rn("listFilter");$("#hide-list-toggle-menu").length&&(jn(".js-list-filter",e,Object.assign({},e),"listFilter"),Nn("#hide-list-toggle-menu",".hide-list-toggle-menu"))});$(function(){const s=function(h,f){const y=(f.changedTouches?f.changedTouches[0].pageX:f.pageX)-$(h).offset().left;if(y<0)return 0;const v=Math.ceil(y/13/1);return v>10?10:v},o=function(h,f,m){const y=(+f-0)*13*1,v=(10-(+m-0))*13*1;return h.css("clip-path","inset(0px ".concat(v,"px 0px ").concat(y,"px)")),h},a=function(h){return h===1?".5":h%2===0?""+h/2:Math.floor(h/2)+".5"};$("div.js-rating-filter").each(function(){const h=$(this),f=h.find(".rateit-range"),m=h.find(".rateit-selected"),y=h.find(".rateit-hover"),v=h.data("action"),b=h.data("lower"),d=h.data("upper"),p=function(_,w){y.hide(),_&&w?_===w?o(m.show(),0,_):o(m.show(),_-1,w):m.hide()},l=function(_,w){m.hide(),_&&w?_===w?o(y.show(),0,_):o(y.show(),_-1,w):y.hide()},u=_=>(_.preventDefault(),!1);p(b,d);let g=!1,x=null,S=null;f.mousemove(function(_){const w=s(this,_);S!=w&&(S=w,g&&x!==w?(f.addClass("-selecting"),l(0+Math.min(x,w),0+Math.max(x,w))):l(0+w,0+w))}),f.mouseleave(function(_){S=null,x=null,p(b,d),g&&(g=!1,f.removeClass("-selecting"),document.removeEventListener("selectstart",u))}),f.mousedown(function(_){g||(x=s(this,_),g=!0,document.addEventListener("selectstart",u))}),f.mouseup(function(_){if(g){const w=s(this,_),k=Math.min(w,x)+0,C=Math.max(w,x)+0;if(x=null,S=null,g=!1,f.removeClass("-selecting"),document.removeEventListener("selectstart",u),p(k,C),k!==b||C!==d){const T=k===C?a(k):a(k)+"-"+a(C),E=v.replace("%7B%7Bvalue%7D%7D",T);document.location.href=E}}}),f.bind("touchstart touchmove touchend",c)});function c(h){const m=h.originalEvent.changedTouches[0];let y="";switch(h.type){case"touchstart":y="mousedown";break;case"touchmove":y="mousemove";break;case"touchend":y="mouseup";break;default:return}const v=document.createEvent("MouseEvent");v.initMouseEvent(y,!0,!0,window,1,m.screenX,m.screenY,m.clientX,m.clientY,!1,!1,!1,!1,0,null),m.target.dispatchEvent(v),h.preventDefault()}});$(function(){function e(c,h){$("#pagination-errors").remove();const f=$(h),m=f.filter(".error-message"),y=f.filter(".no-results");if(m.length){const v=[];m.each(function(){v.push($(this).html())}),$(".pagination").after("<div id='pagination-errors' class='messages'></div>"),bxd.showMessages("error",v)}else if(y.length)c.hide(),$("#search-header").after(y.html());else{f.find(".truncate").each(function(){const d=$(this),p=d.data("truncate");d.condense({condensedLength:p,moreText:"&hellip;more",lessText:"&times;",ellipsis:"",moreSpeed:0,lessSpeed:0})});const v=$(c.data("ajax-target")),b=f.data("cursor");if(v.append(f),f.hide().fadeIn("slow"),b){c.data("cursor",b);let d=v.children("section:last-child").data("searchId");typeof d>"u"&&(d=0),c.data("after-id",d)}else c.hide();bxd.layout(f),In(f.get())}}$(document).on("click",".load-more-search",function(c){c.preventDefault(),i($(this))}).on("ajax-success",".load-more-search",function(c,h,f,m){const y=$(this);$("#pagination-errors").remove(),e(y,h)}).on("ajax-working",".load-more-search",function(c,h,f,m){$(this).lbSpinner({size:12,fallback:globals.spinners.spinner_12_2C3641})}).on("ajax-error",".load-more-search",function(){$(this).lbSpinner("stop")}).on("ajax-work-complete",".load-more-search",function(c,h,f,m){$(this).lbSpinner("stop")});function i(c){n(c),c.trigger("ajax-action")}function n(c){let h=c.data("url");const f=c.data("cursor"),m=h.indexOf("?")===-1?"?":"&";f&&(h+=m+"cursor="+f),c.data("action",h)}const r=$(".paginate-ajax > .load-more-search");r.length&&i(r);const t=$(".js-search-filter-options");let s=!1,o=!1;r.on("ajax-working",function(){o=!0}).on("ajax-ready-for-next-action",function(){o=!1,s?($("#search-table-body").hide(),s=!1,a()):$("#search-table-body").show()}),t.find("input").on("click",function(){o?s=!0:a()});function a(){$("#search-table-body").empty(),r.show(),r.removeData("after-id"),r.trigger("click")}});(function(e){e.fn.stringData=function(i){return e(this).attr("data-"+i)}})(jQuery);$(function(){if(!$("body").hasClass("tags"))return;const e=$(".saving");$(".js-delete").data("modal-confirm",{ok:"Delete Tag"}).on("ajax-action",function(){e.closest("section").addClass("sending-ajax"),e.lbSpinner({size:14,fallback:globals.spinners.spinner_14_20272f,insertion:"prepend",element:"span"})}).on("ajax-error",function(){e.lbSpinner("stop"),e.closest("section").removeClass("sending-ajax")});const i=$(".js-tags-section").data("edit-modal-action"),n=$(".js-tags-section").data("edit-action"),r=$(".js-tags-section").data("check-action"),t=function(a){e.text("Updating tags..."),e.closest("section").addClass("sending-ajax"),e.lbSpinner({size:14,fallback:globals.spinners.spinner_14_20272f,insertion:"prepend",element:"span"}),$.ajax({url:n,type:"POST",data:a,traditional:!0,xhrFields:{withCredentials:!0},success:function(c,h,f){c&&c.csrf&&Ci(c.csrf),c&&c.result?document.location.reload():c&&c.messages&&(bxd.showMessages(c.result?"success":"error",c.messages),e.lbSpinner("stop"),e.closest("section").removeClass("sending-ajax"))},error:function(c,h,f){bxd.showMessages("error","An unexpected network error occurred.  Please try saving the form again."),e.lbSpinner("stop"),e.closest("section").removeClass("sending-ajax")}})},s=function(a,c){if(!a.data("ajax-working")){a.data("ajax-working",!0);const h=a.serialize();$.ajax({url:r,type:"POST",data:h,traditional:!0,xhrFields:{withCredentials:!0},success:function(f,m,y){f.result&&f.count>0?bxd.colorboxModalConfirm("A ".concat(f.tagCode," tag already exists on ")+bxd.pluralise(f.count,"item")+". This action will merge ".concat(f.count==1?"that tag":"those tags"," with the tag youre renaming, which exists on ")+bxd.pluralise(c,"item")+". There is no undo! Do you wish to continue?",{ok:"Merge Tags"},function(){t(h)}):($(".js-edit").colorbox.close(),f.messages&&f.errorCodes.indexOf("tag.same.name")>-1?bxd.showMessages(f.result?"success":"error",f.messages):t(h))},complete:function(f,m){a.data("ajax-working",!1)},error:function(f,m,y){bxd.showMessages("error","An unexpected network error occurred.  Please try saving the form again.")}})}},o={href:i+"#modal",innerWidth:"510px",overlayClose:!1,title:" ",onComplete:function(){const a=$(this);$("#tag-editor-modal input[name=tagCode]").val(a.data("rawTag")),$("#tag-editor-modal input[name=code]").val(a.data("code")),$("#tag-editor-modal input[name=rawTag]").val(a.data("rawTag")),$("#tag-editor-modal input[name=newTagCode]").val(a.data("rawTag")).focus();const c=$("#tag-editor-modal form"),h=a.data("count");c.on("submit",function(f){f.preventDefault(),s(c,h)}),$("#edit-tag-cancel-button").on("click",function(){$(".js-edit").colorbox.close()}),$(".js-edit").colorbox.resize()}};$(".js-edit").colorbox(o)});$(function(){$(".js-tmdb-bio").condense({condensedLength:200,moreText:" more",lessText:"&times;",ellipsis:"&hellip;",moreSpeed:0,lessSpeed:0}),nr()});(function(e){const i=[];function n(t){t.data("form-state-before-submit",t.data("form-initial-state"))}function r(t){t.data("form-initial-state",t.sanitisedSerialisedFormForProtection())}e.fn.sanitisedSerialisedFormForProtection=function(){return e(this).serialize().replace(/__csrf=[^&]*/,"__csrf=").replace(/&(shareOnFacebook|json)=(true|false)/g,"")},e.fn.revertUnsavedChanges=function(){const t=e(this);t.data("form-initial-state",t.data("form-state-before-submit"))},e.fn.protectUnsavedChanges=function(t){const s={warning:"You have unsaved changes"};return t&&e.extend(s,t),e(this).each(function(){const o=e(this);if(s.clear){o.data("form-initial-state","");return}r(o),s.reset||(o.revertUnsavedChanges=function(){},o.data("protect-unsaved-changes-warning",s.warning),o.submit(function(){n(o),r(o)}),i.push(o))})},e(window).bind("beforeunload",function(t){t=t||window.event;for(let s=0;s<i.length;s++){const o=i[s];if(o.data("form-initial-state")!=o.sanitisedSerialisedFormForProtection()){o.trigger("unsaved-changes");const a=o.data("protect-unsaved-changes-warning");return t&&t.preventDefault(),a}}})})(jQuery);$(document).on("click","a.js-form-action",function(e){if(e.preventDefault(),!$(this).hasClass("btn-loading")){$(this).addClass("btn-loading");const i=$(this).data("form-id"),n=$("#"+i);n.find("input[name=__csrf]").value=window.supermodelCSRF,n.submit()}});$(document).on("unsaved-changes","form",function(){$(this).find("a.js-form-action").removeClass("btn-loading")});$(document).on("click","a.popup",function(e){e.preventDefault(),$.fn.popupWindow({windowURL:this.href,windowName:$(this).data("popup-name"),width:$(this).data("popup-width"),height:$(this).data("popup-height"),centerBrowser:!0})});function ho(){try{const e=function(i){return i.indexOf("anal")>=0||i.indexOf("arse")>=0||i.indexOf("cunt")>=0||i.indexOf("dick")>=0||i.indexOf("faggot")>=0||i.indexOf("fuck")>=0||i.indexOf("nigga")>=0||i.indexOf("nigger")>=0||i.indexOf("rape")>=0||i.indexOf("sex")>=0||i.indexOf("shit")>=0||i.indexOf("slut")>=0||i.indexOf("wank")>=0||i.indexOf("whore")>=0};if($("div.site-body h1").filter(function(){const i=$(this).text().toLowerCase();return e(i)}).length)return!1}finally{}return!0}window.word_check=ho;$(function(){$("#import-to-watchlist").click(function(e){e.preventDefault(),$("#import-to-watchlist-input").trigger("click")}),$("#import-to-watchlist-input").change(function(){const e=$("#import-to-watchlist-form");e.find("input[name=__csrf]").value=window.supermodelCSRF,e.submit()})});$(function(){$("#favourite-films, #favourite-shows").sortable({axis:"x",helper:"clone"});let e=328;renderMobile&&(e=262),$(".frm-favourite-name").each(function(){const r=$(this);r.autocomplete(r.data("url"),$.extend({},bxd.autocompleteConfig,{width:e})).result(function(t,s,o){const a=r.closest(".favourite-search-modal"),c=a.data("type"),h="favourite-"+c+"s",f="favourite"+c.charAt(0).toUpperCase()+c.slice(1)+"Ids",m=a.data("list-index");r.val("").trigger("flushCache"),a.colorbox.close();const y=$($("#"+h+" li")[m]);y.addClass("poster -placeholder").html('<div class="loading-poster"></div><input type="hidden" name="'+f+'" value="'+s.id+'"/>');const v=y.find("div");$.get(s.image125,function(b){v.removeClass("loading-poster").addClass("favourite-production-poster-container").empty().prepend(b),y.removeClass("-placeholder"),renderMobile&&y.append('<a href="#" class="replace remove-favourite-production">remove</a>'),bxd.layout(v)})})}),$(".favourite-productions").each(function(){const r=$(this);renderMobile?(r.find("a.remove-favourite-production").remove(),r.find("li").each(function(){$(this).find(".favourite-production-poster-container").length&&$(this).append('<a href="#" class="replace remove-favourite-production">remove</a>')})):r.find("li").on("mouseenter",function(){$(this).find("a.remove-favourite-production").remove(),$(this).find(".favourite-production-poster-container").length&&$(this).append('<a href="#" class="replace remove-favourite-production">remove</a>')}).on("mouseleave",function(){$(this).find("a.remove-favourite-production").remove()})}),$(".favourite-productions").on("click","a.remove-favourite-production",function(r){r.preventDefault();const t=$(this).closest("li"),s=t.closest("ul");t.fadeOut(function(){t.appendTo(s).html("").append('<div class="poster -placeholder"></div>').show()})}),$(".favourite-productions li").on("click",function(r){if(!$(r.target).hasClass("remove-favourite-production")){r.preventDefault();const t=$(this).closest("ul"),s=t.attr("id")==="favourite-films"?"film":"show",o=t.find("li").index(this);$('.favourite-search-modal[data-type="'+s+'"]').data("list-index",o),$('.open-favourite-modal[data-type="'+s+'"]').trigger("click")}});const i=r=>$('.favourite-search-modal[data-type="'.concat(r,'"]')).find(".frm-favourite-name");function n(r){const t={inline:!0,fixed:!0,overlayClose:!1,href:'.favourite-search-modal[data-type="'.concat(r,'"]'),onComplete:function(){i(r).focus()},onClosed:function(){i(r).trigger("close")}};renderMobile&&(t.width="100%",t.initialWidth="288px",t.initialHeight="200px",t.transition="fade",t.speed=0),$('.open-favourite-modal[data-type="'.concat(r,'"]')).colorbox(t)}n("film"),n("show")});$(function(){const e=$("#films-browser-list-container");if(e.length){let i=function(){e.find(".placeholder-empty").html('<p class="calculating">Calculating</p>'),$(".calculating").lbSpinner({size:14,fallback:globals.spinners.spinner_14_20272f,insertion:"prepend",element:"span"}),$.get(e.data("url"),function(n,r,t){r=="success"?(e.empty().prepend(n),bxd.layout(e)):e.find(".placeholder-empty").html('<p>Unable to contact Letterboxd. Please&nbsp;<a href="#">try&nbsp;again</a>.</p></div>').find("a").click(function(s){s.preventDefault(),i()})})};e.append('<div class="placeholder-empty"></div>'),i()}});$(function(){if($("#imdb-importer-matched-form").protectUnsavedChanges(),$("input[name=hide-successful-matches]").on("change",function(r){r.preventDefault(),$("input[name=hide-successful-matches]").is(":checked")?($($(".import-film").not(":has(.import-no-match, .duplicate-match)")).hide(),$(".import-film").is(":visible")||($("#only-successful-matches-message").show(),$("#import-films").hide())):($($(".import-film").not(":has(.import-no-match, .duplicate-match)")).show(),$("#only-successful-matches-message").is(":visible")&&($("#only-successful-matches-message").hide(),$("#import-films").show())),e()}),$("#imdb-import-button").length&&($("#imdb-import-button").click(function(t){t.preventDefault(),$("#upload-imdb-import").trigger("click")}),$("#upload-imdb-import").change(function(){$("#imdb-form").submit()})),$("#importer-matched-form").length){n(),e();const r=$("#importer-matched-form");r.on("click","#replace-original",function(t){e()}),r.on("click","#mark-list-films-as-watched",function(t){e()}),r.on("click","#add-ratings-from-list",function(t){$("#add-ratings-from-list").is(":checked")?$(".js-import-match-reactions").show():$(".js-import-match-reactions").hide(),e()}),r.on("click","#add-notes-from-list",function(t){$(".import-review").is(":visible")?$(".import-review").hide():$(".import-review").show(),e()})}if($("#imdb-importer-matched-form").length){$(".profile-link").hide(),n(),e();const r=$("#imdb-importer-matched-form");r.on("click","#mark-list-films-as-watched",function(t){e()}),r.on("click","#add-ratings-from-list",function(t){$("#add-ratings-from-list").is(":checked")?$(".js-import-match-reactions").show():$(".js-import-match-reactions").hide(),e()}),r.on("click","#add-reviews-from-list",function(t){$(".import-review").is(":visible")?$(".import-review").hide():$(".import-review").show(),e()}),r.on("click","#add-watchedDates-from-list",function(t){$(".view-date").is(":visible")?$(".view-date,.duplicate-entry").hide():$(".view-date,.duplicate-entry").show(),e()}),r.on("click","#add-tags-from-list",function(t){$(".import-tags").is(":visible")?$(".import-tags").hide():$(".import-tags").show(),e()})}function e(){let r="",t="";const s=[];let o="",a=!1,c=!1,h=!1,f=!1;$("a.save-users-imported-imdb-history").removeClass("import-button-disabled").css({opacity:1}),$("#import-text-suffix").show(),$("#replace-original").is(":checked")&&(r=r+"The existing list will be replaced",c=!0,a=!0),($("#mark-list-films-as-watched").is(":checked")||$("#mark-list-films-as-watched").is(":hidden"))&&(a?t=" films will be marked as watched ":t="Films will be marked as watched ",c=!0,f=!0),$("#add-watchedDates-from-list").is(":checked")&&(s.push(s.length||a||f?"diary entries":"Diary entries"),c=!0,h=!0),$("#add-reviews-from-list").is(":checked")&&(s.push(s.length||a||f?"reviews":"Reviews"),c=!0,h=!0),$("#add-notes-from-list").is(":checked")&&(s.push(s.length||a||f?"list notes":"List notes"),c=!0,h=!0),$("#add-ratings-from-list").is(":checked")&&(s.push(s.length||a||f?"ratings":"Ratings"),c=!0),$("#add-tags-from-list").is(":checked")&&(h?s.push(s.length||a||f?"tags":"Tags"):o=" Tags cannot be added without a review or a viewing date."),a&&(f&&s.length?r=r+",":f?r=r+" and":r+=" "),f&&(r=r+t),(a||f)&&s.length&&(r=r+" and ");for(let m=0;m<s.length;m++)m==s.length-1&&s.length>1&&(r=r+" and "),r=r+s[m],m<s.length-2&&(r=r+", ");s.length&&(r=r+" will be added "),r.length&&(r=r+"as part of this import. There is no undo, so please be careful!"),c||($(".save-users-imported-imdb-history").length?($("#import-text-suffix").hide(),o="",r="You cannot import tags by themselves. You must import them with reviews or watched dates."):r="No changes will be made to your watched films.",$("a.save-users-imported-imdb-history").addClass("import-button-disabled").css({opacity:.35})),r=r+o,$("#import-options-text").text(r)}function i(r){r.hide(),$(".import-buttons").hide(),$(".import-toggle").hide();const t=r.find("#import-films").children().length;let s=0;$("p.js-import-progress").html('<span id="import-count"><strong>0</strong></span> films processed from <strong>'+bxd.formatNumber(t)+"</strong> in your file.");const o=25;$("p.js-import-progress").prepend('<span id="spinner" class="small"></span>'),$("#spinner").lbSpinner({size:18});const a=$("<form></form>"),c=["importRating","importReview","importTags","importWatchedDate","importRewatch","importCreatedDate","importFilmId","importViewingId","shouldImportFilm"];$.each(c,function(m,y){const v=r.find($("[name="+y+"]"));a.append(v)});const h=r.serialize();function f(){const m=$("<form></form>");if($.each(c,function(y,v){const b=a.find("[name="+v+"]:lt("+o+")");m.append(b)}),m.children().length>0){let v=function(){$.ajax({url:r.attr("action"),type:"POST",data:h+"&"+m.serialize(),success:function(b){b.result?(s=s+m.children('input[name="shouldImportFilm"][value="true"]').length,$("p.js-import-progress #import-count").html("<strong>"+bxd.formatNumber(s)+"</strong>"),f()):b.messages&&bxd.showMessages("error",b.messages)},error:function(){y++,y>3?($("#spinner").remove(),$("a.submit-matched-films").addClass("import-button-disabled").css({opacity:.35}),bxd.showMessages("error","Oh no! Somethings gone wrong. Please <a href='"+$(".btn-cancel-import").attr("href")+"'>retry</a> later.",{sticky:!0}),$("#imdb-importer-matched-form").protectUnsavedChanges({reset:!0})):setTimeout(v,50*Math.pow(2,y))}})},y=0;v()}else $("p.js-import-progress").html("<strong>Saved "+bxd.pluralise(s,"film")+".</strong>"),$(".import-buttons").hide(),$(".profile-link").show(),$("#imdb-importer-matched-form").protectUnsavedChanges({reset:!0})}f()}function n(){const r="NoMatch",t="Matched",s="Rejected",o=$("#import-count");let a;const c=$("#import-films");a=0;const h=c.children("li").length;$("p.js-import-progress").prepend('<span id="spinner" class="small"></span>'),$("#spinner").lbSpinner({size:18}),$(window).resize(function(){c.find(".import-film input.film-search").trigger("close")});const f={};c.on("click",".js-replace-film",function(p){p.preventDefault();const l=$(this).closest(".import-film");f.clickedSearch(l)}),c.on("click","a.mark-match-inaccurate",function(p){p.preventDefault();const l=$(this).closest(".import-film");f.clickedSearch(l)}),c.on("click",".close-film-replace",function(p){p.preventDefault();const l=$(this).closest(".import-film");f.clickedSearch(l)}),c.on("click","a.mark-match-accurate",function(p){p.preventDefault();const l=$(this).closest(".import-film");f.clickedIsAccurate(l)}),c.on("click",".js-remove-film",function(p){p.preventDefault();const l=$(this).closest(".import-film");f.clickedRejectFilm(l)}),c.on("click",".import-search-link",function(p){p.preventDefault();const l=$(this).closest(".import-film");f.setState(l,r),f.clickedSearch(l)}),f.updateDOM=function(p){const l=p.find(".import-film-details");l.removeClass("poor-match").removeClass("dont-add").removeClass("duplicate-match").removeClass("icon-hidden"),p.find(".import-match").css({opacity:1}),p.find(".import-search-text").show();let u=!0;const g=f.getState(p);switch(g){case t:break;case s:l.addClass("icon-hidden"),p.find(".import-match").css({opacity:.2}),u=!1;break;case r:p.find(".import-search-text").show(),l.addClass("import-no-match"),u=!1;break}g==t&&f.isDuplicate(p)?(p.find(".duplicate-film").show(),l.addClass("duplicate-match"),u=!1):p.find(".duplicate-film").hide(),f.isSearching(p)?(p.addClass("import-state-search"),p.find(".js-production-viewing").hide(),p.find(".import-search").show().find("input").focus(),p.find("div.icon-matched").hide(),p.find(".import-search-text").hide(),u=!1):(p.find(".import-search").hide(),p.removeClass("import-state-search"),p.find(".js-production-viewing").show(),p.find("div.icon-matched").show());const x=f.isShouldImport(p);u!=x&&(f.setShouldImport(p,u),f.checkIfDuplicate(p))},f.checkIfDuplicate=function(p){let l=!1;const u=f.getFilmId(p),g=[];$("#importer-matched-form input[name=filmId]").each(function(){g.push($(this).val())});const x=[];$("#importer-matched-form input[name=importFilmId]").each(function(){x.push($(this).val()||-1)});const S=[];$("#importer-matched-form input[name=shouldImportFilm]").each(function(){S.push($(this).val())});for(let _=0;_<g.length;_++)u==g[_]&&(l=!0);if(!l){let _=0;for(let w=0;w<x.length;w++)u==x[w]&&S[w]=="true"&&_++;f.isShouldImport(p)||_++,_>1&&(l=!0)}p.data("duplicate",l),f.updateDOM(p)},f.isDuplicate=function(p){let l=p.data("duplicate");return typeof l>"u"&&(l=!1),l},f.isShouldImport=function(p){return p.find("input[name=shouldImportFilm]").val()=="true"},f.setShouldImport=function(p,l){p.find("input[name=shouldImportFilm]").val(l)},f.getFilmId=function(p){return p.find("input[name=importFilmId]").val()},f.getState=function(p){return p.data("state")},f.setState=function(p,l){p.data("state",l)},f.isSearching=function(p){let l=p.data("searching");return typeof l>"u"&&(l=!1),l},f.setSearching=function(p,l){p.data("searching",l)},f.clickedRejectFilm=function(p){const l=f.getState(p);let u="Remove this film";f.isSearching(p)&&f.setSearching(p,!1),l==s?p.find(".import-search-text").length?f.setState(p,r):f.setState(p,t):(f.setState(p,s),u="Restore this film"),f.updateDOM(p),p.find(".js-remove-film").attr("data-original-title",u).twipsy("show")},f.clickedSearch=function(p){f.isSearching(p)?f.setSearching(p,!1):f.setSearching(p,!0),f.updateDOM(p)},f.clickedIsAccurate=function(p){f.updateDOM(p)},f.initImportFilm=function(p){p.find("input[name=importFilmId]").val()!==""?f.setState(p,t):f.setState(p,r),f.setSearching(p,!1),f.updateDOM(p),f.checkIfDuplicate(p)};let m;$("#diary-importer-identifier").length?m="diary":$("#list-importer-identifier").length?m="list":$("#watchlist-importer-identifier").length&&(m="watchlist");const y=$("#import-films");v(y,m),$("#import-films").fadeIn();function v(p,l,u){let g=u!==void 0?u.next(".import-film").first():p.find(".import-film").first();const x=[],S=100;for(let _=0;_<S;_++)x[_]=g,g=g.next(".import-film"),x[_].data("matchThisFilmOnly",!1);$("a.submit-matched-films").addClass("import-button-disabled").css({opacity:.35}),x[0].length?b(x,S,l,function(){v(p,l,x[x.length-1])}):($("a.submit-matched-films").removeClass("import-button-disabled").css({opacity:1}),$("#imdb-importer-matched-form").show(),$("#importer-matched-form").show(),e())}function b(p,l,u,g){let x,S='{ importType: "'+u+'", importFilms: [ ';for(let T=0;T<l;T++)x=p[T].attr("data-json"),S=S+x,T<l-1&&(S=S+", ");S=S+" ]}";let _;$("#imdb-importer-matched-form").length?_=$("#imdb-importer-matched-form").data("url"):_=$("#importer-matched-form").data("url");let w=0;function k(){$.ajax({url:_,type:"POST",data:{json:S,__csrf:mt()},dataType:"html",success:function(T){C(T,-1)},error:function(T){w++,w>3?($("#spinner").remove(),$("a.submit-matched-films").addClass("import-button-disabled").css({opacity:.35}),bxd.showMessages("error","Oh no! Somethings gone wrong. Please <a href='"+$(".btn-cancel-import").attr("href")+"'>retry</a> later.",{sticky:!0}),$("#importer-matched-form").protectUnsavedChanges({reset:!0}),$(".btn-cancel-import").text("Retry"),$(".save-users-imported-imdb-history").hide()):setTimeout(k,50*Math.pow(2,w))}})}k();function C(T,E){const A=$("<div></div>").html(T).children(),D=A.length;if(a+=D,a>=h)$("h1.js-import-title").html("Import summary"),$("p.js-import-progress").html("<strong>Matching complete.</strong> Check the results and complete your import below."),$("div.js-hide-successful-matches").show();else{const P="<strong>"+bxd.formatNumber(a)+"</strong> "+(a===1?"film":"films");o.html(P)}const O=[];O[0]=A.first();for(let P=1;P<D;P++)O[P]=O[P-1].next();function L(P,I){const H=P.find("input.film-search");H.autocomplete(H.data("url"),$.extend({},bxd.autocompleteConfig,{width:328})).result(function(j,U){const q="{ filmId: "+U.id+", importFilms: [ "+P.attr("data-json")+"] }";let X;$("#imdb-importer-matched-form").length?X=$("#imdb-importer-matched-form").data("url"):X=$("#importer-matched-form").data("url"),$.ajax({url:X,type:"POST",data:{json:q,__csrf:mt()},dataType:"html",success:function(J){C(J,I)},error:function(){}})}),H.blur(function(){setTimeout(function(){H.trigger("close")},300)})}const M=function(){const P=$(this).text().split(","),I=$('<ul class="tags"></ul>');for(let H=0;H<P.length;H++){const j=$('<li class="tag"><span></span></li>');j.find("span").text($.trim(P[H])),I.append(j)}$(this).empty().append(I)};for(let P=0;P<D;P++){let I;E==-1?I=p[P]:I=p[E];const H=I.find(".matched");H.html(O[P]),bxd.layout(H),E==-1?L(I,P):L(I,E),H.find(".import-tags").each(M),I.find(".import-film-details").data("already-rated")===!0&&I.addClass("import-film-already-rated"),$(I.find(".import-match")).length&&f.initImportFilm(I)}if(p[0].data("matchThisFilmOnly")===!1){for(let P=0;P<l;P++)p[P].data("matchThisFilmOnly",!0);g()}}}$("a.add-import-films-to-list").click(function(p){p.preventDefault(),$(this).hasClass("import-button-disabled")||($(this).html("Adding Films"),$(this).addClass("import-button-disabled").css({opacity:.35}),$("#importer-matched-form").trigger("submit"))}),$("a.cancel-import").on("click",function(p){p.preventDefault();const l=$("#importer-matched-form");l.find("input[name=cancelled]").val("true"),l.find("input[name=name]").remove(),l.find("input[name=notes]").remove(),l.find("input[name=publicList]").remove(),l.find("input[name=numberedList]").remove(),l.find("input[name=tag]").remove(),l.find("input[name=importFilmId]").remove(),l.find("input[name=importViewingId]").remove(),l.find("input[name=shouldImportFilm]").remove(),l.find("input[name=importReview]").remove(),l.find("input[name=importRating]").remove(),$("#importer-matched-form").trigger("submit")}),$("a.add-import-films-to-watchlist").click(function(p){p.preventDefault(),$(this).hasClass("import-button-disabled")||($(this).html("Adding Films"),$(this).addClass("import-button-disabled").css({opacity:.35}),$("#imdb-importer-matched-form").trigger("submit"))}),$("a.save-users-imported-imdb-history").click(function(p){p.preventDefault(),$(this).hasClass("import-button-disabled")||($(this).html("Saving"),$(this).addClass("import-button-disabled").css({opacity:.35}),$("#imdb-importer-matched-form").trigger("submit"))}),$("#imdb-importer-matched-form").submit(function(p){p.preventDefault();const l=$("#imdb-importer-matched-form");return i(l),!1}),$("#importer-matched-form").submit(function(p){const l=$("#importer-matched-form");return l.append(d(l)),l.find("input[name=importFilmId]").remove(),l.find("input[name=importViewingId]").remove(),l.find("input[name=shouldImportFilm]").remove(),l.find("input[name=importReview]").remove(),l.find("input[name=importRating]").remove(),l.protectUnsavedChanges({reset:!0}),!0});function d(p){const l=[];p.find("li.import-film").each(function(){const g=$(this),x=g.find("input[name=shouldImportFilm]").val();if(x&&x=="true"){const _={film:g.find("input[name=importFilmId]").val()},w=g.find("input[name=importReview]").val();w&&w.trim().length>0&&(_.review=w.trim());const k=g.find("input[name=importRating]").val();k&&(_.rating=k),l.push(_)}});const u=$("<input type='hidden' name='entries'/>");return u.val(JSON.stringify(l)),u}$("#importer-matched-form").protectUnsavedChanges({warning:"Your list import will be canceled."})}});var Nt=function(){return Nt=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},Nt.apply(this,arguments)},po={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},mo=function(){function e(i){i===void 0&&(i={}),this.opts=Nt(Nt({},po),i)}return e.prototype.spin=function(i){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),this.el.style.position=this.opts.position,this.el.style.width="0",this.el.style.zIndex=this.opts.zIndex.toString(),this.el.style.left=this.opts.left,this.el.style.top=this.opts.top,this.el.style.transform="scale(".concat(this.opts.scale,")"),i&&i.insertBefore(this.el,i.firstChild||null),go(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&(this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function on(e,i){return typeof e=="string"?e:e[i%e.length]}function go(e,i){var n=Math.round(i.corners*i.width*500)/1e3+"px",r="none";i.shadow===!0?r="0 2px 4px #000":typeof i.shadow=="string"&&(r=i.shadow);for(var t=vo(r),s=0;s<i.lines;s++){var o=~~(360/i.lines*s+i.rotate),a=document.createElement("div");a.style.position="absolute",a.style.top="".concat(-i.width/2,"px"),a.style.width=i.length+i.width+"px",a.style.height=i.width+"px",a.style.background=on(i.fadeColor,s),a.style.borderRadius=n,a.style.transformOrigin="left",a.style.transform="rotate(".concat(o,"deg) translateX(").concat(i.radius,"px)");var c=s*i.direction/i.lines/i.speed;c-=1/i.speed;var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.background=on(i.color,s),h.style.borderRadius=n,h.style.boxShadow=yo(t,o),h.style.animation="".concat(1/i.speed,"s linear ").concat(c,"s infinite ").concat(i.animation),a.appendChild(h),e.appendChild(a)}}function vo(e){for(var i=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,t=e.split(",");r<t.length;r++){var s=t[r],o=s.match(i);if(o!==null){var a=+o[2],c=+o[5],h=o[4],f=o[7];a===0&&!h&&(h=f),c===0&&!f&&(f=h),h===f&&n.push({prefix:o[1]||"",x:a,y:c,xUnits:h,yUnits:f,end:o[8]})}}return n}function yo(e,i){for(var n=[],r=0,t=e;r<t.length;r++){var s=t[r],o=bo(s.x,s.y,i);n.push(s.prefix+o[0]+s.xUnits+" "+o[1]+s.yUnits+s.end)}return n.join(", ")}function bo(e,i,n){var r=n*Math.PI/180,t=Math.sin(r),s=Math.cos(r);return[Math.round((e*s+i*t)*1e3)/1e3,Math.round((-e*t+i*s)*1e3)/1e3]}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function an(e,i){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ee(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?an(Object(n),!0).forEach(function(r){wo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function At(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?At=function(i){return typeof i}:At=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},At(e)}function wo(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function Pe(){return Pe=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}function xo(e,i){if(e==null)return{};var n={},r=Object.keys(e),t,s;for(s=0;s<r.length;s++)t=r[s],!(i.indexOf(t)>=0)&&(n[t]=e[t]);return n}function _o(e,i){if(e==null)return{};var n=xo(e,i),r,t;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],!(i.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Co="1.15.6";function De(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Oe=De(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),vt=De(/Edge/i),ln=De(/firefox/i),ut=De(/safari/i)&&!De(/chrome/i)&&!De(/android/i),ki=De(/iP(ad|od|hone)/i),qn=De(/chrome/i)&&De(/android/i),$n={capture:!1,passive:!1};function G(e,i,n){e.addEventListener(i,n,!Oe&&$n)}function K(e,i,n){e.removeEventListener(i,n,!Oe&&$n)}function Ht(e,i){if(i){if(i[0]===">"&&(i=i.substring(1)),e)try{if(e.matches)return e.matches(i);if(e.msMatchesSelector)return e.msMatchesSelector(i);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(i)}catch(n){return!1}return!1}}function Un(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Te(e,i,n,r){if(e){n=n||document;do{if(i!=null&&(i[0]===">"?e.parentNode===n&&Ht(e,i):Ht(e,i))||r&&e===n)return e;if(e===n)break}while(e=Un(e))}return null}var cn=/\s+/g;function we(e,i,n){if(e&&i)if(e.classList)e.classList[n?"add":"remove"](i);else{var r=(" "+e.className+" ").replace(cn," ").replace(" "+i+" "," ");e.className=(r+(n?" "+i:"")).replace(cn," ")}}function W(e,i,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),i===void 0?n:n[i];!(i in r)&&i.indexOf("webkit")===-1&&(i="-webkit-"+i),r[i]=n+(typeof n=="string"?"":"px")}}function Ze(e,i){var n="";if(typeof e=="string")n=e;else do{var r=W(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!i&&(e=e.parentNode));var t=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return t&&new t(n)}function Yn(e,i,n){if(e){var r=e.getElementsByTagName(i),t=0,s=r.length;if(n)for(;t<s;t++)n(r[t],t);return r}return[]}function Ie(){var e=document.scrollingElement;return e||document.documentElement}function ce(e,i,n,r,t){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,a,c,h,f,m;if(e!==window&&e.parentNode&&e!==Ie()?(s=e.getBoundingClientRect(),o=s.top,a=s.left,c=s.bottom,h=s.right,f=s.height,m=s.width):(o=0,a=0,c=window.innerHeight,h=window.innerWidth,f=window.innerHeight,m=window.innerWidth),(i||n)&&e!==window&&(t=t||e.parentNode,!Oe))do if(t&&t.getBoundingClientRect&&(W(t,"transform")!=="none"||n&&W(t,"position")!=="static")){var y=t.getBoundingClientRect();o-=y.top+parseInt(W(t,"border-top-width")),a-=y.left+parseInt(W(t,"border-left-width")),c=o+s.height,h=a+s.width;break}while(t=t.parentNode);if(r&&e!==window){var v=Ze(t||e),b=v&&v.a,d=v&&v.d;v&&(o/=d,a/=b,m/=b,f/=d,c=o+f,h=a+m)}return{top:o,left:a,bottom:c,right:h,width:m,height:f}}}function un(e,i,n){for(var r=Re(e,!0),t=ce(e)[i];r;){var s=ce(r)[n],o=void 0;if(o=t>=s,!o)return r;if(r===Ie())break;r=Re(r,!1)}return!1}function tt(e,i,n,r){for(var t=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==B.ghost&&(r||o[s]!==B.dragged)&&Te(o[s],n.draggable,e,!1)){if(t===i)return o[s];t++}s++}return null}function Ti(e,i){for(var n=e.lastElementChild;n&&(n===B.ghost||W(n,"display")==="none"||i&&!Ht(n,i));)n=n.previousElementSibling;return n||null}function Ce(e,i){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==B.clone&&(!i||Ht(e,i))&&n++;return n}function dn(e){var i=0,n=0,r=Ie();if(e)do{var t=Ze(e),s=t.a,o=t.d;i+=e.scrollLeft*s,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[i,n]}function So(e,i){for(var n in e)if(e.hasOwnProperty(n)){for(var r in i)if(i.hasOwnProperty(r)&&i[r]===e[n][r])return Number(n)}return-1}function Re(e,i){if(!e||!e.getBoundingClientRect)return Ie();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var t=W(n);if(n.clientWidth<n.scrollWidth&&(t.overflowX=="auto"||t.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(t.overflowY=="auto"||t.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ie();if(r||i)return n;r=!0}}while(n=n.parentNode);return Ie()}function ko(e,i){if(e&&i)for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);return e}function ti(e,i){return Math.round(e.top)===Math.round(i.top)&&Math.round(e.left)===Math.round(i.left)&&Math.round(e.height)===Math.round(i.height)&&Math.round(e.width)===Math.round(i.width)}var dt;function Vn(e,i){return function(){if(!dt){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),dt=setTimeout(function(){dt=void 0},i)}}}function To(){clearTimeout(dt),dt=void 0}function Xn(e,i,n){e.scrollLeft+=i,e.scrollTop+=n}function Kn(e){var i=window.Polymer,n=window.jQuery||window.Zepto;return i&&i.dom?i.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Gn(e,i,n){var r={};return Array.from(e.children).forEach(function(t){var s,o,a,c;if(!(!Te(t,i.draggable,e,!1)||t.animated||t===n)){var h=ce(t);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,h.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,h.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,h.right),r.bottom=Math.max((c=r.bottom)!==null&&c!==void 0?c:-1/0,h.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var be="Sortable"+new Date().getTime();function Io(){var e=[],i;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(t){if(!(W(t,"display")==="none"||t===B.ghost)){e.push({target:t,rect:ce(t)});var s=Ee({},e[e.length-1].rect);if(t.thisAnimationDuration){var o=Ze(t,!0);o&&(s.top-=o.f,s.left-=o.e)}t.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(So(e,{target:r}),1)},animateAll:function(r){var t=this;if(!this.options.animation){clearTimeout(i),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(a){var c=0,h=a.target,f=h.fromRect,m=ce(h),y=h.prevFromRect,v=h.prevToRect,b=a.rect,d=Ze(h,!0);d&&(m.top-=d.f,m.left-=d.e),h.toRect=m,h.thisAnimationDuration&&ti(y,m)&&!ti(f,m)&&(b.top-m.top)/(b.left-m.left)===(f.top-m.top)/(f.left-m.left)&&(c=Ao(b,y,v,t.options)),ti(m,f)||(h.prevFromRect=f,h.prevToRect=m,c||(c=t.options.animation),t.animate(h,b,m,c)),c&&(s=!0,o=Math.max(o,c),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},c),h.thisAnimationDuration=c)}),clearTimeout(i),s?i=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,t,s,o){if(o){W(r,"transition",""),W(r,"transform","");var a=Ze(this.el),c=a&&a.a,h=a&&a.d,f=(t.left-s.left)/(c||1),m=(t.top-s.top)/(h||1);r.animatingX=!!f,r.animatingY=!!m,W(r,"transform","translate3d("+f+"px,"+m+"px,0)"),this.forRepaintDummy=Eo(r),W(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),W(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){W(r,"transition",""),W(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Eo(e){return e.offsetWidth}function Ao(e,i,n,r){return Math.sqrt(Math.pow(i.top-e.top,2)+Math.pow(i.left-e.left,2))/Math.sqrt(Math.pow(i.top-n.top,2)+Math.pow(i.left-n.left,2))*r.animation}var Ye=[],ii={initializeByDefault:!0},yt={mount:function(i){for(var n in ii)ii.hasOwnProperty(n)&&!(n in i)&&(i[n]=ii[n]);Ye.forEach(function(r){if(r.pluginName===i.pluginName)throw"Sortable: Cannot mount plugin ".concat(i.pluginName," more than once")}),Ye.push(i)},pluginEvent:function(i,n,r){var t=this;this.eventCanceled=!1,r.cancel=function(){t.eventCanceled=!0};var s=i+"Global";Ye.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Ee({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][i]&&n[o.pluginName][i](Ee({sortable:n},r)))})},initializePlugins:function(i,n,r,t){Ye.forEach(function(a){var c=a.pluginName;if(!(!i.options[c]&&!a.initializeByDefault)){var h=new a(i,n,i.options);h.sortable=i,h.options=i.options,i[c]=h,Pe(r,h.defaults)}});for(var s in i.options)if(i.options.hasOwnProperty(s)){var o=this.modifyOption(i,s,i.options[s]);typeof o<"u"&&(i.options[s]=o)}},getEventProperties:function(i,n){var r={};return Ye.forEach(function(t){typeof t.eventProperties=="function"&&Pe(r,t.eventProperties.call(n[t.pluginName],i))}),r},modifyOption:function(i,n,r){var t;return Ye.forEach(function(s){i[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(t=s.optionListeners[n].call(i[s.pluginName],r))}),t}};function Do(e){var i=e.sortable,n=e.rootEl,r=e.name,t=e.targetEl,s=e.cloneEl,o=e.toEl,a=e.fromEl,c=e.oldIndex,h=e.newIndex,f=e.oldDraggableIndex,m=e.newDraggableIndex,y=e.originalEvent,v=e.putSortable,b=e.extraEventProperties;if(i=i||n&&n[be],!!i){var d,p=i.options,l="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Oe&&!vt?d=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent(r,!0,!0)),d.to=o||n,d.from=a||n,d.item=t||n,d.clone=s,d.oldIndex=c,d.newIndex=h,d.oldDraggableIndex=f,d.newDraggableIndex=m,d.originalEvent=y,d.pullMode=v?v.lastPutMode:void 0;var u=Ee(Ee({},b),yt.getEventProperties(r,i));for(var g in u)d[g]=u[g];n&&n.dispatchEvent(d),p[l]&&p[l].call(i,d)}}var Po=["evt"],ye=function(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=r.evt,s=_o(r,Po);yt.pluginEvent.bind(B)(i,n,Ee({dragEl:R,parentEl:re,ghostEl:Y,rootEl:ie,nextEl:Be,lastDownEl:Dt,cloneEl:ne,cloneHidden:Le,dragStarted:ot,putSortable:ue,activeSortable:B.active,originalEvent:t,oldIndex:Qe,oldDraggableIndex:ft,newIndex:xe,newDraggableIndex:Me,hideGhostForTarget:es,unhideGhostForTarget:ts,cloneNowHidden:function(){Le=!0},cloneNowShown:function(){Le=!1},dispatchSortableEvent:function(a){pe({sortable:n,name:a,originalEvent:t})}},s))};function pe(e){Do(Ee({putSortable:ue,cloneEl:ne,targetEl:R,rootEl:ie,oldIndex:Qe,oldDraggableIndex:ft,newIndex:xe,newDraggableIndex:Me},e))}var R,re,Y,ie,Be,Dt,ne,Le,Qe,xe,ft,Me,xt,ue,Ke=!1,Ft=!1,zt=[],He,ke,ni,si,fn,hn,ot,Ve,ht,pt=!1,_t=!1,Pt,fe,ri=[],gi=!1,Wt=[],$t=typeof document<"u",Ct=ki,pn=vt||Oe?"cssFloat":"float",Oo=$t&&!qn&&!ki&&"draggable"in document.createElement("div"),Qn=function(){if($t){if(Oe)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Jn=function(i,n){var r=W(i),t=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=tt(i,0,n),o=tt(i,1,n),a=s&&W(s),c=o&&W(o),h=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ce(s).width,f=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+ce(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var m=a.float==="left"?"left":"right";return o&&(c.clear==="both"||c.clear===m)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||h>=t&&r[pn]==="none"||o&&r[pn]==="none"&&h+f>t)?"vertical":"horizontal"},Mo=function(i,n,r){var t=r?i.left:i.top,s=r?i.right:i.bottom,o=r?i.width:i.height,a=r?n.left:n.top,c=r?n.right:n.bottom,h=r?n.width:n.height;return t===a||s===c||t+o/2===a+h/2},Lo=function(i,n){var r;return zt.some(function(t){var s=t[be].options.emptyInsertThreshold;if(!(!s||Ti(t))){var o=ce(t),a=i>=o.left-s&&i<=o.right+s,c=n>=o.top-s&&n<=o.bottom+s;if(a&&c)return r=t}}),r},Zn=function(i){function n(s,o){return function(a,c,h,f){var m=a.options.group.name&&c.options.group.name&&a.options.group.name===c.options.group.name;if(s==null&&(o||m))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,c,h,f),o)(a,c,h,f);var y=(o?a:c).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var r={},t=i.group;(!t||At(t)!="object")&&(t={name:t}),r.name=t.name,r.checkPull=n(t.pull,!0),r.checkPut=n(t.put),r.revertClone=t.revertClone,i.group=r},es=function(){!Qn&&Y&&W(Y,"display","none")},ts=function(){!Qn&&Y&&W(Y,"display","")};$t&&!qn&&document.addEventListener("click",function(e){if(Ft)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ft=!1,!1},!0);var Fe=function(i){if(R){i=i.touches?i.touches[0]:i;var n=Lo(i.clientX,i.clientY);if(n){var r={};for(var t in i)i.hasOwnProperty(t)&&(r[t]=i[t]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[be]._onDragOver(r)}}},Ro=function(i){R&&R.parentNode[be]._isOutsideThisEl(i.target)};function B(e,i){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=i=Pe({},i),e[be]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Jn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:B.supportPointer!==!1&&"PointerEvent"in window&&(!ut||ki),emptyInsertThreshold:5};yt.initializePlugins(this,e,n);for(var r in n)!(r in i)&&(i[r]=n[r]);Zn(i);for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));this.nativeDraggable=i.forceFallback?!1:Oo,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?G(e,"pointerdown",this._onTapStart):(G(e,"mousedown",this._onTapStart),G(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(G(e,"dragover",this),G(e,"dragenter",this)),zt.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),Pe(this,Io())}B.prototype={constructor:B,_isOutsideThisEl:function(i){!this.el.contains(i)&&i!==this.el&&(Ve=null)},_getDirection:function(i,n){return typeof this.options.direction=="function"?this.options.direction.call(this,i,n,R):this.options.direction},_onTapStart:function(i){if(i.cancelable){var n=this,r=this.el,t=this.options,s=t.preventOnFilter,o=i.type,a=i.touches&&i.touches[0]||i.pointerType&&i.pointerType==="touch"&&i,c=(a||i).target,h=i.target.shadowRoot&&(i.path&&i.path[0]||i.composedPath&&i.composedPath()[0])||c,f=t.filter;if(qo(r),!R&&!(/mousedown|pointerdown/.test(o)&&i.button!==0||t.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&ut&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=Te(c,t.draggable,r,!1),!(c&&c.animated)&&Dt!==c)){if(Qe=Ce(c),ft=Ce(c,t.draggable),typeof f=="function"){if(f.call(this,i,c,this)){pe({sortable:n,rootEl:h,name:"filter",targetEl:c,toEl:r,fromEl:r}),ye("filter",n,{evt:i}),s&&i.preventDefault();return}}else if(f&&(f=f.split(",").some(function(m){if(m=Te(h,m.trim(),r,!1),m)return pe({sortable:n,rootEl:m,name:"filter",targetEl:c,fromEl:r,toEl:r}),ye("filter",n,{evt:i}),!0}),f)){s&&i.preventDefault();return}t.handle&&!Te(h,t.handle,r,!1)||this._prepareDragStart(i,a,c)}}},_prepareDragStart:function(i,n,r){var t=this,s=t.el,o=t.options,a=s.ownerDocument,c;if(r&&!R&&r.parentNode===s){var h=ce(r);if(ie=s,R=r,re=R.parentNode,Be=R.nextSibling,Dt=r,xt=o.group,B.dragged=R,He={target:R,clientX:(n||i).clientX,clientY:(n||i).clientY},fn=He.clientX-h.left,hn=He.clientY-h.top,this._lastX=(n||i).clientX,this._lastY=(n||i).clientY,R.style["will-change"]="all",c=function(){if(ye("delayEnded",t,{evt:i}),B.eventCanceled){t._onDrop();return}t._disableDelayedDragEvents(),!ln&&t.nativeDraggable&&(R.draggable=!0),t._triggerDragStart(i,n),pe({sortable:t,name:"choose",originalEvent:i}),we(R,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){Yn(R,f.trim(),oi)}),G(a,"dragover",Fe),G(a,"mousemove",Fe),G(a,"touchmove",Fe),o.supportPointer?(G(a,"pointerup",t._onDrop),!this.nativeDraggable&&G(a,"pointercancel",t._onDrop)):(G(a,"mouseup",t._onDrop),G(a,"touchend",t._onDrop),G(a,"touchcancel",t._onDrop)),ln&&this.nativeDraggable&&(this.options.touchStartThreshold=4,R.draggable=!0),ye("delayStart",this,{evt:i}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(vt||Oe))){if(B.eventCanceled){this._onDrop();return}o.supportPointer?(G(a,"pointerup",t._disableDelayedDrag),G(a,"pointercancel",t._disableDelayedDrag)):(G(a,"mouseup",t._disableDelayedDrag),G(a,"touchend",t._disableDelayedDrag),G(a,"touchcancel",t._disableDelayedDrag)),G(a,"mousemove",t._delayedDragTouchMoveHandler),G(a,"touchmove",t._delayedDragTouchMoveHandler),o.supportPointer&&G(a,"pointermove",t._delayedDragTouchMoveHandler),t._dragStartTimer=setTimeout(c,o.delay)}else c()}},_delayedDragTouchMoveHandler:function(i){var n=i.touches?i.touches[0]:i;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){R&&oi(R),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var i=this.el.ownerDocument;K(i,"mouseup",this._disableDelayedDrag),K(i,"touchend",this._disableDelayedDrag),K(i,"touchcancel",this._disableDelayedDrag),K(i,"pointerup",this._disableDelayedDrag),K(i,"pointercancel",this._disableDelayedDrag),K(i,"mousemove",this._delayedDragTouchMoveHandler),K(i,"touchmove",this._delayedDragTouchMoveHandler),K(i,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(i,n){n=n||i.pointerType=="touch"&&i,!this.nativeDraggable||n?this.options.supportPointer?G(document,"pointermove",this._onTouchMove):n?G(document,"touchmove",this._onTouchMove):G(document,"mousemove",this._onTouchMove):(G(R,"dragend",this),G(ie,"dragstart",this._onDragStart));try{document.selection?Ot(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(i,n){if(Ke=!1,ie&&R){ye("dragStarted",this,{evt:n}),this.nativeDraggable&&G(document,"dragover",Ro);var r=this.options;!i&&we(R,r.dragClass,!1),we(R,r.ghostClass,!0),B.active=this,i&&this._appendGhost(),pe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ke){this._lastX=ke.clientX,this._lastY=ke.clientY,es();for(var i=document.elementFromPoint(ke.clientX,ke.clientY),n=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(ke.clientX,ke.clientY),i!==n);)n=i;if(R.parentNode[be]._isOutsideThisEl(i),n)do{if(n[be]){var r=void 0;if(r=n[be]._onDragOver({clientX:ke.clientX,clientY:ke.clientY,target:i,rootEl:n}),r&&!this.options.dragoverBubble)break}i=n}while(n=Un(n));ts()}},_onTouchMove:function(i){if(He){var n=this.options,r=n.fallbackTolerance,t=n.fallbackOffset,s=i.touches?i.touches[0]:i,o=Y&&Ze(Y,!0),a=Y&&o&&o.a,c=Y&&o&&o.d,h=Ct&&fe&&dn(fe),f=(s.clientX-He.clientX+t.x)/(a||1)+(h?h[0]-ri[0]:0)/(a||1),m=(s.clientY-He.clientY+t.y)/(c||1)+(h?h[1]-ri[1]:0)/(c||1);if(!B.active&&!Ke){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(i,!0)}if(Y){o?(o.e+=f-(ni||0),o.f+=m-(si||0)):o={a:1,b:0,c:0,d:1,e:f,f:m};var y="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");W(Y,"webkitTransform",y),W(Y,"mozTransform",y),W(Y,"msTransform",y),W(Y,"transform",y),ni=f,si=m,ke=s}i.cancelable&&i.preventDefault()}},_appendGhost:function(){if(!Y){var i=this.options.fallbackOnBody?document.body:ie,n=ce(R,!0,Ct,!0,i),r=this.options;if(Ct){for(fe=i;W(fe,"position")==="static"&&W(fe,"transform")==="none"&&fe!==document;)fe=fe.parentNode;fe!==document.body&&fe!==document.documentElement?(fe===document&&(fe=Ie()),n.top+=fe.scrollTop,n.left+=fe.scrollLeft):fe=Ie(),ri=dn(fe)}Y=R.cloneNode(!0),we(Y,r.ghostClass,!1),we(Y,r.fallbackClass,!0),we(Y,r.dragClass,!0),W(Y,"transition",""),W(Y,"transform",""),W(Y,"box-sizing","border-box"),W(Y,"margin",0),W(Y,"top",n.top),W(Y,"left",n.left),W(Y,"width",n.width),W(Y,"height",n.height),W(Y,"opacity","0.8"),W(Y,"position",Ct?"absolute":"fixed"),W(Y,"zIndex","100000"),W(Y,"pointerEvents","none"),B.ghost=Y,i.appendChild(Y),W(Y,"transform-origin",fn/parseInt(Y.style.width)*100+"% "+hn/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(i,n){var r=this,t=i.dataTransfer,s=r.options;if(ye("dragStart",this,{evt:i}),B.eventCanceled){this._onDrop();return}ye("setupClone",this),B.eventCanceled||(ne=Kn(R),ne.removeAttribute("id"),ne.draggable=!1,ne.style["will-change"]="",this._hideClone(),we(ne,this.options.chosenClass,!1),B.clone=ne),r.cloneId=Ot(function(){ye("clone",r),!B.eventCanceled&&(r.options.removeCloneOnHide||ie.insertBefore(ne,R),r._hideClone(),pe({sortable:r,name:"clone"}))}),!n&&we(R,s.dragClass,!0),n?(Ft=!0,r._loopId=setInterval(r._emulateDragOver,50)):(K(document,"mouseup",r._onDrop),K(document,"touchend",r._onDrop),K(document,"touchcancel",r._onDrop),t&&(t.effectAllowed="move",s.setData&&s.setData.call(r,t,R)),G(document,"drop",r),W(R,"transform","translateZ(0)")),Ke=!0,r._dragStartId=Ot(r._dragStarted.bind(r,n,i)),G(document,"selectstart",r),ot=!0,window.getSelection().removeAllRanges(),ut&&W(document.body,"user-select","none")},_onDragOver:function(i){var n=this.el,r=i.target,t,s,o,a=this.options,c=a.group,h=B.active,f=xt===c,m=a.sort,y=ue||h,v,b=this,d=!1;if(gi)return;function p(I,H){ye(I,b,Ee({evt:i,isOwner:f,axis:v?"vertical":"horizontal",revert:o,dragRect:t,targetRect:s,canSort:m,fromSortable:y,target:r,completed:u,onMove:function(U,q){return St(ie,n,R,t,U,ce(U),i,q)},changed:g},H))}function l(){p("dragOverAnimationCapture"),b.captureAnimationState(),b!==y&&y.captureAnimationState()}function u(I){return p("dragOverCompleted",{insertion:I}),I&&(f?h._hideClone():h._showClone(b),b!==y&&(we(R,ue?ue.options.ghostClass:h.options.ghostClass,!1),we(R,a.ghostClass,!0)),ue!==b&&b!==B.active?ue=b:b===B.active&&ue&&(ue=null),y===b&&(b._ignoreWhileAnimating=r),b.animateAll(function(){p("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(r===R&&!R.animated||r===n&&!r.animated)&&(Ve=null),!a.dragoverBubble&&!i.rootEl&&r!==document&&(R.parentNode[be]._isOutsideThisEl(i.target),!I&&Fe(i)),!a.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),d=!0}function g(){xe=Ce(R),Me=Ce(R,a.draggable),pe({sortable:b,name:"change",toEl:n,newIndex:xe,newDraggableIndex:Me,originalEvent:i})}if(i.preventDefault!==void 0&&i.cancelable&&i.preventDefault(),r=Te(r,a.draggable,n,!0),p("dragOver"),B.eventCanceled)return d;if(R.contains(i.target)||r.animated&&r.animatingX&&r.animatingY||b._ignoreWhileAnimating===r)return u(!1);if(Ft=!1,h&&!a.disabled&&(f?m||(o=re!==ie):ue===this||(this.lastPutMode=xt.checkPull(this,h,R,i))&&c.checkPut(this,h,R,i))){if(v=this._getDirection(i,r)==="vertical",t=ce(R),p("dragOverValid"),B.eventCanceled)return d;if(o)return re=ie,l(),this._hideClone(),p("revert"),B.eventCanceled||(Be?ie.insertBefore(R,Be):ie.appendChild(R)),u(!0);var x=Ti(n,a.draggable);if(!x||Fo(i,v,this)&&!x.animated){if(x===R)return u(!1);if(x&&n===i.target&&(r=x),r&&(s=ce(r)),St(ie,n,R,t,r,s,i,!!r)!==!1)return l(),x&&x.nextSibling?n.insertBefore(R,x.nextSibling):n.appendChild(R),re=n,g(),u(!0)}else if(x&&Ho(i,v,this)){var S=tt(n,0,a,!0);if(S===R)return u(!1);if(r=S,s=ce(r),St(ie,n,R,t,r,s,i,!1)!==!1)return l(),n.insertBefore(R,S),re=n,g(),u(!0)}else if(r.parentNode===n){s=ce(r);var _=0,w,k=R.parentNode!==n,C=!Mo(R.animated&&R.toRect||t,r.animated&&r.toRect||s,v),T=v?"top":"left",E=un(r,"top","top")||un(R,"top","top"),A=E?E.scrollTop:void 0;Ve!==r&&(w=s[T],pt=!1,_t=!C&&a.invertSwap||k),_=zo(i,r,s,v,C?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,_t,Ve===r);var D;if(_!==0){var O=Ce(R);do O-=_,D=re.children[O];while(D&&(W(D,"display")==="none"||D===Y))}if(_===0||D===r)return u(!1);Ve=r,ht=_;var L=r.nextElementSibling,M=!1;M=_===1;var P=St(ie,n,R,t,r,s,i,M);if(P!==!1)return(P===1||P===-1)&&(M=P===1),gi=!0,setTimeout(No,30),l(),M&&!L?n.appendChild(R):r.parentNode.insertBefore(R,M?L:r),E&&Xn(E,0,A-E.scrollTop),re=R.parentNode,w!==void 0&&!_t&&(Pt=Math.abs(w-ce(r)[T])),g(),u(!0)}if(n.contains(R))return u(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){K(document,"mousemove",this._onTouchMove),K(document,"touchmove",this._onTouchMove),K(document,"pointermove",this._onTouchMove),K(document,"dragover",Fe),K(document,"mousemove",Fe),K(document,"touchmove",Fe)},_offUpEvents:function(){var i=this.el.ownerDocument;K(i,"mouseup",this._onDrop),K(i,"touchend",this._onDrop),K(i,"pointerup",this._onDrop),K(i,"pointercancel",this._onDrop),K(i,"touchcancel",this._onDrop),K(document,"selectstart",this)},_onDrop:function(i){var n=this.el,r=this.options;if(xe=Ce(R),Me=Ce(R,r.draggable),ye("drop",this,{evt:i}),re=R&&R.parentNode,xe=Ce(R),Me=Ce(R,r.draggable),B.eventCanceled){this._nulling();return}Ke=!1,_t=!1,pt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),vi(this.cloneId),vi(this._dragStartId),this.nativeDraggable&&(K(document,"drop",this),K(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ut&&W(document.body,"user-select",""),W(R,"transform",""),i&&(ot&&(i.cancelable&&i.preventDefault(),!r.dropBubble&&i.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(ie===re||ue&&ue.lastPutMode!=="clone")&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),R&&(this.nativeDraggable&&K(R,"dragend",this),oi(R),R.style["will-change"]="",ot&&!Ke&&we(R,ue?ue.options.ghostClass:this.options.ghostClass,!1),we(R,this.options.chosenClass,!1),pe({sortable:this,name:"unchoose",toEl:re,newIndex:null,newDraggableIndex:null,originalEvent:i}),ie!==re?(xe>=0&&(pe({rootEl:re,name:"add",toEl:re,fromEl:ie,originalEvent:i}),pe({sortable:this,name:"remove",toEl:re,originalEvent:i}),pe({rootEl:re,name:"sort",toEl:re,fromEl:ie,originalEvent:i}),pe({sortable:this,name:"sort",toEl:re,originalEvent:i})),ue&&ue.save()):xe!==Qe&&xe>=0&&(pe({sortable:this,name:"update",toEl:re,originalEvent:i}),pe({sortable:this,name:"sort",toEl:re,originalEvent:i})),B.active&&((xe==null||xe===-1)&&(xe=Qe,Me=ft),pe({sortable:this,name:"end",toEl:re,originalEvent:i}),this.save()))),this._nulling()},_nulling:function(){ye("nulling",this),ie=R=re=Y=Be=ne=Dt=Le=He=ke=ot=xe=Me=Qe=ft=Ve=ht=ue=xt=B.dragged=B.ghost=B.clone=B.active=null,Wt.forEach(function(i){i.checked=!0}),Wt.length=ni=si=0},handleEvent:function(i){switch(i.type){case"drop":case"dragend":this._onDrop(i);break;case"dragenter":case"dragover":R&&(this._onDragOver(i),jo(i));break;case"selectstart":i.preventDefault();break}},toArray:function(){for(var i=[],n,r=this.el.children,t=0,s=r.length,o=this.options;t<s;t++)n=r[t],Te(n,o.draggable,this.el,!1)&&i.push(n.getAttribute(o.dataIdAttr)||Bo(n));return i},sort:function(i,n){var r={},t=this.el;this.toArray().forEach(function(s,o){var a=t.children[o];Te(a,this.options.draggable,t,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),i.forEach(function(s){r[s]&&(t.removeChild(r[s]),t.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var i=this.options.store;i&&i.set&&i.set(this)},closest:function(i,n){return Te(i,n||this.options.draggable,this.el,!1)},option:function(i,n){var r=this.options;if(n===void 0)return r[i];var t=yt.modifyOption(this,i,n);typeof t<"u"?r[i]=t:r[i]=n,i==="group"&&Zn(r)},destroy:function(){ye("destroy",this);var i=this.el;i[be]=null,K(i,"mousedown",this._onTapStart),K(i,"touchstart",this._onTapStart),K(i,"pointerdown",this._onTapStart),this.nativeDraggable&&(K(i,"dragover",this),K(i,"dragenter",this)),Array.prototype.forEach.call(i.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),zt.splice(zt.indexOf(this.el),1),this.el=i=null},_hideClone:function(){if(!Le){if(ye("hideClone",this),B.eventCanceled)return;W(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),Le=!0}},_showClone:function(i){if(i.lastPutMode!=="clone"){this._hideClone();return}if(Le){if(ye("showClone",this),B.eventCanceled)return;R.parentNode==ie&&!this.options.group.revertClone?ie.insertBefore(ne,R):Be?ie.insertBefore(ne,Be):ie.appendChild(ne),this.options.group.revertClone&&this.animate(R,ne),W(ne,"display",""),Le=!1}}};function jo(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function St(e,i,n,r,t,s,o,a){var c,h=e[be],f=h.options.onMove,m;return window.CustomEvent&&!Oe&&!vt?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=i,c.from=e,c.dragged=n,c.draggedRect=r,c.related=t||i,c.relatedRect=s||ce(i),c.willInsertAfter=a,c.originalEvent=o,e.dispatchEvent(c),f&&(m=f.call(h,c,o)),m}function oi(e){e.draggable=!1}function No(){gi=!1}function Ho(e,i,n){var r=ce(tt(n.el,0,n.options,!0)),t=Gn(n.el,n.options,Y),s=10;return i?e.clientX<t.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<t.top-s||e.clientY<r.bottom&&e.clientX<r.left}function Fo(e,i,n){var r=ce(Ti(n.el,n.options.draggable)),t=Gn(n.el,n.options,Y),s=10;return i?e.clientX>t.right+s||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>t.bottom+s||e.clientX>r.right&&e.clientY>r.top}function zo(e,i,n,r,t,s,o,a){var c=r?e.clientY:e.clientX,h=r?n.height:n.width,f=r?n.top:n.left,m=r?n.bottom:n.right,y=!1;if(!o){if(a&&Pt<h*t){if(!pt&&(ht===1?c>f+h*s/2:c<m-h*s/2)&&(pt=!0),pt)y=!0;else if(ht===1?c<f+Pt:c>m-Pt)return-ht}else if(c>f+h*(1-t)/2&&c<m-h*(1-t)/2)return Wo(i)}return y=y||o,y&&(c<f+h*s/2||c>m-h*s/2)?c>f+h/2?1:-1:0}function Wo(e){return Ce(R)<Ce(e)?1:-1}function Bo(e){for(var i=e.tagName+e.className+e.src+e.href+e.textContent,n=i.length,r=0;n--;)r+=i.charCodeAt(n);return r.toString(36)}function qo(e){Wt.length=0;for(var i=e.getElementsByTagName("input"),n=i.length;n--;){var r=i[n];r.checked&&Wt.push(r)}}function Ot(e){return setTimeout(e,0)}function vi(e){return clearTimeout(e)}$t&&G(document,"touchmove",function(e){(B.active||Ke)&&e.cancelable&&e.preventDefault()});B.utils={on:G,off:K,css:W,find:Yn,is:function(i,n){return!!Te(i,n,i,!1)},extend:ko,throttle:Vn,closest:Te,toggleClass:we,clone:Kn,index:Ce,nextTick:Ot,cancelNextTick:vi,detectDirection:Jn,getChild:tt,expando:be};B.get=function(e){return e[be]};B.mount=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i[0].constructor===Array&&(i=i[0]),i.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(B.utils=Ee(Ee({},B.utils),r.utils)),yt.mount(r)})};B.create=function(e,i){return new B(e,i)};B.version=Co;var le=[],at,yi,bi=!1,ai,li,Bt,lt;function $o(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):this.options.supportPointer?G(document,"pointermove",this._handleFallbackAutoScroll):r.touches?G(document,"touchmove",this._handleFallbackAutoScroll):G(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):(K(document,"pointermove",this._handleFallbackAutoScroll),K(document,"touchmove",this._handleFallbackAutoScroll),K(document,"mousemove",this._handleFallbackAutoScroll)),mn(),Mt(),To()},nulling:function(){Bt=yi=at=bi=lt=ai=li=null,le.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var t=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Bt=n,r||this.options.forceAutoScrollFallback||vt||Oe||ut){ci(n,this.options,a,r);var c=Re(a,!0);bi&&(!lt||s!==ai||o!==li)&&(lt&&mn(),lt=setInterval(function(){var h=Re(document.elementFromPoint(s,o),!0);h!==c&&(c=h,Mt()),ci(n,t.options,h,r)},10),ai=s,li=o)}else{if(!this.options.bubbleScroll||Re(a,!0)===Ie()){Mt();return}ci(n,this.options,Re(a,!1),!1)}}},Pe(e,{pluginName:"scroll",initializeByDefault:!0})}function Mt(){le.forEach(function(e){clearInterval(e.pid)}),le=[]}function mn(){clearInterval(lt)}var ci=Vn(function(e,i,n,r){if(i.scroll){var t=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=i.scrollSensitivity,a=i.scrollSpeed,c=Ie(),h=!1,f;yi!==n&&(yi=n,Mt(),at=i.scroll,f=i.scrollFn,at===!0&&(at=Re(n,!0)));var m=0,y=at;do{var v=y,b=ce(v),d=b.top,p=b.bottom,l=b.left,u=b.right,g=b.width,x=b.height,S=void 0,_=void 0,w=v.scrollWidth,k=v.scrollHeight,C=W(v),T=v.scrollLeft,E=v.scrollTop;v===c?(S=g<w&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),_=x<k&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(S=g<w&&(C.overflowX==="auto"||C.overflowX==="scroll"),_=x<k&&(C.overflowY==="auto"||C.overflowY==="scroll"));var A=S&&(Math.abs(u-t)<=o&&T+g<w)-(Math.abs(l-t)<=o&&!!T),D=_&&(Math.abs(p-s)<=o&&E+x<k)-(Math.abs(d-s)<=o&&!!E);if(!le[m])for(var O=0;O<=m;O++)le[O]||(le[O]={});(le[m].vx!=A||le[m].vy!=D||le[m].el!==v)&&(le[m].el=v,le[m].vx=A,le[m].vy=D,clearInterval(le[m].pid),(A!=0||D!=0)&&(h=!0,le[m].pid=setInterval((function(){r&&this.layer===0&&B.active._onTouchMove(Bt);var L=le[this.layer].vy?le[this.layer].vy*a:0,M=le[this.layer].vx?le[this.layer].vx*a:0;typeof f=="function"&&f.call(B.dragged.parentNode[be],M,L,e,Bt,le[this.layer].el)!=="continue"||Xn(le[this.layer].el,M,L)}).bind({layer:m}),24))),m++}while(i.bubbleScroll&&y!==c&&(y=Re(y,!1)));bi=h}},30),is=function(i){var n=i.originalEvent,r=i.putSortable,t=i.dragEl,s=i.activeSortable,o=i.dispatchSortableEvent,a=i.hideGhostForTarget,c=i.unhideGhostForTarget;if(n){var h=r||s;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,m=document.elementFromPoint(f.clientX,f.clientY);c(),h&&!h.el.contains(m)&&(o("spill"),this.onSpill({dragEl:t,putSortable:r}))}};function Ii(){}Ii.prototype={startIndex:null,dragStart:function(i){var n=i.oldDraggableIndex;this.startIndex=n},onSpill:function(i){var n=i.dragEl,r=i.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var t=tt(this.sortable.el,this.startIndex,this.options);t?this.sortable.el.insertBefore(n,t):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:is};Pe(Ii,{pluginName:"revertOnSpill"});function Ei(){}Ei.prototype={onSpill:function(i){var n=i.dragEl,r=i.putSortable,t=r||this.sortable;t.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),t.animateAll()},drop:is};Pe(Ei,{pluginName:"removeOnSpill"});B.mount(new $o);B.mount(Ei,Ii);const Lt={SUGGESTION:"suggestion",SORTABLE:"sortable"},Uo='<svg class="glyph" width="15" height="14" fill-rule="evenodd" fill="#000"  xmlns="http://www.w3.org/2000/svg""><circle cx="5" cy="2" r="1.5"/><circle cx="10" cy="2" r="1.5"/><circle cx="5" cy="7" r="1.5"/><circle cx="10" cy="7" r="1.5"/><circle cx="5" cy="12" r="1.5"/><circle cx="10" cy="12" r="1.5"/></svg>',Yo='<svg class="glyph" width="15" height="15" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path fill="#000" d="M14.213 1.485L12.8.071 7.142 5.728 1.485.07.071 1.485l5.657 5.657L.07 12.8l1.414 1.414 5.657-5.657 5.657 5.657 1.414-1.414-5.657-5.657z" fill-rule="evenodd"/></svg>',gn=e=>pr(e,{modifierClasses:"-username",metadataFormat:mr.USERNAME}),ui=(e,i,n)=>i===Lt.SORTABLE?['<div class="person-block team-member js-team-member" data-person-id="'.concat(e.id,'">'),'<div class="handle js-handle">',"".concat(Uo),"</div>","".concat(gn(e)),'<input type="hidden" name="teamMemberPersonIds" value="'.concat(e.id,'"/>'),'<div class="actions">','<div class="action -remove">','<button type="button" data-js-trigger="remove">','<span class="label _sr-only">Remove</span>',"".concat(Yo),"</button>","</div>","</div>","</div>"].join("\n"):['<div class="suggestion person-block'.concat(n?" -disabled":"",'" data-person-id="').concat(e.id,'">'),"".concat(gn(e)),"</div>"].join("\n");gt.registerPlugin(or,cr);const wi="team-member-manager",ze={DISABLED:"-disabled",EXPANDED:"-expanded",TEAM_MEMBER:"team-member",TEAM_MEMBER_HIGHLIGHT:"-highlight",TEAM_MEMBER_HIGHLIGHT_TRANSITION_OUT:"-highlight-transition-out-active",MEMBERLIST_OVERFLOW:"-overflow"},di={PERSON_ID:"person-id"},Vo={CHANGE:"change",DISABLE:"disable",ENABLE:"enable"},Xo={searchInputSelector:"#person-search",memberListData:[],endpoint:"foo?q="};class Ko extends rr{constructor(n,r={}){super();ae(this,"_populateMemberList",n=>{const r=n.map(t=>ui(t,Lt.SORTABLE)).join("");this.memberList.insertAdjacentHTML("beforeend",r)});ae(this,"updateMemberList",n=>{const r=this.getSortedMembers();!!r.length?(this.memberList.removeAttribute("hidden"),this.emptyMemberListFallback.setAttribute("hidden","")):(this.memberList.setAttribute("hidden",""),this.emptyMemberListFallback.removeAttribute("hidden"));const s=this.membersScroller.scrollHeight>this.memberList.offsetHeight;this.membersScroller.classList.toggle("-has-no".concat(ze.MEMBERLIST_OVERFLOW),!s),this.emit(Vo.CHANGE,r)});ae(this,"getSortedMembers",()=>this.memberListSortableInstance.toArray().map(n=>Number(n)));ae(this,"isTeamMemberById",n=>this.getSortedMembers().indexOf(n)>-1);ae(this,"_scrollMemberIntoView",function(n){const t=function(s,o,a){return o<a?o/a*s:s};return new Promise(s=>{const o=this.membersScroller.scrollHeight-this.membersScroller.offsetHeight,a=Math.min(n.offsetTop-this.membersScroller.offsetTop,o),c=Math.abs(this.membersScroller.scrollTop-a),h=t(.5,c,this.membersScroller.offsetHeight);h===0?s():this._timeline.clear().eventCallback("onComplete",null).to(this.membersScroller,h,{scrollTo:{y:a,autoKill:!1},ease:lr.easeOut,onComplete:()=>{s(this._timeline)}})})});ae(this,"_highlightNewMember",n=>{n.classList.add(ze.TEAM_MEMBER_HIGHLIGHT,ze.TEAM_MEMBER_HIGHLIGHT_TRANSITION_OUT);const{onTransitionEnd:s}=fr({duration:2e3,propertyName:"backgroundColor",target:n});this._scrollMemberIntoView(n).then(()=>{n.offsetWidth,n.classList.remove(ze.TEAM_MEMBER_HIGHLIGHT),s.then(()=>{n.classList.remove(ze.TEAM_MEMBER_HIGHLIGHT_TRANSITION_OUT)})})});ae(this,"addMember",n=>{if(this.isTeamMemberById(n.id))return;const r=ui(n,Lt.SORTABLE);this.memberList.insertAdjacentHTML("beforeend",r),this._highlightNewMember(this.memberList.lastChild),this.updateMemberList()});ae(this,"_getPersonIdFromElement",n=>Number(n.dataset["".concat(vr(di.PERSON_ID))]));ae(this,"_onMemberListRemoveTriggerClick",n=>{if(!Array.from(this.memberList.querySelectorAll('[data-js-trigger="remove"]')).find(c=>c===n.target||c.contains(n.target)))return;n.preventDefault();const o=n.target.closest(".js-".concat(ze.TEAM_MEMBER)),a=this._getPersonIdFromElement(o);this.removeTeamMemberById(a)});ae(this,"removeTeamMemberById",n=>{const r=this.personAutocompleteInstance.typeahead.menu._getSelectables().get().find(t=>this._getPersonIdFromElement(t)===n);this.personAutocompleteInstance.typeahead.menu.enableSelectable($(r)),this.memberList.querySelector("[data-".concat(di.PERSON_ID,'="').concat(n,'"]')).remove(),this.updateMemberList()});ae(this,"_onInputInitialFocus",n=>{this.el.addEventListener(dr,r=>{r.target===this.el.querySelector(":scope > .js-frame")&&r.propertyName==="padding-top"&&this.updateMemberList()},{once:!0}),this.el.classList.add(ze.EXPANDED)});ae(this,"_onTypeaheadAutocomplete",(n,r,t)=>{this.addMember(r)});this.$el=n,this.el=n[0],this.options=gr({},Xo,r,ur(this.$el,wi)),this._timeline=new ar({autoRemoveChildren:!0}),this.membersScroller=this.el.querySelector(".js-members-scrollable"),this.memberList=this.el.querySelector("[data-js-sortable]"),this.emptyMemberListFallback=this.el.querySelector(".js-empty-member-list-fallback"),this._populateMemberList(this.options.memberListData),this.memberListSortableInstance=new B(this.memberList,{dataIdAttr:"data-".concat(di.PERSON_ID),handle:".js-handle",direction:"vertical",ghostClass:"-ghost",chosenClass:"-chosen",dragClass:"-drag",onSort:this.updateMemberList}),this.updateMemberList(),this.memberList.addEventListener("click",this._onMemberListRemoveTriggerClick),this.searchInput=this.el.querySelector(this.options.searchInputSelector),this.spinner=this.el.querySelector("[data-js-spinner]"),this.inputResetTrigger=this.el.querySelector('[data-js-trigger="reset"]'),this.personAutocompleteInstance=new hr(this.searchInput,{spinner:this.spinner,inputResetTrigger:this.inputResetTrigger,endpoint:this.options.endpoint,templates:{suggestion:t=>ui(t,Lt.SUGGESTION,this.isTeamMemberById(t.id))}}),this.searchInput.addEventListener("focus",this._onInputInitialFocus,{once:!0}),this.$searchInput=$(this.searchInput),this.$searchInput.on("typeahead:autocomplete typeahead:select",this._onTypeaheadAutocomplete)}}function Go(e){const i=document.querySelector(".js-change-password-form");if(!i)return;const n=i.querySelector('button[type="submit"]');$(n).data("ajax-data",()=>new URLSearchParams(new FormData(i)).toString()).on("ajax-success",(r,t,s,o)=>{t.messages&&e.showMessages(t.result?"success":"error",t.messages),t.errorCodes.length&&t.errorCodes.includes("update.user.password.successful")&&i.reset()})}class Qo{constructor(i,n){const r=i.querySelector('[name="emailAddress"]');let t=r.dataset.originalValue;delete r.dataset.originalValue,Object.defineProperties(this,{el:{value:i},input:{value:r},value:{get:()=>this.input.value},originalValue:{get:()=>t,set:s=>{t=s}}})}hasValueChanged(){return this.value!==this.originalValue}}const ns={BEGINREMOVAL:"begindeletion"};class ss{constructor(i,n={}){ae(this,"_onPanelTriggerClick",i=>{i.preventDefault(),this.toggle()});ae(this,"_setExpanded",(i=!0)=>{this.panelTrigger.setAttribute("aria-expanded",i)});ae(this,"_onSubmit",i=>this.isBusy?(i.preventDefault(),!1):(this.submit(),i.preventDefault(),!1));ae(this,"_doAjaxSubmission",i=>{const n={url:this.form.action,type:this.form.method,data:i,traditional:!0};return this._doAjaxAsDeferred(n)});ae(this,"submit",()=>{if(this.isBusy)return;this._submitActivityButtonInstance.toggle(!0);const i=new URLSearchParams(new FormData(this.form)).toString();this._doAjaxSubmission(i).fail((n,r,t)=>{this._submitActivityButtonInstance.toggle(!1)}).done((n,r,t)=>{t.status===204?this.remove():n&&n.result?this.remove():this._submitActivityButtonInstance.toggle(!1)}).always((n,r,t)=>{})});Object.defineProperties(this,{el:{value:i},id:{get:()=>this.el.id},panelTrigger:{get:()=>this.el.querySelector("button[aria-controls][aria-expanded]")},panelBody:{get:()=>document.getElementById(this.panelTrigger.getAttribute("aria-controls"))},isExpanded:{get:()=>this.panelTrigger.getAttribute("aria-expanded")==="true"},submitTrigger:{get:()=>this.form.querySelector('button[type="submit"]')},isBusy:{get:()=>this._submitActivityButtonInstance.isBusy},form:{get:()=>this.panelBody}}),this.panelTrigger.addEventListener("click",this._onPanelTriggerClick),this._submitActivityButtonInstance=new br(this.submitTrigger,{}),this.form.addEventListener("submit",this._onSubmit)}toggle(){this._setExpanded(!this.isExpanded),this.isExpanded&&this._open()}_open(){return this.panelBody.tabIndex=0,this.panelBody.focus({preventScroll:!0}),this.panelBody.addEventListener("blur",i=>{i.target.removeAttribute("tabIndex")},{once:!0}),new Promise(i=>{gt.timeline().from(this.panelBody,{duration:Je.IN,height:0,ease:"expo.out",clearProps:"height",onComplete:()=>{wr(this.panelBody,{block:"center"}),i()}},0).from(this.panelBody,{duration:Je.IN_LONG,opacity:0,ease:"expo.out",clearProps:"all"},.125)})}remove(){const i=new Promise(n=>{const r=Je.OUT,t=r*(1/3),s=r-t;gt.timeline().to(this.el,{duration:r,scale:1.5,ease:"back.in(1)"},0).to(this.el,{duration:t,opacity:0,ease:"expo.out"},s).eventCallback("onComplete",()=>{n(),this.destroy()})});return et(ns.BEGINREMOVAL,this.el,{onComplete:i}),i}destroy(){this._submitActivityButtonInstance.destroy(),this.el.remove()}}Object.assign(ss.prototype,$s);const Jo="external-connection-list",Zo={listitemsSelector:".listitem"};class ea{constructor(i,n={}){ae(this,"_onExternalConnectionBegindeletion",i=>{const n=i.currentTarget;n.style.height="".concat(n.getBoundingClientRect().height,"px"),i.detail.onComplete.then(()=>{this.externalConnectionInstances.size<=1&&this._showEmptyFrame(),gt.timeline().to(n,{duration:Je.OUT_SHORT,height:0,marginTop:0,ease:"expo.out",onComplete:()=>{this._removeExternalConnectionInstance(n)}})}).catch(()=>{})});const r={...Zo,...n};Object.defineProperties(this,{el:{value:i}}),this.externalConnectionInstances=new Map,Array.from(this.el.querySelectorAll(":scope > ".concat(r.listitemsSelector))).forEach(t=>{const s=t.querySelector(".js-external-connection"),o=new ss(s);this.externalConnectionInstances.set(t,o),t.addEventListener(ns.BEGINREMOVAL,this._onExternalConnectionBegindeletion)})}_removeExternalConnectionInstance(i){this.externalConnectionInstances.delete(i),i.remove()}_showEmptyFrame(){const i=this.el.querySelector(".js-listitem-empty");i.removeAttribute("hidden"),gt.timeline().from(i,{duration:Je.IN,height:0,ease:"expo.out",clearProps:"all"},0).from(i.children,{duration:Je.IN_LONG,opacity:0,ease:"expo.out",clearProps:"all"},.125)}}function ta(e){const i=document.querySelector(".js-".concat(Jo));i&&new ea(i)}$(function(){if($(".js-update-screen").length){const e=document.documentElement.classList.contains("context-client-app"),i=$("#user-update");e||(bxd.initUsernameChecker(i.find("input[name='username']"),i.find(".check-container")),i.on("ajax-success",function(h,f,m,y){f.result&&f.usernameChanged&&window.location.reload(!0)})),yr(window.bxd);const n=i.find(".js-".concat(wi));if(n.length){const h=new Ko(n,{});n.data(wi,h),i.protectUnsavedChanges({reset:!0})}Go(window.bxd),ta();const r=i[0].querySelector(".js-email-address-field"),t=r&&new Qo(r),s=i[0].querySelector('input[name="password"]'),o=i[0].querySelector('input[name="authenticationCode"]');i.on("submit",function(h){if(t&&s.value===""&&t.hasValueChanged()){h.stopImmediatePropagation(),h.preventDefault();const f=new En({description:"Please enter your password to change your email&nbsp;address.",fields:[{type:"totp",options:{output:!!o}}],actions:[{label:"Save Changes"}]},window.bxd);f.status.then(({password:m,authenticationCode:y})=>{f.hide(),s.value=m,o&&(o.value=y),i.trigger("submit")},()=>{})}}).on("ajax-success",function(h,f,m,y){f.result&&(t&&(t.originalValue=t.value),person&&(person.showAdultContent=!!f.showAdultContent),f.facebookPage&&$("input[name='facebookPage']").val(f.facebookPage),f.instagramPage&&$("input[name='instagramPage']").val(f.instagramPage),f.tiktokPage&&$("input[name='tiktokPage']").val(f.tiktokPage),f.imdbPage&&$("input[name='imdbPage']").val(f.imdbPage),f.youtubePage&&$("input[name='youtubePage']").val(f.youtubePage),f.blueskyPage&&$("input[name='blueskyPage']").val(f.blueskyPage),f.threadsPage&&$("input[name='threadsPage']").val(f.threadsPage)),i.find(".form-row.-error").removeClass("-error"),f.errorFields&&f.errorFields.forEach(v=>{i.find('input[name="'.concat(v,'"],textarea[name="').concat(v,'"]')).one("keypress",function(b){$(this).closest(".form-row").removeClass("-error")}).closest(".form-row").addClass("-error")})}).on("ajax-complete",function(h){s&&(s.value=""),o&&(o.value=""),i.protectUnsavedChanges({reset:!0})}),$("#connections li.external-service").bind("refresh",function(h){$(this).load(baseURL+"/user/ajax/connections-"+$(this).data("type")+"/",function(){$(this).trigger("reloaded")}),bxd.dismissMessages()}),$(document).on("click","#connections .remove",function(h){h.preventDefault();const f=$(this);f.hasClass("ajax-working")||bxd.dismissMessages(function(){const m=f.data("confirm");if(typeof m>"u"||window.confirm(m.replace(/\\n/g,"\n"))){f.addClass("ajax-working");const y=f.parents("li"),v=f,b=new mo({lines:10,length:4,width:2,radius:3,color:"#fff",speed:1,shadow:!1});$.ajax({url:f.data("action"),data:{__csrf:mt()},type:"POST",beforeSend:function(){b.spin(v[0])},success:function(){f.removeClass("ajax-working"),b.stop(),y.trigger("refresh"),$("#connections ."+f.data("detail-container")).trigger("refresh")},error:function(){f.removeClass("ajax-working"),b.stop(),bxd.showMessages("error",["Failed to unlink your account."])}})}})}),$(".js-toggle-list input[type=checkbox]").each(function(){const h=$(this);h.data("ajax-data",function(){const f={};return f[h.attr("name")]=h.is(":checked"),f}),h.bind("ajax-success",function(f,m,y,v){m.messages&&bxd.showMessages(m.result?"success":"error",m.messages);for(const b in m){const d=$(".js-toggle-list input[type=checkbox][name="+b+"]");d.length&&d.prop("checked",m[b])}}),h.bind("ajax-error",function(f,m){bxd.showMessages("error",m)})}).change(function(){$(this).trigger("ajax-action")}),sr().then(()=>{xr("user-stores",()=>{const h=$(".js-favorite-services-list"),f=$(".js-favorite-services-panel"),m=$(".js-no-favorite-services");f.hasClass("-empty")||m.hide(),$("#stores").bind("ajax-success",function(b,d,p,l){d.messages&&bxd.showMessages(d.result?"success":"error",d.messages),$("#frm-primary-itunes-store").val(d.primaryItunesStore),$("#frm-secondary-itunes-store").val(d.secondaryItunesStore),$("#frm-primary-amazon-store").val(d.primaryAmazonStore),$("#frm-secondary-amazon-store").val(d.secondaryAmazonStore)}).bind("ajax-error",function(b,d){bxd.showMessages("error",d)}).data("ajax-data",function(){const b={};b.serviceIds=[],$("#stores").find("select:not(.js-hmv)").each(function(){b.serviceIds.push($(this).val())}),$("#stores").find("select.js-hmv").each(function(){const p=$(this).val();p==="true"?b.hmv=!0:p==="false"&&(b.hmv=!1)});const d=h.children(".service");return d.length?(d.each(function(){b.serviceIds.push($(this).data("id"))}),f.removeClass("-empty"),m.hide()):(f.addClass("-empty"),m.show()),b}).on("change","select",function(){$("#stores").trigger("ajax-action")}).on("click",".js-service-brand",function(b){if(!$(b.target).hasClass("cataloglink")){b.preventDefault();const d=$(this),p=d.data("id");if(d.hasClass("-selected"))y(p);else{d.addClass("-selected");const l=d.data("name"),u=d.data("icon"),g=d.data("shortname");let x='<p class="service" data-id="'+p+'">';x+='<span class="label"><span class="brand"><img src="'+u+'" width="24" height="24" title="'+l+'" alt="'+l+'" class="js-squircle-mask" /></span>',x+='<span class="title">'+l+" ("+g+')</span></span><a href class="remove js-remove-favorite-service">(Remove)</a></p>';const S=$(x);h.append(S),bxd.layout(S)}$("#stores").trigger("ajax-action")}}),h.on("click",".service",function(b){b.preventDefault();const d=$(this).data("id");$(b.target).hasClass("js-remove-favorite-service")&&($("#stores .js-service-brand[data-id="+d+"]").removeClass("-selected"),h.children(".service[data-id="+d+"]").remove(),$("#stores").trigger("ajax-action"))});function y(b){$("#stores .js-service-brand[data-id="+b+"]").removeClass("-selected"),h.children(".service[data-id="+b+"]").remove(),$("#stores").trigger("ajax-action")}function v(){const b=$(".js-favorite-services-locale"),d=$(".js-locale-menu"),p=d.find(".js-locale-link"),l=d.find(".js-close-localemenu");let u=b.data("locale"),g=!1;const x=$(".js-brands-by-locale");x&&x.append(d);function S(){const T=b.position().top+b.height()+0;b.addClass("-open"),x&&x.addClass("-localeopen"),d.css({top:T}).show(),g=!0,$(window).on("click.localemenu",function(E){const A=$(E.target).is(".locale-menu *, .locale-menu"),D=$(E.target).is(".locale-selector *, .locale-selector");!A&&!D&&_()})}function _(){b.removeClass("-open"),x&&x.removeClass("-localeopen"),d.hide(),g=!1,$(window).off("click.localemenu")}b.bind("click",function(k){k.preventDefault(),g?_():S()}),l.bind("click",function(k){k.preventDefault(),g&&_()}),p.on("click",function(k){k.preventDefault();const C=$(this),T=C.data("locale"),E=C.find("img").attr("src"),A=C.data("name");_(),T!==u&&(b.find(".js-locale-title").text(A),b.find(".js-flag").attr("src",E),p.parent().removeClass("-selected"),C.parent().addClass("-selected"),$.cookie("availabilityLocale",T,{expires:365,path:"/"}),u=T,$(".js-brands-list").removeClass("-selected").filter("[data-locale="+T+"]").addClass("-selected"))});const w=$.cookie("availabilityLocale");if(w&&w!==u){const k=p.filter("[data-locale="+w+"]");k&&k.trigger("click")}}$(".js-favorite-services-locale").length&&v()})});const a={href:$("a.export-data-link").attr("href")+"#modal",overlayClose:!1,fixed:!0,onComplete:function(){$(".export-data-button").on("click",function(h){h.preventDefault();const f=$(this).attr("href");$("a.export-data-link").colorbox.close(),bxd.showMessages("success","Your export is being prepared. Please leave this window open, your download will begin shortly"),setTimeout(function(){location.href=f},300)})}};renderMobile&&(a.width="100%",a.initialWidth="288px",a.initialHeight="200px",a.transition="fade",a.speed=0),$("a.export-data-link").colorbox(a);const c={href:$(".disable-account-link").data("action-url")+"#modal",fixed:!0,overlayClose:!1,innerWidth:660,onComplete:function(){bxd.layout($("#modal")),$(".disable-account-link").colorbox.resize(),$(".disable-account-button").data("ajax-data",function(){return $("#disable-account-form").serialize()}).bind("ajax-success",function(h,f,m,y){if(f.messages&&bxd.showMessages(f.result?"success":"error",f.messages),f.result){$(this).closest("article").html('<section class="registration-complete body-text -hero"><p>Deactivating your account please wait.</p></section>'),$(".disable-account-link").colorbox.resize();let v=baseURL+"/farewell";f.token&&(v=v+"?hash="+encodeURIComponent(f.token)),setTimeout(function(){location.href=v},2e3)}})}};renderMobile&&(c.width="100%",c.initialWidth="288px",c.initialHeight="200px",c.transition="fade",c.speed=0),$(".disable-account-link").colorbox(c),$("#check .username-edit, #check-locked .username-locked").on("click",function(h){h.preventDefault(),$(".frm-reg-username").trigger("click")}),$(".frm-reg-username").on("click",function(h){const f=$(this);if(f.is(":disabled"))if(f.data("can-enable")&&$("#check .username-edit").length){const m={html:"<div class='modal-legacy signup-modal'><article><h1>Changing your username</h1><p class='body-text -light'>"+f.data("disabled-text")+"</p></article></div>",width:"520px",fixed:!0,overlayClose:!1,onClosed:function(){f.prop("disabled",!1),f.focus(),f.select(),$("#check").html("")}};renderMobile&&(m.width="100%",m.initialWidth="288px",m.initialHeight="200px",m.transition="fade",m.speed=0),$.colorbox(m)}else bxd.showMessages("warning",f.data("disabled-text"),{sticky:!0,messageId:"locked-username",dismissExistingMessages:!0})}),$("#frm-pronoun, #frm-reg-username, #frm-family-name, #frm-given-name").on("change keyup",function(){const h=$("#frm-pronoun").find("option:selected").data("pronoun-possessive");let f=($("#frm-given-name").val()+" "+$("#frm-family-name").val()).trim();f.length===0&&(f=($("#frm-reg-username").val()||person.username).trim()),$("#pronoun-possessive").text(h),$("#pronoun-name").text(f)}),$("#tabbed-content .internal-nav-item a").off("click"),$(".internal-tabbed-content").on("click",".internal-nav-item a",function(h){h.preventDefault();const f=$(this).closest(".internal-nav-item"),m=f.closest(".internal-tabbed-content");f.siblings().removeClass("internal-selected"),f.addClass("internal-selected"),m.find(".internal-tabbed-content-block").prop("hidden",!0),m.find(f.data("tab")).prop("hidden",!1)})}});$(function(){document.body.classList.contains("view")&&_r(document.body)});$(function(){const e=$("#frm-watchlist-autocomplete");if(e.length){const i=$("body");i.addClass("my-watchlist").removeClass("wide"),$(".js-watchlist-content").data("num-entries")===0&&i.addClass("empty-watchlist");let n=null;e.autocomplete(e.data("url"),$.extend({},bxd.autocompleteConfig,{width:228})).result(function(s,o,a){$.ajax({url:o.watchlistAction,data:{__csrf:mt()},type:"POST",dataType:"json",success:function(c,h,f){c.csrf!==null&&c.csrf!==void 0&&Ci(c.csrf),c.messages&&(bxd.showMessages(c.result?"success":"error",c.messages),$("#frm-watchlist-autocomplete").val(""),c.errorCodes.indexOf("film.added.to.watchlist")>-1&&(n=$.get($(".js-watchlist-content").data("path")).done(function(m,y,v){if(v===n){const b=$(m).find(".js-watchlist-main-content"),d=$(".js-watchlist-main-content");$(".twipsy").remove(),d.replaceWith(b),bxd.layout(b),i.removeClass("empty-watchlist")}})))},error:function(c,h,f){bxd.showMessages("error",["Sorry, we couldnt add the film to your watchlist. Please try again later."])}})}),$("body").click(function(s){!Ri(s,e)&&!Ri(s,$(".ac_results"))&&setTimeout(function(){e.trigger("close")},300)}),$(window).resize(function(){e.trigger("close")});const r=()=>document.querySelector(".js-watchlist-count").textContent,t=document.querySelector('[data-js-trigger="clear-watchlist"]');t&&t.addEventListener("click",s=>{const o=document.getElementById(s.currentTarget.dataset.formId),a=o.querySelector('input[name="__csrf"]'),c=o.querySelector('input[name="password"]'),h=o.querySelector('input[name="authenticationCode"]');s.preventDefault(),s.stopPropagation();const f=new En({description:"You are about to remove all ".concat(r(),' from your watchlist. We strongly recommend <a href="').concat(s.currentTarget.dataset.exportUrl,'" download>downloading a CSV export</a> of your watchlist before proceeding, as&nbsp;<em>there is no undo</em>.'),fields:[{type:"totp",options:{output:!!h}}],actions:[{label:"Clear Watchlist"}]},window.bxd);f.status.then(({password:m,authenticationCode:y})=>{window.bxd.setDocumentBusyness(!0),f.hide(),c.value=m,h&&(h.value=y),a.value=window.supermodelCSRF,o.submit()},()=>{})})}});window.addEventListener("pageshow",ia);function ia(e){e.persisted&&Cr()}function na(){const[e,i]=Xe.useState(),[n,r]=Xe.useState(!1),t=()=>{var a,c;(c=e==null?void 0:(a=e.props).onClose)==null||c.call(a),r(!1)},s=Xe.useCallback(a=>{var c;i(a),r((c=a.props.isOpen)!=null?c:!0)},[]),o=Xe.useCallback(a=>{r(a.isOpen)},[]);return Ni(er,s),Ni(tr,o),N.jsx(N.Fragment,{children:e&&N.jsx(Xe.Suspense,{children:N.jsx(e.Component,{...e.props,onClose:t,isOpen:n})})})}const sa={"modal-manager":"_modal-manager_1ytol_1"},vn="modal-manager";Sr.then(()=>{ra()});function ra(){if(!document.querySelector("#".concat(vn))){const i=document.createElement("div");i.id=vn,i.className=sa["modal-manager"],document.body.appendChild(i),xn.flushSync(()=>{yn(i,na,{})})}}window.isTouchOnly=!1;window&&window.matchMedia&&(window.matchMedia("(any-pointer: coarse)").matches&&(window.isTouchOnly=!0),matchMedia("(hover: none)").matches||(window.isTouchOnly=!1),window.isTouchOnly?document.documentElement.className+=" has-touch":document.documentElement.className+=" has-no-touch");window.Bloodhound=Br;window.Imager=oe;export{aa as __vite_legacy_guard};
